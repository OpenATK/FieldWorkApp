(this["webpackJsonpfield-work"]=this["webpackJsonpfield-work"]||[]).push([[0],{1011:function(e,a,n){"use strict";n.r(a);var t={};n.r(t),n.d(t,"state",(function(){return Oe})),n.d(t,"actions",(function(){return ke})),n.d(t,"onInitialize",(function(){return De}));var o={};n.r(o),n.d(o,"state",(function(){return Te})),n.d(o,"actions",(function(){return _e})),n.d(o,"effects",(function(){return Re}));var r=n(0),i=n.n(r),c=n(28),s=n.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(590),n(591),n(592);var l,d,u=n(188),p=n(67),f=n(2),m=n.n(f),g=n(233),v=n(566),w=n(36),h={OPTIONS:{redirect:d="http://openatk.com/FieldWorkApp/oauth2/redirect.html",metadata:l="eyJqa3UiOiJodHRwczovL2lkZW50aXR5Lm9hZGEtZGV2LmNvbS9jZXJ0cyIsImtpZCI6ImtqY1NjamMzMmR3SlhYTEpEczNyMTI0c2ExIiwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYifQ.eyJyZWRpcmVjdF91cmlzIjpbImh0dHA6Ly9vcGVuYXRrLmNvbS9GaWVsZFdvcmtBcHAvb2F1dGgyL3JlZGlyZWN0Lmh0bWwiLCJodHRwOi8vbG9jYWxob3N0L29hdXRoMi9yZWRpcmVjdC5odG1sIl0sInRva2VuX2VuZHBvaW50X2F1dGhfbWV0aG9kIjoidXJuOmlldGY6cGFyYW1zOm9hdXRoOmNsaWVudC1hc3NlcnRpb24tdHlwZTpqd3QtYmVhcmVyIiwiZ3JhbnRfdHlwZXMiOlsiYXV0aG9yaXphdGlvbl9jb2RlIl0sInJlc3BvbnNlX3R5cGVzIjpbInRva2VuIiwiY29kZSIsImlkX3Rva2VuIiwiaWRfdG9rZW4gdG9rZW4iLCJjb2RlIGlkX3Rva2VuIiwiY29kZSB0b2tlbiIsImNvZGUgaWRfdG9rZW4gdG9rZW4iXSwiY2xpZW50X25hbWUiOiJPcGVuQVRLIiwiY2xpZW50X3VyaSI6Imh0dHA6Ly9vcGVuYXRrLmNvbSIsImNvbnRhY3RzIjpbIlNhbSBOb2VsIDxzYW5vZWxAcHVyZHVlLmVkdT4iXSwiandrcyI6eyJrZXlzIjpbeyJrdHkiOiJSU0EiLCJuIjoiemF1WkZCdU1kbHYxa1lqelViNHEtXzNtNHNtRnhuZnc0U1lvYUhxN2NpOFNjdFkzeGo3cmRBSHlrUXBuUVZyajZLTzhtYUh2LTBCdlc1TWhjZ2l2a3VZcy16SEV2ZllCZVZCbmN2SGdPa0pQYmM5MUN3X2l3T1k3RUhXQjhoTTdWaUxRVmNfRHYwaDhuSnliQnZoTDA0Q0hRdDdDcE10VllHNmZvSlhjM2RxNTJqTlFiQkhJWjVtN1Z6MUt0eXpvTGNwOE8ybWhhTHA0NVVyM0NfMWVHdHY4bjVOejliV19CaDVYRlliRHh2N0JuaFpOSXcxR0NiampBd210Ym5uTDdHZ2Y0Q3k2MHdSSG1SNHZvZTIxT0lqb0FTcTJqWjAzeDEybVhzN0hQSTNZQjR5Mjl3dlpNdzJnTHpPZFRvcnJxTy10bG1uMWJvUGtXS0pKU1hvQXZ3IiwiZSI6IkFRQUIifV19LCJzb2Z0d2FyZV9pZCI6ImE3MDNiZmRjLTNmYTEtNDk5Zi1iOTA1LTExZjBiNTRmMzgwNyIsInJlZ2lzdHJhdGlvbl9wcm92aWRlciI6Imh0dHBzOi8vaWRlbnRpdHkub2FkYS1kZXYuY29tIiwiaWF0IjoxNTMzODQ2MTEyfQ.Y9BlbqHzOvufADGAW9HG4Yx2rqbg6zPalpcjSS_97Mpg36lOuADGJ4YTQ2iQfRlZjzqBi1sUq3iFhReBfk89Oy2nSEY6RVPnONK5v6a73jce3xGPUWk8DDl3rf3lcrt-IqWFoAieUie7WK5nrPFIe-_xcgYdChnuGrugjO9dGOY",scope:"oada.yield:all"},REDIRECT:d,METADATA:l,SCOPE:"oada.yield:all",oadaDomain:""},b={domain:h.oadaDomain},y=n(12),O=n.n(y),k=n(27),D=b,A={onInitialize:function(e){var a=e.state,n=e.actions,t=window.localStorage["oada:domain"],o=window.localStorage["oada:token"];t&&(a.view.Login.domain=t),t&&o&&n.view.Login.login({token:o})},login:function(e,a){return Object(k.a)(O.a.mark((function n(){var t,o,r,i,c;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.state,o=e.actions,r=a.token,i=t.view.Login,c=i.domain,i.loading=!0,c=c.match(/^http/)?c:"https://"+i.domain,n.next=8,o.app.OADAManager.login({domain:c,token:r});case 8:i.loading=!1,t.app.OADAManager.connected&&(i.loggedIn=!0,window.localStorage["oada:domain"]=i.domain,window.localStorage["oada:token"]=t.app.OADAManager.token);case 10:case"end":return n.stop()}}),n)})))()},logout:function(e){return Object(k.a)(O.a.mark((function a(){var n,t,o;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.state,t=e.actions,o=n.view.Login,!n.app.OADAManager.connected){a.next=7;break}return a.next=5,t.app.OADAManager.logout();case 5:delete window.localStorage["oada:domain"],delete window.localStorage["oada:token"];case 7:o.loggedIn=!1;case 8:case"end":return a.stop()}}),a)})))()},domainChange:function(e,a){e.state.view.Login.domain=a.value},viewDemo:function(e,a){e.state.view.Login.loggedIn=!0}},E=n(72),M=n(236),F=n.n(M),x={open:!1,fieldId:function(e,a){return Object(E.a)(e),m.a.get(a,"view.Map.selectedField")},field:function(e,a){var n=e.fieldId,t=m.a.get(a,"view.TopBar.OperationDropdown.selectedOperation");if(null==t||null==t.fields||null==n)return null;var o=m.a.get(t.fields[n],"status"),r=null;if(1==m.a.get(a,"app.OADAManager.connected")){var i=m.a.get(a,"app.OADAManager.currentConnection");r=m.a.get(a,"app.oada.".concat(i,".bookmarks.seasons.2019.fields.").concat(n))}else r=m.a.get(a,"app.localData.abc123.seasons.2019.fields.".concat(n));if(null==r)return null;var c=247105e-9*F.a.geometry(r.boundary);return m.a.merge({},r,{status:o,acres:c})},farm:function(e,a){var n=e.field,t=null;if(1==m.a.get(a,"app.OADAManager.connected")){var o=m.a.get(a,"app.OADAManager.currentConnection");if(m.a.get(n,"farm._id")){var r=m.a.get(a,"app.oadaSeasonFarmsIdBy_id.".concat(m.a.get(n,"farm._id"),".id"));t=m.a.get(a,"app.oada.".concat(o,".bookmarks.seasons.2019.farms.").concat(r))}}else m.a.get(n,"farm.id")&&(t=m.a.get(a,"app.localData.abc123.seasons.2019.farms.".concat(n.farm.id)));return t}},C=n(49),S=n.n(C),j={bookmarks:{_type:"application/vnd.oada.bookmarks.1+json",_rev:0,fields:{_type:"application/vnd.oada.fields.1+json",_rev:0,fields:{"*":{_type:"application/vnd.oada.field.1+json",_rev:0,farm:{_type:"application/vnd.oada.farm.1+json"}}},farms:{"*":{_type:"application/vnd.oada.farm.1+json",_rev:0}}},seasons:{_type:"application/vnd.oada.seasons.1+json",_rev:0,"*":{_type:"application/vnd.oada.season.1+json",_rev:0,fields:{"*":{_type:"application/vnd.oada.field.1+json",_rev:0,operations:{"*":{_type:"application/vnd.oada.operation.1+json",_rev:0}}}},farms:{"*":{_type:"application/vnd.oada.farm.1+json",_rev:0}},operations:{"*":{_type:"application/vnd.oada.operation.1+json",_rev:0}}}}}},I=x,N={open:function(e){e.state.view.FieldDetails.open=!0},close:function(e){e.state.view.FieldDetails.open=!1},changeOADAFieldStatus:function(e,a){var n=e.state,t=e.actions,o=m.a.get(n,"view.Map.selectedField"),r=m.a.get(n,"view.TopBar.OperationDropdown.selectedOperationId"),i=m.a.get(n,"app.OADAManager.currentConnection"),c=m.a.clone(m.a.get(n,"app.oada.".concat(i,".bookmarks.seasons.2019.operations.").concat(r,".fields.").concat(o)))||{},s=a;if(c.status==a&&(s=null),c.status=s,null==c.status){var l=[{type:"application/vnd.oada.operation.1+json",path:"/bookmarks/seasons/2019/operations/".concat(r,"/fields/").concat(o)},{type:"application/vnd.oada.field.1+json",path:"/bookmarks/seasons/2019/fields/".concat(o,"/operations/").concat(r)}];return t.app.oada.delete({requests:l,connection_id:i})}var d=m.a.get(n,"view.TopBar.OperationDropdown.selectedOperation"),u=[{tree:j,data:c,type:"application/vnd.oada.operation.1+json",path:"/bookmarks/seasons/2019/operations/".concat(r,"/fields/").concat(o)},{tree:j,data:{_id:d._id},type:"application/vnd.oada.field.1+json",path:"/bookmarks/seasons/2019/fields/".concat(o,"/operations/").concat(r)}];return t.app.oada.put({requests:u,connection_id:i})},changeLocalFieldStatus:function(e,a){var n=e.state,t=(n.view.FieldDetails,m.a.get(n,"view.Map.selectedField")),o=m.a.get(n,"view.TopBar.OperationDropdown.selectedOperationId"),r=m.a.clone(m.a.get(n,"app.localData.abc123.seasons.2019.operations.".concat(o,".fields.").concat(t)))||{},i=a;r.status==a&&(i=null),r.status=i,null==r.status?(m.a.unset(n,"app.localData.abc123.seasons.2019.operations.".concat(o,".fields.").concat(t)),m.a.unset(n,"app.localData.abc123.seasons.2019.fields.".concat(t,".operations.").concat(o))):(m.a.set(n,"app.localData.abc123.seasons.2019.operations.".concat(o,".fields.").concat(t),r),null==m.a.get(n,"app.localData.abc123.seasons.2019.fields.".concat(t,".operations"))&&m.a.set(n,"app.localData.abc123.seasons.2019.fields.".concat(t,".operations"),{}),m.a.set(n,"app.localData.abc123.seasons.2019.fields.".concat(t,".operations.").concat(o),{}))},onStatusChange:function(e,a){var n=e.state,t=e.actions,o=a.status,r=t.view.FieldDetails;n.app.OADAManager.connected?r.changeOADAFieldStatus(o):r.changeLocalFieldStatus(o)}},B={open:!1,selectedField:null},T={},_={fieldStyles:{},selectedField:null,editingField:null,fields:function(e,a){Object(E.a)(e);var n=m.a.get(a,"view.Map.fieldStyles"),t=m.a.get(a,"view.Map.editingField"),o=(m.a.get(a,"view.Map.BoundaryDrawing.drawing"),m.a.get(a,"view.TopBar.OperationDropdown.selectedOperation")),r=m.a.get(a,"app.seasonFields");return m.a.chain(r).mapValues((function(e,a){if(t==a)return null;var r=m.a.clone(e);if(null!=n[a]&&(r.style=n[a]),o){var i="white";o.fields&&o.fields[a]&&("planned"==o.fields[a].status&&(i="red"),"started"==o.fields[a].status&&(i="orange"),"done"==o.fields[a].status&&(i="green")),r.style=m.a.merge({},r.style,{fillColor:i,color:i})}return r})).omitBy((function(e,a){if(null==e)return!0})).value()}},R=n(59),Z=n.n(R),L={styleField:{highlight:function(e,a){var n=e.state;if(a){var t=m.a.get(n,"view.Map");m.a.set(t,"fieldStyles.".concat(a),{weight:5})}},unhighlight:function(e,a){var n=e.state;if(a){var t=m.a.get(n,"view.Map");m.a.set(t,"fieldStyles.".concat(a),{weight:3})}}},unselectField:function(e){return Object(k.a)(O.a.mark((function a(){var n,t,o,r;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.state,t=e.actions,o=m.a.get(t,"view.Map"),!(r=m.a.get(n,"view.Map")).selectedField){a.next=9;break}return t.view.FieldDetails.close(),o.styleField.unhighlight(r.selectedField),a.next=8,Z.a.delay(200);case 8:r.selectedField=null;case 9:case"end":return a.stop()}}),a)})))()},onFieldClick:function(e,a){var n=e.state,t=e.actions,o=a.id,r=m.a.get(t,"view.Map"),i=m.a.get(n,"view.Map");m.a.get(i,"BoundaryDrawing.drawing")||(r.styleField.unhighlight(i.selectedField),i.selectedField=o,r.styleField.highlight(o),t.view.FieldDetails.open())},onMapClick:function(e,a){var n=e.actions,t=m.a.get(n,"view.Map");t.unselectField(),t.BoundaryDrawing.onMapClick(a)}},W=n(47),V={boundary:{},drawing:!1},G={addPointToBoundary:function(e,a){var n=e.state.view.Map.BoundaryDrawing;m.a.set(n,"boundary.".concat(S()()),[a.lat,a.lng])},updateBoundaryPoint:Object(W.h)(Object(W.d)(10),Object(W.g)((function(e,a){var n=e.state.view.Map.BoundaryDrawing;m.a.set(n,"boundary.".concat(a.id),[a.latlng.lat,a.latlng.lng])}))),onMapClick:function(e,a){var n=e.state,t=e.actions,o=a.lat,r=a.lng,i=n.view.Map.BoundaryDrawing,c=t.view.Map.BoundaryDrawing;i.drawing&&c.addPointToBoundary({lat:o,lng:r})},onMarkerMove:function(e,a){e.actions.view.Map.BoundaryDrawing.updateBoundaryPoint(a)},onStartDrawing:function(e,a){var n=e.state.view.Map.BoundaryDrawing;n.boundary=(a||{}).boundary||{},n.drawing=!0},onStopDrawing:function(e,a){var n=e.state.view.Map.BoundaryDrawing;n.drawing=!1,n.boundary={}}},z=Object(w.a)({BoundaryDrawing:V},_),P=Object(w.a)({BoundaryDrawing:G},L),H={OADADomain:{open:!1,domain:h.oadaDomain}},Y={OADADomain:{open:function(e){e.state.view.Modals.OADADomain.open=!0},close:function(e){e.state.view.Modals.OADADomain.open=!1},onConnectClick:function(e){e.actions.view.Modals.OADADomain.open()},onDomainChange:function(e,a){var n=e.state,t=a.domain;n.view.Modals.OADADomain.domain=t},onConnect:function(e){return Object(k.a)(O.a.mark((function a(){var n,t,o,r,i;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.actions,t=e.state,o=t.view.Modals.OADADomain,r=n.view.Modals.OADADomain,i=o.domain,o.loading=!0,a.next=7,n.app.OADAManager.onDomainChanged({domain:i});case 7:o.loading=!1,r.close();case 9:case"end":return a.stop()}}),a)})))()},onCancel:function(e){e.actions.view.Modals.OADADomain.close()}}};function X(e){return{type:"Polygon",coordinates:[m.a.map(e,(function(e){return[e[1],e[0]]}))]}}function q(e,a){var n=e.state,t=e.actions,o=a.fieldId,r=a.newBoundary,i=a.farmId,c=a.farm_id,s=a.seasonFarm_id,l=n.view.Modals.SaveField,d=t.app.getSeasonField(o),u=l.name,p={},f={};return u!=d.name&&(p.name=u),0==m.a.isEqual(r,d.boundary)&&(p.boundary=r),f=m.a.cloneDeep(p),s?d.farm&&d.farm._id==s||(p.farm={_id:s},f.farm={_id:c}):d.farm&&d.farm.id==i||(p.farm={id:i},f.farm={id:i}),{fieldChanges:f,seasonFieldChanges:p}}function U(e,a,n,t){var o=e.state;if(!m.a.isEmpty(n)||!m.a.isEmpty(t)){var r="app.localData.abc123.fields.fields.".concat(a);m.a.set(o,r,m.a.merge({},m.a.get(o,r),n));var i="app.localData.abc123.seasons.2019.fields.".concat(a);m.a.set(o,i,m.a.merge({},m.a.get(o,i),t))}}function J(e,a,n,t){return Q.apply(this,arguments)}function Q(){return(Q=Object(k.a)(O.a.mark((function e(a,n,t,o){var r,i,c,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.state,i=a.actions,!m.a.isEmpty(t)||!m.a.isEmpty(o)){e.next=3;break}return e.abrupt("return");case 3:return c=[],0==m.a.isEmpty(t)&&c.push({tree:j,data:t,path:"/bookmarks/fields/fields/".concat(n)}),0==m.a.isEmpty(o)&&c.push({tree:j,data:o,path:"/bookmarks/seasons/2019/fields/".concat(n)}),console.log("fieldChanges",t),console.log("seasonFieldChanges",o),s=m.a.get(r,"app.OADAManager.currentConnection"),e.next=11,i.app.oada.put({requests:c,connection_id:s});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e,a){var n=a.boundary,t=a.farmId,o=a.farm_id;return{name:e.state.view.Modals.SaveField.name,boundary:n,farm:o?{_id:o}:{id:t}}}function $(e,a){var n=a.field,t=e.state,o=S()();return m.a.set(t,"app.localData.abc123.fields.fields.".concat(o),n),m.a.set(t,"app.localData.abc123.seasons.2019.fields.".concat(o),Object(w.a)({},n,{operations:{},year:"2019"})),o}function ee(e,a){return ae.apply(this,arguments)}function ae(){return(ae=Object(k.a)(O.a.mark((function e(a,n){var t,o,r,i,c,s,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.field,o=n.seasonField,r=a.state,i=a.actions,c=S()(),s=[],t&&s.push({tree:j,data:t,path:"/bookmarks/fields/fields/".concat(c)}),o&&s.push({tree:j,data:Object(w.a)({},o,{operations:{},year:"2019"}),path:"/bookmarks/seasons/2019/fields/".concat(c)}),l=m.a.get(r,"app.OADAManager.currentConnection"),e.next=9,i.app.oada.put({requests:s,connection_id:l});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ne={open:!1,name:"",farmSearch:"",farms:function(e,a){var n=e.farmSearch;return m.a.compact(m.a.map(a.app.seasonFarms,(function(e,a){return!e||""!=n&&e.name&&-1==e.name.toLowerCase().search(n.toLowerCase())?null:{key:a,text:e.name,value:a}})))},farmId:null,farm:function(e,a){var n=e.farmId;e.farms;if(n)return m.a.get(a,"app.seasonFarms.".concat(n))}},te={open:function(e){var a=e.state,n=e.actions,t=a.view.Modals.SaveField,o=m.a.get(a,"view.Map.editingField");if(null==o)t.name="";else{var r=n.app.getSeasonField(o);if(t.name=r.name,a.app.OADAManager.connected){var i=m.a.get(a,"app.oadaSeasonFarmsIdBy_id.".concat(m.a.get(r,"farm._id"),".id"));t.farmId=i}else t.farmId=m.a.get(r,"farm.id")}t.open=!0},close:function(e){e.state.view.Modals.SaveField.open=!1},saveField:function(e){return Object(k.a)(O.a.mark((function a(){var n,t,o,r,i,c,s,l,d,u,p,f,g,v,w;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.state,t=n.view.Modals.SaveField,o=m.a.get(n,"view.Map.BoundaryDrawing.boundary"),r=X(o),i=t.farmId,c=null,s=null,(l=t.farm)&&n.app.OADAManager.connected&&(c=m.a.get(n,"app.oadaOrgData.fields.farms.".concat(i,"._id")),s=m.a.get(n,"app.seasonFarms.".concat(i,"._id"))),!(d=m.a.get(n,"view.Map.editingField"))){a.next=15;break}u=q(e,{fieldId:d,newBoundary:r,farmId:i,farm_id:c,seasonFarm_id:s}),p=u.fieldChanges,f=u.seasonFieldChanges,n.app.OADAManager.connected?J(e,d,p,f):U(e,d,p,f),a.next=31;break;case 15:if(!n.app.OADAManager.connected){a.next=26;break}return a.next=18,K(e,{boundary:r,farm_id:c});case 18:return g=a.sent,a.next=21,K(e,{boundary:r,farm_id:s});case 21:return v=a.sent,a.next=24,ee(e,{field:g,seasonField:v});case 24:a.next=31;break;case 26:return a.next=28,K(e,{boundary:r,farm:l,farmId:i});case 28:return w=a.sent,a.next=31,$(e,{field:w});case 31:case"end":return a.stop()}}),a)})))()},onSave:function(e){var a=e.actions,n=e.state,t=a.view.Modals.SaveField;t.saveField(),a.view.Map.BoundaryDrawing.onStopDrawing(),n.view.Map.editingField=null,t.close()},onCancel:function(e){var a=e.actions,n=e.state,t=a.view.Modals.SaveField;a.view.Map.BoundaryDrawing.onStopDrawing(),n.view.Map.editingField=null,t.close()},onNameChange:function(e,a){var n=e.state,t=a.name;n.view.Modals.SaveField.name=t},onFarmSearchChange:function(e,a){e.state.view.Modals.SaveField.farmSearch=a},onFarmChange:function(e,a){var n=e.state,t=a.id;n.view.Modals.SaveField.farmId=t},onFarmAdd:function(e){e.actions.view.Modals.NewFarm.open({callbackAction:"view.Modals.SaveField.onFarmAddComplete"})},onFarmAddComplete:function(e,a){var n=e.state,t=a.id;n.view.Modals.SaveField.farmId=t}};function oe(e,a){var n=e.state,t=a.operation,o=S()();return m.a.set(n,"app.localData.abc123.seasons.2019.operations.".concat(o),t),o}function re(e,a){return ie.apply(this,arguments)}function ie(){return(ie=Object(k.a)(O.a.mark((function e(a,n){var t,o,r,i,c,s,l,d;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,o=a.actions,r=n.operation,i=S()(),c=[{tree:j,data:r,path:"/bookmarks/seasons/2019/operations/".concat(i)}],s=m.a.get(t,"app.OADAManager.currentConnection"),e.next=7,o.app.oada.put({requests:c,connection_id:s});case 7:return l=e.sent,d=m.a.get(l,"responses.0.headers.content-location").substr(1),e.abrupt("return",{id:i,_id:d});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ce={open:!1,name:""},se={open:function(e){var a=e.state.view.Modals.NewOperation;a.name="",a.open=!0},close:function(e){e.state.view.Modals.NewOperation.open=!1},saveOperation:function(e){return Object(k.a)(O.a.mark((function a(){var n,t,o,r,i,c;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.state,t=n.view.Modals.NewOperation,s={name:t.name},o={name:s.name,fields:{}},!n.app.OADAManager.connected){a.next=12;break}return a.next=6,re(e,{operation:o});case 6:r=a.sent,i=r.id,r._id,m.a.set(n,"view.TopBar.OperationDropdown.selected",i),a.next=16;break;case 12:return a.next=14,oe(e,{operation:o});case 14:c=a.sent,m.a.set(n,"view.TopBar.OperationDropdown.selected",c);case 16:case"end":return a.stop()}var s}),a)})))()},onNameChange:function(e,a){var n=e.state,t=a.name;n.view.Modals.NewOperation.name=t},onCancel:function(e){e.actions.view.Modals.NewOperation.close()},onSave:function(e){return Object(k.a)(O.a.mark((function a(){var n,t;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.actions,t=n.view.Modals.NewOperation,a.next=4,t.saveOperation();case 4:t.close();case 5:case"end":return a.stop()}}),a)})))()}};function le(e,a){var n=a.farm,t=e.state,o=S()();return m.a.set(t,"app.localData.abc123.farms.".concat(o),n),m.a.set(t,"app.localData.abc123.seasons.2019.farms.".concat(o),n),o}function de(e,a){return ue.apply(this,arguments)}function ue(){return(ue=Object(k.a)(O.a.mark((function e(a,n){var t,o,r,i,c,s,l,d,u;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.farm,o=a.state,r=a.actions,i=S()(),c=[{tree:j,data:t,path:"/bookmarks/fields/farms/".concat(i)},{tree:j,data:t,path:"/bookmarks/seasons/2019/farms/".concat(i)}],s=m.a.get(o,"app.OADAManager.currentConnection"),e.next=7,r.app.oada.put({requests:c,connection_id:s});case 7:if(l=e.sent,null!=(d=m.a.get(l,"responses.0.headers.content-location").substr(1))){e.next=11;break}throw"OADA did not return an _id when creating a farm.";case 11:if(null!=(u=m.a.get(l,"responses.1.headers.content-location").substr(1))){e.next=14;break}throw"OADA did not return an _id when creating a season farm.";case 14:return e.abrupt("return",{farm_id:d,seasonFarm_id:u,id:i});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pe={open:!1,name:""},fe={open:function(e,a){var n=e.state,t=a.callbackAction,o=n.view.Modals.NewFarm;o.name="",o.open=!0,o.callbackAction=t||null},close:function(e){e.state.view.Modals.NewFarm.open=!1},saveFarm:function(e){return Object(k.a)(O.a.mark((function a(){var n,t,o,r,i,c,s,l,d,u,p;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.state,t=e.actions,o=n.view.Modals.NewFarm,f={name:o.name},r={name:f.name},!n.app.OADAManager.connected){a.next=17;break}return a.next=6,de(e,{farm:r});case 6:if(i=a.sent,c=i.farm_id,s=i.seasonFarm_id,l=i.id,!o.callbackAction){a.next=15;break}if(d=m.a.get(t,o.callbackAction)){a.next=14;break}throw"callbackAction: ".concat(o.callbackAction," does not exist.");case 14:d({farm_id:c,seasonFarm_id:s,id:l});case 15:a.next=25;break;case 17:return a.next=19,le(e,{farm:r});case 19:if(u=a.sent,!o.callbackAction){a.next=25;break}if(p=m.a.get(t,o.callbackAction)){a.next=24;break}throw"callbackAction: ".concat(o.callbackAction," does not exist.");case 24:p({id:u});case 25:case"end":return a.stop()}var f}),a)})))()},onNameChange:function(e,a){var n=e.state,t=a.name;n.view.Modals.NewFarm.name=t},onCancel:function(e){e.actions.view.Modals.NewFarm.close()},onSave:function(e){return Object(k.a)(O.a.mark((function a(){var n,t;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.actions,t=n.view.Modals.NewFarm,a.next=4,t.saveFarm();case 4:t.close();case 5:case"end":return a.stop()}}),a)})))()}},me=Object(w.a)({SaveField:ne,NewOperation:ce,NewFarm:pe},H),ge=Object(w.a)({SaveField:te,NewOperation:se,NewFarm:fe},Y),ve={onAddField:function(e){e.actions.view.Map.BoundaryDrawing.onStartDrawing()},onSaveField:function(e){e.actions.view.Modals.SaveField.open()},onCancelField:function(e){var a=e.state,n=e.actions;a.view.Map.editingField=null,n.view.Map.BoundaryDrawing.onStopDrawing()},onEditField:function(e){var a=e.actions,n=e.state,t=n.view.FieldDetails.field;n.view.Map.editingField=n.view.FieldDetails.fieldId;var o={};m.a.forEach(m.a.get(t,"boundary.coordinates.0")||[],(function(e){o[S()()]=[e[1],e[0]]})),a.view.Map.BoundaryDrawing.onStartDrawing({boundary:o}),a.view.Map.unselectField()},onResetCache:function(e){return Object(k.a)(O.a.mark((function a(){var n;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.actions,a.next=3,n.app.oada.resetCache();case 3:case"end":return a.stop()}}),a)})))()},onLogout:function(e){return Object(k.a)(O.a.mark((function a(){var n;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.actions,a.next=3,n.view.Login.logout();case 3:case"end":return a.stop()}}),a)})))()}},we={open:!1,selected:null,search:"",list:function(e,a){var n=e.selected,t=e.operations,o=m.a.get(a,"view.TopBar.OperationDropdown.search");return m.a.omitBy(m.a.mapValues(t,(function(e,a){var t=e.name;return null==a||""!=o&&-1==t.search(o)?null:{text:t,value:a,selected:n==a,label:{color:"green",empty:!0,circular:!0}}})),m.a.isEmpty)},operations:function(e,a){Object(E.a)(e);var n=null;if(1==m.a.get(a,"app.OADAManager.connected")){var t=m.a.get(a,"app.OADAManager.currentConnection");n=m.a.omitBy(m.a.get(a,"app.oada.".concat(t,".bookmarks.seasons.2019.operations"))||{},(function(e,a){return m.a.startsWith(a,"_")}))}else n=m.a.get(a,"app.localData.abc123.seasons.2019.operations");return n},selectedOperationId:function(e,a){var n=e.selected,t=e.operations,o=n;return null==o&&m.a.keys(t).length>0&&(o=m.a.keys(t)[0]),o},selectedOperation:function(e,a){var n=e.selectedOperationId;return e.operations[n]}},he={onAdd:function(e){var a=e.state,n=e.actions;return a.view.TopBar.OperationDropdown.open=!1,n.view.Modals.NewOperation.open()},onChange:function(e,a){var n=e.state,t=a.id,o=n.view.TopBar.OperationDropdown;o.selected=t,o.open=!1},onOpenChange:function(e,a){var n=e.state,t=a.open;n.view.TopBar.OperationDropdown.open=t},onSearch:function(e,a){var n=e.state,t=a.search;n.view.TopBar.OperationDropdown.search=t}},be=Object(w.a)({OperationDropdown:we},{}),ye=Object(w.a)({OperationDropdown:he},ve),Oe=Object(w.a)({Login:D,FieldDetails:I,FieldList:B,Map:z,Modals:me,TopBar:be},{}),ke=Object(w.a)({Login:A,FieldDetails:N,FieldList:T,Map:P,Modals:ge,TopBar:ye},{}),De=function(e){e.actions.view.Login.onInitialize()},Ae={"42f60b10-784c-11ea-8dfd-a3e960f56105":{name:"1004 G-N",boundary:{type:"Polygon",coordinates:[[[-84.97584700584412,41.4628134964027],[-84.97539639472963,41.462765256171906],[-84.97495651245119,41.46275721612994],[-84.97424840927125,41.46250797433487],[-84.97405529022217,41.46203360827181],[-84.97410893440247,41.46044164256161],[-84.97139453887941,41.46130195211675],[-84.96770381927492,41.46327177680542],[-84.97010707855226,41.46330393671208],[-84.9764907360077,41.46306273702346],[-84.97634053230287,41.45965368547904],[-84.97462391853334,41.46024867436535],[-84.9746346473694,41.461004463187685],[-84.97491359710695,41.46126175098986],[-84.97492432594301,41.46172004235903],[-84.97529983520509,41.46208988917259],[-84.97581481933594,41.46234717266838],[-84.9761688709259,41.46278133625282]]]},farm:{id:"42f08cd0-784c-11ea-8dfd-a3e960f56105"}},"7c0ce950-784c-11ea-bfa5-97fea4f9bfd9":{name:"1001 HO-N",boundary:{type:"Polygon",coordinates:[[[-84.97347593307495,41.44864540647965],[-84.97626543045044,41.44856498851091],[-84.97617959976196,41.44784122230691],[-84.977445602417,41.44782513852177],[-84.97759580612183,41.44862932289387],[-84.97886180877687,41.448532821295515],[-84.97866868972778,41.44205080201176],[-84.97654438018799,41.442887227983185],[-84.97549295425415,41.44425443952937],[-84.97323989868165,41.44608806625952],[-84.97272491455078,41.44689227216232],[-84.97330427169801,41.44726220353039]]]},farm:{id:"42f08cd0-784c-11ea-8dfd-a3e960f56105"}},"8ab27420-784c-11ea-bfa5-97fea4f9bfd9":{name:"1002 HO-S",boundary:{type:"Polygon",coordinates:[[[-84.97152328491212,41.44697269220437],[-84.97148036956789,41.44166475561947],[-84.97152328491212,41.44111785263252],[-84.97347593307495,41.441085681725035],[-84.97373342514038,41.44073180069027],[-84.97635126113893,41.44053877385792],[-84.97645854949953,41.44134304853828],[-84.97607231140138,41.44161649965898],[-84.97611522674562,41.44240467585386],[-84.97540712356569,41.44398099952468]]]},farm:{id:"42f08cd0-784c-11ea-8dfd-a3e960f56105"}}},Ee={"42f08cd0-784c-11ea-8dfd-a3e960f56105":{name:"Bowman and Bowman"},"52f08cd0-784c-11ea-8dfd-a3e960f56105":{name:"Martz Farms"}},Me={acresStatus:function(e,a){Object(E.a)(e);var n=a.app.operationFields,t=a.app.seasonFields,o=0,r=0,i=0;m.a.forEach(n,(function(e,a){if(null!=e){var n=t[a];if(null!=n){var c=247105e-9*F.a.geometry(n.boundary);"planned"==e.status?o+=c:"started"==e.status?r+=c:"done"==e.status&&(i+=c)}}}));var c=o+r+i;return{planned:Math.round(o),plannedPercentage:Math.round(o/(c||1)*100),started:Math.round(r),startedPercentage:Math.round(r/(c||1)*100),done:Math.round(i),donePercentage:Math.round(i/(c||1)*100)}},seasonFarms:function(e,a){var n;if(Object(E.a)(e),1==m.a.get(a,"app.OADAManager.connected")){var t=m.a.get(a,"app.OADAManager.currentConnection");n=m.a.chain(a).get("app.oada.".concat(t,".bookmarks.seasons.2019.farms")).omitBy((function(e,a){return!!m.a.startsWith(a,"_")||(null==e||void 0)})).value()}else n=m.a.get(a,"app.localData.abc123.seasons.2019.farms");return n||{}},seasonFields:function(e,a){var n;if(Object(E.a)(e),1==m.a.get(a,"app.OADAManager.connected")){var t=m.a.get(a,"app.OADAManager.currentConnection");n=m.a.chain(a).get("app.oada.".concat(t,".bookmarks.seasons.2019.fields")).omitBy((function(e,a){return!!m.a.startsWith(a,"_")||(null==e||void 0)})).value()}else n=m.a.get(a,"app.localData.abc123.seasons.2019.fields");return n||{}},operationFields:function(e,a){Object(E.a)(e);var n=m.a.get(a,"view.TopBar.OperationDropdown.selectedOperationId"),t=[];if(null!=n)if(1==m.a.get(a,"app.OADAManager.connected")){var o=m.a.get(a,"app.OADAManager.currentConnection");t=m.a.get(a,"app.oada.".concat(o,".bookmarks.seasons.2019.operations.").concat(n,".fields"))||[]}else t=m.a.get(a,"app.localData.abc123.seasons.2019.operations.".concat(n,".fields"))||[];return t},currentOADA:function(e,a){if(Object(E.a)(e),a.app.OADAManager.connected){var n=a.app.OADAManager.currentConnection;if(!n)return;return a.app.oada[n]}},oadaOrgData:function(e){var a=e.currentOADA;if(a)return a.bookmarks},oadaSeasonFarmsIdBy_id:function(e,a){var n=e.oadaOrgData;return m.a.chain(n).get("seasons.2019.farms").mapValues((function(e,a){return{_id:e._id,id:a}})).mapKeys((function(e,a){return e._id})).value()},localOrgData:function(e){return e.localData.abc123},localData:{organizations:{abc123:{name:"Default"}},abc123:{fields:{fields:Object(w.a)({},Ae),farms:Object(w.a)({},Ee)},seasons:{2019:{fields:Object(w.a)({},Ae),farms:Object(w.a)({},Ee),operations:{}}}}}},Fe={getSeasonField:function(e,a){var n=e.state,t=[];if(1==m.a.get(n,"app.OADAManager.connected")){var o=m.a.get(n,"app.OADAManager.currentConnection");t=m.a.get(n,"app.oada.".concat(o,".bookmarks.seasons.2019.fields"))}else t=m.a.get(n,"app.localData.abc123.seasons.2019.fields");return t[a]},getSeasonFarm:function(e,a){var n=e.state,t=[];if(1==m.a.get(n,"app.OADAManager.connected")){var o=m.a.get(n,"app.OADAManager.currentConnection");t=m.a.get(n,"app.oada.".concat(o,".bookmarks.seasons.2019.farms"))}else t=m.a.get(n,"app.localData.abc123.seasons.2019.farms");return t[a]}},xe={connected:!1,currentConnection:null,domain:null,token:null,user:function(e,a){return e.currentConnection?m.a.get(a,"app.oada.localhost.users.me"):null}},Ce=n(526),Se=Z.a.promisify(Ce.browser.getAccessToken),je=xe,Ie={getToken:function(e,a){return Object(k.a)(O.a.mark((function n(){var t,o,r;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.state,!(o=t.app.OADAManager).token){n.next=4;break}return n.abrupt("return",o.token);case 4:return n.next=6,Se(a.replace(/^https?:\/\//,""),{metadata:h.METADATA,scope:h.SCOPE,redirect:h.REDIRECT});case 6:return r=n.sent,n.abrupt("return",r.access_token);case 8:case"end":return n.stop()}}),n)})))()},connect:function(e,a){return Object(k.a)(O.a.mark((function n(){var t,o,r,i,c,s;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.actions,o=e.state,e.effects,r=a.domain,i=a.token,c=o.app.OADAManager,s=t.app.OADAManager,i&&(c.token=i),n.next=7,s.getToken(r);case 7:return i=n.sent,n.abrupt("return",t.app.oada.connect({token:i,domain:r,options:h.OPTIONS}).then((function(e){return e.error||(c.currentConnection=e.connectionId,c.token=e.token,c.connected=!0,o.view.TopBar.OperationDropdown.selected=null),e})));case 9:case"end":return n.stop()}}),n)})))()},logout:function(e){return Object(k.a)(O.a.mark((function a(){var n,t,o,r;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.actions,t=e.state,o=t.app.OADAManager,r=o.currentConnection,a.next=5,n.app.oada.disconnect({connection_id:r});case 5:case"end":return a.stop()}}),a)})))()},getUserInfo:function(e){return Object(k.a)(O.a.mark((function a(){var n,t,o,r,i;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.actions,t=e.state,o=t.app.OADAManager,r=o.currentConnection,i=[{path:"/users/me"}],a.next=6,n.app.oada.get({requests:i,connection_id:r});case 6:case"end":return a.stop()}}),a)})))()},fetchAndWatch:function(e){return Object(k.a)(O.a.mark((function a(){var n,t,o,r,i,c,s,l,d;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.actions,t=e.state,o=t.app.OADAManager,r=o.currentConnection,i=[{path:"/bookmarks/fields",tree:j,watch:{actions:[n.app.OADAManager.onFieldChanged]}},{path:"/bookmarks/seasons",tree:j,watch:{actions:[n.app.OADAManager.onSeasonsChanged]}}],a.next=6,n.app.oada.get({requests:i,connection_id:r});case 6:if(c=a.sent,s=[],!c.responses[0].error){a.next=15;break}if(404==c.responses[0].status){a.next=11;break}throw c.responses[0].error;case 11:return l=[{tree:j,data:{fields:{},farms:{}},path:"/bookmarks/fields"}],a.next=14,n.app.oada.put({requests:l,connection_id:r});case 14:s.push(i[0]);case 15:if(!c.responses[1].error){a.next=22;break}if(404==c.responses[1].status){a.next=18;break}throw c.responses[0].error;case 18:return d=[{tree:j,data:{},path:"/bookmarks/seasons"}],a.next=21,n.app.oada.put({requests:d,connection_id:r});case 21:s.push(i[1]);case 22:if(!(s.length>0)){a.next=25;break}return a.next=25,n.app.oada.get({requests:s,connection_id:r});case 25:case"end":return a.stop()}}),a)})))()},initSeasonFields:function(e){var a=e.state,n=e.actions.app.OADAManager,t=[];return m.a.forEach(m.a.get(a,"app.oadaOrgData.fields.fields"),(function(e,a){m.a.startsWith(a,"_")||t.push({fieldId:a,name:e.name,boundary:e.boundary})})),n.changeSeasonFields(t)},initSeasonFarms:function(e){var a=e.state,n=e.actions.app.OADAManager,t=[];return m.a.forEach(m.a.get(a,"app.oadaOrgData.fields.farms"),(function(e,a){m.a.startsWith(a,"_")||t.push({id:a,name:e.name})})),n.changeSeasonFarms(t)},changeSeasonFields:function(e,a){return Object(k.a)(O.a.mark((function n(){var t,o,r,i,c,s;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.state,o=e.actions,console.log("change season fields",a),r=t.app.OADAManager,i=r.currentConnection,c=[],s=t.app.seasonFields,m.a.forEach(a,(function(e){var a={},n=s[e.fieldId];e.name&&(null!=n&&n.name==e.name||(a.name=e.name)),e.boundary&&(null!=n&&0!=m.a.isEqual(n.boundary,e.boundary)||(a.boundary=e.boundary)),m.a.isEmpty(a)||(a.id=e.fieldId,c.push({tree:j,data:a,type:"application/vnd.oada.field.1+json",path:"/bookmarks/seasons/2019/fields/".concat(e.fieldId)}))})),0!=c.length){n.next=9;break}return n.abrupt("return");case 9:return n.next=11,o.app.oada.put({requests:c,connection_id:i});case 11:case"end":return n.stop()}}),n)})))()},changeSeasonFarms:function(e,a){return Object(k.a)(O.a.mark((function n(){var t,o,r,i,c,s;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.state,o=e.actions,console.log("change season farms",a),r=t.app.OADAManager,i=r.currentConnection,c=[],s=t.app.seasonFarms,m.a.forEach(a,(function(e){var a={},n=s[e.id];e.name&&(null!=n&&n.name==e.name||(a.name=e.name)),m.a.isEmpty(a)||(a.id=e.id,c.push({tree:j,data:a,type:"application/vnd.oada.farm.1+json",path:"/bookmarks/seasons/2019/farms/".concat(a.id)}))})),0!=c.length){n.next=9;break}return n.abrupt("return");case 9:return n.next=11,o.app.oada.put({requests:c,connection_id:i});case 11:case"end":return n.stop()}}),n)})))()},deleteSeasonFields:function(e,a){return Object(k.a)(O.a.mark((function n(){var t,o,r,i,c,s;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.state,o=e.actions,console.log("delete season fields",a),r=t.app.OADAManager,i=r.currentConnection,c=[],s=t.app.seasonFields,m.a.forEach(a,(function(e){s[e]&&c.push({tree:j,type:"application/vnd.oada.field.1+json",path:"/bookmarks/seasons/2019/fields/".concat(e)})})),0!=c.length){n.next=9;break}return n.abrupt("return");case 9:return n.next=11,o.app.oada.delete({requests:c,connection_id:i});case 11:case"end":return n.stop()}}),n)})))()},deleteSeasonFarms:function(e,a){return Object(k.a)(O.a.mark((function n(){var t,o,r,i,c,s;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.state,o=e.actions,console.log("delete season farms",a),r=t.app.OADAManager,i=r.currentConnection,c=[],s=t.app.seasonFarms,m.a.forEach(a,(function(e){s[e]&&c.push({tree:j,type:"application/vnd.oada.farm.1+json",path:"/bookmarks/seasons/2019/farms/".concat(e)})})),0!=c.length){n.next=9;break}return n.abrupt("return");case 9:return n.next=11,o.app.oada.delete({requests:c,connection_id:i});case 11:case"end":return n.stop()}}),n)})))()},login:function(e,a){return Object(k.a)(O.a.mark((function n(){var t,o,r,i,c,s,l;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.actions,o=e.state,r=a.domain,i=a.token,c=o.app.OADAManager,s=t.app.OADAManager,c.domain=r,n.next=7,s.connect({domain:r,token:i});case 7:if(l=n.sent,l.error){n.next=18;break}return n.next=12,s.getUserInfo();case 12:return n.next=14,s.fetchAndWatch();case 14:return n.next=16,s.initSeasonFarms();case 16:return n.next=18,s.initSeasonFields();case 18:case"end":return n.stop()}}),n)})))()},onFieldChanged:function(e,a){return Object(k.a)(O.a.mark((function n(){var t,o,r,i,c,s,l,d,u;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.state,t=e.actions,console.log("onFieldChanged",a),o=t.app.OADAManager,"merge"==(r=m.a.get(a,"response.change.type"))||"delete"==r?(i=!1,c=m.a.get(a,"response.change.wasDelete"),("deleted"==r||c)&&(i=!0),s=[],l=[],m.a.forEach(m.a.get(a,"response.change.body.data.fields"),(function(e,a){i?l.push(a):s.push({fieldId:a,deleted:i,name:m.a.get(e,"name"),boundary:m.a.get(e,"boundary")})})),l.length>0&&o.deleteSeasonFields(l),s.length>0&&o.changeSeasonFields(s),d=[],u=[],m.a.forEach(m.a.get(a,"response.change.body.data.farms"),(function(e,a){i?u.push(a):d.push({farmId:a,deleted:i,name:m.a.get(e,"name")})})),u.length>0&&o.deleteSeasonFarms(u),d.length>0&&o.changeSeasonFarms(d)):console.warn("onFieldChanged: Unsupported change type:",r);case 5:case"end":return n.stop()}}),n)})))()},onSeasonsChanged:function(e,a){e.state,e.actions}},Ne=n(527),Be=n.n(Ne)()("app.oada"),Te=Object(w.a)({oada:Be.state,OADAManager:je},Me),_e=Object(w.a)({oada:Be.actions,OADAManager:Ie},Fe),Re={oada:Be.effects},Ze=Object(v.a)({view:t,app:o}),Le=Object(g.b)(),We=n(1077),Ve=n(1057),Ge=n(1015);function ze(){var e=Object(u.a)(["\n        position: absolute;\n        top: 10px;\n        right: 10px;\n        font-size: 1.2em;\n        color: #FFFFFF;\n        cursor: pointer;\n      "]);return ze=function(){return e},e}function Pe(){var e=Object(u.a)(["\n          display: flex;\n          flex-direction: column;\n        "]);return Pe=function(){return e},e}function He(){var e=Object(u.a)(["\n        width: 400px;\n        display: flex;\n        flex-direction: column;\n        background: #fff;\n        padding: 15px;\n        padding-top: 7px;\n        border-radius: 5px;\n      "]);return He=function(){return e},e}function Ye(){var e=Object(u.a)(["\n      height: 100vh;\n      width: 100vw;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      background: url(imgs/login-background.jpg) no-repeat center center fixed;\n      background-size: cover;\n    "]);return Ye=function(){return e},e}var Xe=function(){var e=Le(),a=e.state,n=e.actions,t=a.view.Login,o=n.view.Login;return Object(p.b)("div",{css:Object(p.a)(Ye())},Object(p.b)("div",{css:Object(p.a)(He())},Object(p.b)("img",{css:{height:300},src:"imgs/logo2.svg",alt:"logo"}),Object(p.b)(We.a,{css:Object(p.a)(Pe()),onSubmit:o.login},Object(p.b)(Ve.a,{placeholder:"OADA Domain...",value:t.domain,onChange:function(e,a){return o.domainChange(a)}}),Object(p.b)(Ge.a,{style:{marginTop:7},primary:!0,loading:t.loading,disabled:t.loading},"Connect to Your OADA Cloud"),Object(p.b)(Ge.a,{style:{marginTop:7},onClick:o.viewDemo,disabled:t.loading},"View Demo"))),Object(p.b)("a",{css:Object(p.a)(ze()),onClick:o.logout},"Logout"))},qe=n(1085),Ue=n(1086),Je=(n(951),n(1058)),Qe=n(1059),Ke=n(1060);function $e(){var e=Le(),a=e.state,n=e.actions,t=a.view.Map.BoundaryDrawing,o=n.view.Map.BoundaryDrawing,r=t.boundary,c=t.drawing,s=o.onMarkerMove;return c?i.a.createElement(Je.a,null,i.a.createElement(Qe.a,{positions:m.a.map(r)}),m.a.map(r,(function(e,a){return i.a.createElement(Ke.a,{position:e,key:a,draggable:!0,onMove:function(e){var n=e.latlng,t=e.oldLatLng;return s({latlng:n,oldLatLng:t,id:a})}})}))):null}var ea=n(1061);function aa(){var e=Le(),a=e.state,n=e.actions,t=a.view.Map,o=n.view.Map,r=t.fields,c=o.onFieldClick;return 0==m.a.keys(r).length?null:i.a.createElement(Je.a,null,m.a.map(r,(function(e,a){return i.a.createElement(ea.a,{bubblingMouseEvents:!1,style:e.style,data:e.boundary,key:S()(),onClick:function(e){c({id:a})}})})))}function na(){var e=Le(),a=e.actions,n=(e.state,a.view.Map);return i.a.createElement(qe.a,{center:[41.448068,-84.972648],zoom:13,onClick:function(e){return n.onMapClick(Object(w.a)({},e.latlng))},zoomControl:!1},i.a.createElement(Ue.a,{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles \xa9 Esri \u2014 Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}),i.a.createElement($e,null),i.a.createElement(aa,null))}var ta=n(1070),oa=n(1065),ra=n(1062),ia=n(1066);function ca(){var e=Le().actions.view.TopBar;return i.a.createElement(ra.a,null,i.a.createElement(oa.a,{style:{flex:1}}),i.a.createElement(ia.a,{color:"inherit",onClick:function(){return e.onCancelField()}},"Cancel"),i.a.createElement(ia.a,{color:"inherit",onClick:function(){return e.onSaveField()}},"Save"))}var sa=n(1081);function la(e){var a=e.style,n=Le(),t=n.actions,o=n.state,r=t.view.TopBar.OperationDropdown,c=o.view.TopBar.OperationDropdown,s=c.selectedOperation,l=c.list,d=c.open,u=c.search,p=r.onAdd,f=r.onChange,g=r.onOpenChange,v=r.onSearch;return i.a.createElement(oa.a,{style:a},i.a.createElement(oa.a,{style:{flexDirection:"row"}},s?i.a.createElement(sa.a,{open:d,onOpen:function(){g({open:!0})},onBlur:function(){g({open:!1})},text:s.name,icon:"cog",floating:!0,labeled:!0,button:!0,className:"icon"},i.a.createElement(sa.a.Menu,{style:{top:42}},i.a.createElement(sa.a.Item,{style:{textAlign:"center"},text:"Add New Operation",value:"Add New Operation",onClick:function(e,a){p()}}),i.a.createElement(Ve.a,{icon:"search",iconPosition:"left",className:"search",style:{marginTop:3},value:u,onChange:function(e){v({search:e.target.value})}}),i.a.createElement(sa.a.Menu,{scrolling:!0},m.a.map(l,(function(e){return i.a.createElement(sa.a.Item,Object.assign({key:e.value},e,{onClick:function(e,a){f({id:a.value})}}))}))))):i.a.createElement(sa.a,{onClick:function(){p()},open:!1,text:"Add New Operation",icon:"cog",floating:!0,labeled:!0,button:!0,className:"icon"}),i.a.createElement(oa.a,{style:{flex:1}})))}var da=n(148),ua=n(1067),pa=n(557),fa=n.n(pa),ma=n(1084),ga=n(1069);function va(e){var a=e.style,n=Le(),t=n.actions,o=n.state,r=t.view.TopBar,c=i.a.useState(null),s=Object(da.a)(c,2),l=s[0],d=s[1];function u(){d(null)}return i.a.createElement(oa.a,{style:a},i.a.createElement(ua.a,{edge:"end",color:"inherit","aria-label":"Menu",onClick:function(e){d(e.currentTarget)}},i.a.createElement(fa.a,null)),i.a.createElement(ma.a,{style:{top:50,right:5},open:Boolean(l),keepMounted:!0,anchorEl:l,onClose:u},i.a.createElement(ga.a,{onClick:function(){u(),r.onAddField()}},"Add Field"),o.view.FieldDetails.open?i.a.createElement(ga.a,{onClick:function(){u(),r.onEditField()}},"Edit Field"):null,i.a.createElement(ga.a,{onClick:function(){u(),r.onLogout()}},"Logout")))}function wa(e){e.toggleTitle;return i.a.createElement(ra.a,null,i.a.createElement(la,{style:{flex:1}}),i.a.createElement(va,null))}function ha(){var e=Le().state.view.Map.BoundaryDrawing.drawing;return i.a.createElement(oa.a,{style:{zIndex:1201}},i.a.createElement(ta.a,{position:"static"},e?i.a.createElement(ca,null):i.a.createElement(wa,null)))}var ba=n(1083),ya=n(1068),Oa=n(1073),ka=n(1014),Da=n(1071),Aa=n(1072),Ea=n(338),Ma=n.n(Ea),Fa=n(339),xa=n.n(Fa);function Ca(){return i.a.createElement(ba.a,{open:!1,variant:"persistent"},i.a.createElement(oa.a,{style:{height:64}}),i.a.createElement("div",{style:{width:250},role:"presentation"},i.a.createElement(ya.a,null,["Inbox","Starred","Send email"].map((function(e,a){return i.a.createElement(ka.a,{button:!0,key:e},i.a.createElement(Da.a,null,a%2===0?i.a.createElement(Ma.a,null):i.a.createElement(xa.a,null)),i.a.createElement(Aa.a,{primary:e}))}))),i.a.createElement(Oa.a,null),i.a.createElement(ya.a,null,["All mail","Trash","Spam"].map((function(e,a){return i.a.createElement(ka.a,{button:!0,key:e},i.a.createElement(Da.a,null,a%2===0?i.a.createElement(Ma.a,null):i.a.createElement(xa.a,null)),i.a.createElement(Aa.a,{primary:e}))})))))}var Sa=n(1079),ja=n(1075),Ia=n(1076),Na=n(1087),Ba=n(1074);function Ta(){var e=Le(),a=e.state,n=e.actions,t=a.view.FieldDetails,o=n.view.FieldDetails,r=t.open,c=t.field,s=t.farm,l=o.onStatusChange;o.onEditFieldClick;return Boolean(c)||(r=!1,c={}),i.a.createElement(ba.a,{anchor:"bottom",open:r,variant:"persistent"},i.a.createElement(oa.a,{style:{paddingBottom:20}},i.a.createElement(oa.a,{style:{flexDirection:"column",alignItems:"center"}},i.a.createElement(oa.a,{style:{justifyContent:"left",flexDirection:"row",alignItems:"center",marginTop:10}},i.a.createElement(Ba.a,{style:{fontWeight:"bold",fontSize:20}},c.name),i.a.createElement(Ba.a,{style:{marginLeft:7,fontSize:18}},"- ".concat(Math.round(c.acres)," ac"))),null==s?null:i.a.createElement(Ba.a,{style:{fontSize:15,color:"#999",marginTop:2,marginBottom:7}},s.name)),i.a.createElement(oa.a,{style:{justifyContent:"center",flexDirection:"row"}},i.a.createElement(Na.a,{component:"fieldset"},i.a.createElement(ja.a,{"aria-label":"position",name:"position",row:!0},i.a.createElement(Ia.a,{value:"bottom",control:i.a.createElement(Sa.a,{color:"primary",checked:"planned"==c.status||!1,onChange:function(){l({status:"planned"})}}),label:"Planned",labelPlacement:"bottom"}),i.a.createElement(Ia.a,{value:"bottom",control:i.a.createElement(Sa.a,{color:"primary",checked:"started"==c.status||!1,onChange:function(){l({status:"started"})}}),label:"Started",labelPlacement:"bottom"}),i.a.createElement(Ia.a,{value:"bottom",control:i.a.createElement(Sa.a,{color:"primary",checked:"done"==c.status||!1,onChange:function(){l({status:"done"})}}),label:"Done",labelPlacement:"bottom"}))))))}function _a(e){var a=e.acresStatus;return i.a.createElement(oa.a,{style:{backgroundColor:"#c50003",paddingLeft:7,paddingRight:7,paddingTop:5,paddingBottom:5,borderRadius:5}},i.a.createElement(Ba.a,{style:{color:"white",textShadowColor:"#000",textShadowOffset:{width:1,height:1},textShadowRadius:2}},"".concat(a.planned," ac (").concat(a.plannedPercentage,"%)")))}function Ra(e){var a=e.acresStatus;return i.a.createElement(oa.a,{style:{backgroundColor:"#eeb705",paddingLeft:7,paddingRight:7,paddingTop:5,paddingBottom:5,borderRadius:5,marginRight:7,marginLeft:7}},i.a.createElement(Ba.a,{style:{color:"white",textShadowColor:"#000",textShadowOffset:{width:1,height:1},textShadowRadius:2}},"".concat(a.started," ac (").concat(a.startedPercentage,"%)")))}function Za(e){var a=e.acresStatus;return i.a.createElement(oa.a,{style:{backgroundColor:"#5bb25f",paddingLeft:7,paddingRight:7,paddingTop:5,paddingBottom:5,borderRadius:5}},i.a.createElement(Ba.a,{style:{color:"white",textShadowColor:"#000",textShadowOffset:{width:1,height:1},textShadowRadius:2}},"".concat(a.done," ac (").concat(a.donePercentage,"%)")))}function La(){var e=Le().state,a=e.app.acresStatus;return e.view.TopBar.OperationDropdown.selectedOperationId?i.a.createElement(oa.a,{style:{position:"absolute",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",top:68,zIndex:401,width:"100vw"}},i.a.createElement(_a,{acresStatus:a}),i.a.createElement(Ra,{acresStatus:a}),i.a.createElement(Za,{acresStatus:a})):null}var Wa=n(1078),Va=n(128);function Ga(){var e=Le(),a=e.state,n=e.actions,t=a.view.Modals.SaveField,o=n.view.Modals.SaveField,r=(t.open,t.name),c=o.onNameChange,s=o.onCancel,l=o.onSave,d=i.a.useState(!1),u=Object(da.a)(d,2),p=u[0],f=u[1],m=t.farm||{},g=t.farms;return i.a.createElement(Wa.a,{open:t.open,size:"tiny"},i.a.createElement(Wa.a.Header,null,a.view.Map.editingField?"Edit Field":"New Field"),i.a.createElement(Wa.a.Content,null,i.a.createElement(oa.a,{style:{flexDirection:"column",zIndex:1}},i.a.createElement(Ba.a,{style:{marginBottom:7}},"Field Name:"),i.a.createElement(We.a,{onSubmit:function(){return l()}},i.a.createElement(Ve.a,{autoFocus:!0,placeholder:"Back 40",value:r,onChange:function(e){c({name:e.target.value})}})),i.a.createElement(Ba.a,{style:{marginBottom:7,marginTop:15}},"Farm:"),i.a.createElement(sa.a,{trigger:i.a.createElement(oa.a,{style:{paddingLeft:13,paddingRight:7,border:"1px solid rgba(34,36,38,.15)",borderRadius:".28571429rem",height:38,flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},i.a.createElement(Ba.a,{style:{color:m.name?"rgba(0,0,0,.87)":"rgba(0,0,0,.25)"}},m.name||"Select a farm"),i.a.createElement(Va.a,{name:"caret down",style:{paddingBottom:17}})),icon:null,onOpen:function(){f(!0)},onBlur:function(){f(!1)},open:p},i.a.createElement(sa.a.Menu,{style:{overflow:"hidden",maxHeight:"50vh"}},i.a.createElement(sa.a.Item,{style:{textAlign:"center"},text:"Add New Farm",value:"Add New Farm",onClick:function(e,a){o.onFarmAdd(),f(!1)}}),i.a.createElement(Ve.a,{icon:"search",iconPosition:"left",className:"search",value:t.farmSearch,onChange:function(e){o.onFarmSearchChange(e.target.value)}}),i.a.createElement(sa.a.Menu,{scrolling:!0},g.map((function(e){return i.a.createElement(sa.a.Item,Object.assign({key:e.value},e,{onClick:function(){o.onFarmChange({id:e.value}),f(!1)}}))}))))))),i.a.createElement(Wa.a.Actions,null,i.a.createElement(Ge.a,{negative:!0,onClick:function(){return s()}},"Cancel"),i.a.createElement(Ge.a,{positive:!0,icon:"checkmark",labelPosition:"right",content:"Save",onClick:function(){return l()}})))}function za(){var e=Le(),a=e.state,n=e.actions,t=a.view.Modals.OADADomain,o=n.view.Modals.OADADomain,r=t.open,c=t.domain,s=o.onDomainChange,l=o.onCancel,d=o.onConnect;return i.a.createElement(Wa.a,{open:r,size:"tiny"},i.a.createElement(Wa.a.Header,null,"Connect to OADA Server"),i.a.createElement(Wa.a.Content,null,i.a.createElement(Ba.a,null,"Domain:"),i.a.createElement(oa.a,{style:{flexDirection:"row"}},i.a.createElement(Ve.a,{style:{flex:1,marginTop:7},placeholder:"https://oada.openatk.com",value:c,onChange:function(e){s({domain:e.target.value})}}))),i.a.createElement(Wa.a.Actions,null,i.a.createElement(Ge.a,{negative:!0,onClick:function(){return l()}},"Cancel"),i.a.createElement(Ge.a,{positive:!0,icon:"checkmark",labelPosition:"right",content:"Connect",onClick:function(){return d({})}})))}function Pa(){var e=Le(),a=e.state,n=e.actions,t=a.view.Modals.NewOperation,o=n.view.Modals.NewOperation,r=t.open,c=t.name,s=o.onNameChange,l=o.onCancel,d=o.onSave;return i.a.createElement(Wa.a,{open:r,size:"tiny"},i.a.createElement(Wa.a.Header,null,"New Operation"),i.a.createElement(Wa.a.Content,null,i.a.createElement(Ba.a,null,"Name:"),i.a.createElement(oa.a,{style:{flexDirection:"row"}},i.a.createElement(We.a,{style:{flex:1},onSubmit:d},i.a.createElement(Ve.a,{autoFocus:!0,style:{width:"100%",marginTop:7},placeholder:"Corn Planting",value:c,onChange:function(e){s({name:e.target.value})}})))),i.a.createElement(Wa.a.Actions,null,i.a.createElement(Ge.a,{negative:!0,onClick:function(){return l()}},"Cancel"),i.a.createElement(Ge.a,{positive:!0,icon:"checkmark",labelPosition:"right",content:"Save",onClick:function(){return d()}})))}function Ha(){var e=Le(),a=e.state,n=e.actions,t=a.view.Modals.NewFarm,o=n.view.Modals.NewFarm,r=t.open,c=t.name,s=o.onNameChange,l=o.onCancel,d=o.onSave;return i.a.createElement(Wa.a,{open:r,size:"tiny"},i.a.createElement(Wa.a.Header,null,"New Farm"),i.a.createElement(Wa.a.Content,null,i.a.createElement(Ba.a,null,"Name:"),i.a.createElement(oa.a,{style:{flexDirection:"row"}},i.a.createElement(Ve.a,{style:{flex:1,marginTop:7},placeholder:"Bowman Farms",value:c,onChange:function(e){s({name:e.target.value})}}))),i.a.createElement(Wa.a.Actions,null,i.a.createElement(Ge.a,{negative:!0,onClick:function(){return l()}},"Cancel"),i.a.createElement(Ge.a,{positive:!0,icon:"checkmark",labelPosition:"right",content:"Save",onClick:function(){return d()}})))}var Ya=function(){return Le().state.view.Login.loggedIn?i.a.createElement("div",{className:"App"},i.a.createElement(ha,null),i.a.createElement(La,null),i.a.createElement(na,null),i.a.createElement(Ca,null),i.a.createElement(Ta,null),i.a.createElement(Ga,null),i.a.createElement(za,null),i.a.createElement(Pa,null),i.a.createElement(Ha,null)):i.a.createElement(Xe,null)},Xa=Object(W.c)(Ze,{devtools:!0});s.a.render(i.a.createElement(g.a,{value:Xa},i.a.createElement(Ya,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},278:function(e,a){},585:function(e,a,n){e.exports=n(1011)},590:function(e,a,n){},591:function(e,a,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},592:function(e,a,n){},605:function(e,a){},607:function(e,a){},640:function(e,a){},641:function(e,a){},711:function(e,a){},951:function(e,a,n){}},[[585,1,2]]]);
//# sourceMappingURL=main.ba4c416a.chunk.js.map