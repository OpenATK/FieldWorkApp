(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1004:function(e,t){},1007:function(e,t){},1027:function(e,t){},1030:function(e,t){},1046:function(e,t){},1049:function(e,t){},1090:function(e,t,n){"use strict";n.r(t);var r=Object({NODE_ENV:"production",PUBLIC_URL:"/FieldWorkApp"}).REACT_APP_OADA_DOMAIN||"https://yield.oada-dev.com",a="http://localhost:"+parseInt(window.location.port,10),o=n(1091);t.default={oadaDomain:r,devtoolsPort:8787,websiteDomain:a,metadata:o,defaultNewConnectionURL:"https://localhost",appName:"FieldWorkApp",contentType:"application/vnd.oada.yield.1+json",bookmarksOperations:"/bookmarks/operations",bookmarksFields:"/bookmarks/fields"}},1091:function(e,t){e.exports="eyJqa3UiOiJodHRwczovL2lkZW50aXR5Lm9hZGEtZGV2LmNvbS9jZXJ0cyIsImtpZCI6ImtqY1NjamMzMmR3SlhYTEpEczNyMTI0c2ExIiwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYifQ.eyJyZWRpcmVjdF91cmlzIjpbImh0dHA6Ly92aXAzLmVjbi5wdXJkdWUuZWR1OjgwMDAvb2F1dGgyL3JlZGlyZWN0Lmh0bWwiLCJodHRwOi8vbG9jYWxob3N0OjgwMDAvb2F1dGgyL3JlZGlyZWN0Lmh0bWwiXSwidG9rZW5fZW5kcG9pbnRfYXV0aF9tZXRob2QiOiJ1cm46aWV0ZjpwYXJhbXM6b2F1dGg6Y2xpZW50LWFzc2VydGlvbi10eXBlOmp3dC1iZWFyZXIiLCJncmFudF90eXBlcyI6WyJpbXBsaWNpdCJdLCJyZXNwb25zZV90eXBlcyI6WyJ0b2tlbiIsImlkX3Rva2VuIiwiaWRfdG9rZW4gdG9rZW4iXSwiY2xpZW50X25hbWUiOiJPcGVuQVRLIiwiY2xpZW50X3VyaSI6Imh0dHBzOi8vdmlwMy5lY24ucHVyZHVlLmVkdSIsImNvbnRhY3RzIjpbIlNhbSBOb2VsIDxzYW5vZWxAcHVyZHVlLmVkdT4iXSwic29mdHdhcmVfaWQiOiIxZjc4NDc3Zi0zNTQxLTQxM2ItOTdiNi04NjQ0YjRhZjViYjgiLCJyZWdpc3RyYXRpb25fcHJvdmlkZXIiOiJodHRwczovL2lkZW50aXR5Lm9hZGEtZGV2LmNvbSIsImlhdCI6MTUxMjAwNjc2MX0.AJSjNlWX8UKfVh-h1ebCe0MEGqKzArNJ6x0nmta0oFMcWMyR6Cn2saR-oHvU8WrtUMEr-w020mAjvhfYav4EdT3GOGtaFgnbVkIs73iIMtr8Z-Y6mDEzqRzNzVRMLghj7CyWRCNJEk0jwWjOuC8FH4UsfHmtw3ouMFomjwsNLY0"},1092:function(e,t,n){"use strict";n.r(t);var r=Object({NODE_ENV:"production",PUBLIC_URL:"/FieldWorkApp"}).REACT_APP_OADA_DOMAIN||"https://yield.oada-dev.com",a=n(1093);t.default={oadaDomain:r,devtoolsPort:8787,websiteDomain:"https://fieldworkapp.oada-dev.com:8080",metadata:a,defaultNewConnectionURL:"https://fieldworkapp.oada-dev.com"}},1093:function(e,t){e.exports="eyJqa3UiOiJodHRwczovL2lkZW50aXR5Lm9hZGEtZGV2LmNvbS9jZXJ0cyIsImtpZCI6ImtqY1NjamMzMmR3SlhYTEpEczNyMTI0c2ExIiwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYifQ.eyJyZWRpcmVjdF91cmlzIjpbImh0dHA6Ly92aXAzLmVjbi5wdXJkdWUuZWR1OjgwMDAvb2F1dGgyL3JlZGlyZWN0Lmh0bWwiLCJodHRwOi8vbG9jYWxob3N0OjgwMDAvb2F1dGgyL3JlZGlyZWN0Lmh0bWwiXSwidG9rZW5fZW5kcG9pbnRfYXV0aF9tZXRob2QiOiJ1cm46aWV0ZjpwYXJhbXM6b2F1dGg6Y2xpZW50LWFzc2VydGlvbi10eXBlOmp3dC1iZWFyZXIiLCJncmFudF90eXBlcyI6WyJpbXBsaWNpdCJdLCJyZXNwb25zZV90eXBlcyI6WyJ0b2tlbiIsImlkX3Rva2VuIiwiaWRfdG9rZW4gdG9rZW4iXSwiY2xpZW50X25hbWUiOiJPcGVuQVRLIiwiY2xpZW50X3VyaSI6Imh0dHBzOi8vdmlwMy5lY24ucHVyZHVlLmVkdSIsImNvbnRhY3RzIjpbIlNhbSBOb2VsIDxzYW5vZWxAcHVyZHVlLmVkdT4iXSwic29mdHdhcmVfaWQiOiIxZjc4NDc3Zi0zNTQxLTQxM2ItOTdiNi04NjQ0YjRhZjViYjgiLCJyZWdpc3RyYXRpb25fcHJvdmlkZXIiOiJodHRwczovL2lkZW50aXR5Lm9hZGEtZGV2LmNvbSIsImlhdCI6MTUxMjAwNjc2MX0.AJSjNlWX8UKfVh-h1ebCe0MEGqKzArNJ6x0nmta0oFMcWMyR6Cn2saR-oHvU8WrtUMEr-w020mAjvhfYav4EdT3GOGtaFgnbVkIs73iIMtr8Z-Y6mDEzqRzNzVRMLghj7CyWRCNJEk0jwWjOuC8FH4UsfHmtw3ouMFomjwsNLY0"},1094:function(e,t,n){"use strict";n.r(t);var r=Object({NODE_ENV:"production",PUBLIC_URL:"/FieldWorkApp"}).REACT_APP_OADA_DOMAIN||"https://yield.oada-dev.com",a=n(1095);t.default={oadaDomain:r,devtoolsPort:8787,websiteDomain:"https://fieldworkapp.oada-dev.com",metadata:a,defaultNewConnectionURL:"https://fieldworkapp.oada-dev.com",appName:"FieldWorkApp",contentType:"application/vnd.oada.yield.1+json",bookmarksOperations:"/bookmarks/operations",bookmarksFields:"/bookmarks/fields"}},1095:function(e,t){e.exports="eyJqa3UiOiJodHRwczovL2lkZW50aXR5Lm9hZGEtZGV2LmNvbS9jZXJ0cyIsImtpZCI6ImtqY1NjamMzMmR3SlhYTEpEczNyMTI0c2ExIiwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYifQ.eyJyZWRpcmVjdF91cmlzIjpbImh0dHA6Ly92aXAzLmVjbi5wdXJkdWUuZWR1OjgwMDAvb2F1dGgyL3JlZGlyZWN0Lmh0bWwiLCJodHRwOi8vbG9jYWxob3N0OjgwMDAvb2F1dGgyL3JlZGlyZWN0Lmh0bWwiXSwidG9rZW5fZW5kcG9pbnRfYXV0aF9tZXRob2QiOiJ1cm46aWV0ZjpwYXJhbXM6b2F1dGg6Y2xpZW50LWFzc2VydGlvbi10eXBlOmp3dC1iZWFyZXIiLCJncmFudF90eXBlcyI6WyJpbXBsaWNpdCJdLCJyZXNwb25zZV90eXBlcyI6WyJ0b2tlbiIsImlkX3Rva2VuIiwiaWRfdG9rZW4gdG9rZW4iXSwiY2xpZW50X25hbWUiOiJPcGVuQVRLIiwiY2xpZW50X3VyaSI6Imh0dHBzOi8vdmlwMy5lY24ucHVyZHVlLmVkdSIsImNvbnRhY3RzIjpbIlNhbSBOb2VsIDxzYW5vZWxAcHVyZHVlLmVkdT4iXSwic29mdHdhcmVfaWQiOiIxZjc4NDc3Zi0zNTQxLTQxM2ItOTdiNi04NjQ0YjRhZjViYjgiLCJyZWdpc3RyYXRpb25fcHJvdmlkZXIiOiJodHRwczovL2lkZW50aXR5Lm9hZGEtZGV2LmNvbSIsImlhdCI6MTUxMjAwNjc2MX0.AJSjNlWX8UKfVh-h1ebCe0MEGqKzArNJ6x0nmta0oFMcWMyR6Cn2saR-oHvU8WrtUMEr-w020mAjvhfYav4EdT3GOGtaFgnbVkIs73iIMtr8Z-Y6mDEzqRzNzVRMLghj7CyWRCNJEk0jwWjOuC8FH4UsfHmtw3ouMFomjwsNLY0"},1108:function(e,t,n){},1110:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"statsBarHandleUpdate",function(){return $a});var a={};n.r(a),n.d(a,"loadData",function(){return Go}),n.d(a,"handleCollapse",function(){return Xo}),n.d(a,"handleChronologyCollapse",function(){return Yo});var o={};n.r(o),n.d(o,"addFieldClicked",function(){return Ji}),n.d(o,"handleFieldPolygonClicked",function(){return zi}),n.d(o,"mapOadaToFields",function(){return Hi}),n.d(o,"mapOadaToFarms",function(){return Pi}),n.d(o,"putFarm",function(){return qi}),n.d(o,"disableNewFieldButton",function(){return Qi}),n.d(o,"putField",function(){return Ki}),n.d(o,"handleFieldSelected",function(){return $i}),n.d(o,"handleFarmSelected",function(){return ec}),n.d(o,"saveEditedField",function(){return tc}),n.d(o,"setCurrentField",function(){return nc}),n.d(o,"addNewFarm",function(){return ac}),n.d(o,"addNewField",function(){return oc}),n.d(o,"validateNewFieldButton",function(){return cc}),n.d(o,"farmTextChanged",function(){return sc}),n.d(o,"fieldTextChanged",function(){return lc}),n.d(o,"handleWatchUpdate",function(){return uc}),n.d(o,"cancelNewField",function(){return dc});var i={};n.r(i),n.d(i,"init",function(){return mc}),n.d(i,"clearCacheButtonClicked",function(){return jc});var c={};n.r(c),n.d(c,"handleDrawerOpen",function(){return $c});var s={};n.r(s),n.d(s,"setCurrentSelectionStatusStatus",function(){return ns}),n.d(s,"setCurrentSelectionStatusMarker",function(){return rs}),n.d(s,"setCurrentSelectionStatusTimestamp",function(){return as}),n.d(s,"saveCurrentSelectionStatus",function(){return os}),n.d(s,"handleOperationSelected",function(){return is}),n.d(s,"handleOperationCleared",function(){return cs}),n.d(s,"addNewOperation",function(){return ss}),n.d(s,"setDisabledNewOperation",function(){return ls}),n.d(s,"cancelNewOperation",function(){return us}),n.d(s,"cancelStatusChange",function(){return ds});var l={};n.r(l),n.d(l,"addOperationClicked",function(){return ys}),n.d(l,"operationInputTyped",function(){return ws}),n.d(l,"fieldInputTyped",function(){return Cs}),n.d(l,"handleFieldEdited",function(){return ks}),n.d(l,"handleOperationEdited",function(){return Ss}),n.d(l,"openSuggestions",function(){return Is}),n.d(l,"closeSuggestions",function(){return xs});var u={};n.r(u),n.d(u,"resized",function(){return Vs}),n.d(u,"init",function(){return Bs});var d={};n.r(d),n.d(d,"addOperatorClicked",function(){return Ks}),n.d(d,"mapOadaToOperators",function(){return $s}),n.d(d,"disableNewOperatorButton",function(){return el}),n.d(d,"putOperator",function(){return tl}),n.d(d,"handleoperatorselected",function(){return nl}),n.d(d,"saveEditedOperator",function(){return rl}),n.d(d,"setCurrentOperator",function(){return al}),n.d(d,"addNewOperator",function(){return ol}),n.d(d,"lastNameTextChanged",function(){return cl}),n.d(d,"firstNameTextChanged",function(){return sl}),n.d(d,"handleWatchUpdate",function(){return ll}),n.d(d,"cancelNewOperator",function(){return ul});var p=n(1),f=n.n(p),b=n(56),O=n(26),m=n(2),j=n(32),g=n(33),h=n(35),v=n(34),y=n(36),w=n(18),C=n(0),k=n(12),S=n.n(k),I=n(233),x=n.n(I),N=n(234),F=n.n(N),E=n(48),_=n.n(E),D=n(51),T=n.n(D),W=n(520),L=n.n(W),U=n(29),Z=n.n(U),M=n(521),A=n.n(M),R=n(67),V=n(539),B=n(150),G=n.n(B),X=n(92),Y=n.n(X),J=n(111),z=n(112),H=n.n(z),P=n(91),q=n(58),Q=n.n(q),K=n(135),$=n(198),ee=n.n($);function te(){var e=Object(m.a)(["fields.handleFieldCleared"]);return te=function(){return e},e}function ne(){var e=Object(m.a)(["fields.handleFieldSelected"]);return ne=function(){return e},e}function re(){var e=Object(m.a)(["User.addFieldClicked"]);return re=function(){return e},e}function ae(){var e=Object(m.a)(["User.handleOperationCleared"]);return ae=function(){return e},e}function oe(){var e=Object(m.a)(["User.handleOperationSelected"]);return oe=function(){return e},e}function ie(){var e=Object(m.a)(["AutocompleteSearch.closeSuggestions"]);return ie=function(){return e},e}function ce(){var e=Object(m.a)(["AutocompleteSearch.openSuggestions"]);return ce=function(){return e},e}function se(){var e=Object(m.a)(["AutocompleteSearch.handleFieldEdited"]);return se=function(){return e},e}function le(){var e=Object(m.a)(["AutocompleteSearch.handleOperationEdited"]);return le=function(){return e},e}function ue(){var e=Object(m.a)(["AutocompleteSearch.addOperationClicked"]);return ue=function(){return e},e}function de(){var e=Object(m.a)(["AutocompleteSearch.fieldInputTyped"]);return de=function(){return e},e}function pe(){var e=Object(m.a)(["AutocompleteSearch.operationInputTyped"]);return pe=function(){return e},e}function fe(){var e=Object(m.a)(["fields.selectedId"]);return fe=function(){return e},e}function be(){var e=Object(m.a)(["fields.records.",".name"]);return be=function(){return e},e}function Oe(){var e=Object(m.a)(["fields.new_field.field.suggestionsOpen"]);return Oe=function(){return e},e}function me(){var e=Object(m.a)(["fields.selectedId"]);return me=function(){return e},e}function je(){var e=Object(m.a)(["fields.records"]);return je=function(){return e},e}function ge(){var e=Object(m.a)(["User.currentSelection.operation.suggestionsOpen"]);return ge=function(){return e},e}function he(){var e=Object(m.a)(["User.currentSelection.operation.inputText"]);return he=function(){return e},e}function ve(){var e=Object(m.a)(["User.currentSelection.operation.id"]);return ve=function(){return e},e}function ye(){var e=Object(m.a)(["operations.connection_id"]);return ye=function(){return e},e}function we(){var e=Object(m.a)(["operations.records"]);return we=function(){return e},e}var Ce=function(e){function t(){return Object(j.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"renderInput",value:function(e){var t=this,n=e.InputProps,r=e.classes,a=e.isMenuBar,o=e.ref,i=Object(V.a)(e,["InputProps","classes","isMenuBar","ref"]);return f.a.createElement(Y.a,Object.assign({onFocus:function(){t.props.openSuggestions({id:t.props.id})},onBlur:function(){t.props.closeSuggestions({id:t.props.id})},value:"FieldWorkApp"},i,{inputRef:o,InputProps:Object(R.a)({style:{color:"#FAFAFA"},classes:{input:r.input},endAdornment:f.a.createElement(J.InputAdornment,{position:"start"},f.a.createElement(_.a,{"aria-label":"clear textfield",className:r.menuButton,onClick:function(){"ops-input"===t.props.id?t.props.operationInputTyped({inputText:"",inputType:"operation"}):t.props.fieldInputTyped({inputText:"",inputType:"field"})}},f.a.createElement(ee.a,null)))},n),label:"ops-input"===this.props.id?a?"":"Operation":"Field",InputLabelProps:{style:{color:"white"},shrink:!0}}))}},{key:"getSuggestions",value:function(e){var t=this,n=[];return"ops-input"===this.props.id?(n=Object.values(this.props.operationSuggestions||{}).filter(function(n){return""===e||G.a.find(t.props.operationSuggestions,function(t){return t.label===e})||n.label.toLowerCase().includes(e.trim().toLowerCase())}),"none"!==this.props.connection_id&&n.unshift({action:"add",type:"operation",label:"add new operation"}),n):"fld-input"===this.props.id?((n=Object.values(this.props.fieldSuggestions).filter(function(n){return""===e||G.a.find(t.props.fieldSuggestions,function(t){return t.label===e})||n.label.toLowerCase().includes(e.trim().toLowerCase())})).unshift({action:"add",type:"field",label:"add new field"}),n):void 0}},{key:"renderSuggestion",value:function(e){var t=this,n=e.suggestion,r=e.index,a=e.itemProps,o=e.highlightedIndex===r,i=e.selectedItem===n.label;return"action"in n&&"add"===n.action?f.a.createElement(P.MenuItem,Object.assign({},a,{key:n.label,onClick:function(e){"ops-input"===t.props.id?t.props.addOperationClicked({}):t.props.addFieldClicked({})},selected:o,component:"div",style:{display:"block",color:"green",fontStyle:"italic",fontWeight:i?500:400}}),n.label):f.a.createElement(P.MenuItem,Object.assign({},a,{key:n.label,onClick:function(e){"ops-input"===t.props.id?t.props.operationSelected({item:n}):t.props.fieldSelected({item:n})},selected:o,component:"div",style:{display:"block",fontWeight:i?500:400}}),n.label)}},{key:"renderAddButton",value:function(e){var t=this,n=e.classes,r=e.addOperationDisabled,a=e.addFieldDisabled;return f.a.createElement(_.a,{"aria-label":"add",className:n.button,disabled:"ops-input"===this.props.id?r:a,onClick:"ops-input"===this.props.id?function(){t.props.addOperationClicked({})}:function(){t.props.addFieldClicked({})}},f.a.createElement(Q.a,{style:{color:"white",fontSize:32}},"add_circle"))}},{key:"renderEditButton",value:function(e){var t=this,n=e.classes;return f.a.createElement(_.a,{"aria-label":"fields",disabled:"ops-input"===this.props.id?!this.props.currentOperationId:!this.props.currentFieldId,className:n.button,onClick:"ops-input"===this.props.id?function(e){t.props.editOperationClicked({event:e})}:function(e){t.props.editFieldClicked({event:e})}},f.a.createElement(Q.a,{style:{color:"white",fontSize:32}},"mode_edit"))}},{key:"isAddOperationDisabled",value:function(){var e=""===this.props.operationInputText.trim()||Object.values(this.props.operationSuggestions).map(function(e){return e.label.toLowerCase()}).includes(this.props.operationInputText.trim().toLowerCase());e&&console.log("AddOperationDisabled"),e||console.log("AddOperationEnabled")}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.sourceAppBar;return f.a.createElement(K.a,{isOpen:"ops-input"===this.props.id?this.props.operationsSuggestionsOpen:this.props.fieldsSuggestionsOpen,selectedItem:"ops-input"===this.props.id?this.props.currentOperationId:this.props.currentFieldId,inputValue:"ops-input"===this.props.id?this.props.operationInputText:this.props.fieldInputText,itemToString:function(e){return null==e?"":e.label},onStateChange:function(t,n){var r="ops-input"===e.props.id?"operation":"field";switch(t.type){case K.a.stateChangeTypes.keyDownEnter:case K.a.stateChangeTypes.clickItem:"operation"===r?e.props.operationSelected({item:t.selectedItem}):e.props.fieldSelected({item:t.selectedItem});break;case K.a.stateChangeTypes.changeInput:"operation"===r?e.props.operationInputTyped({inputText:t.inputValue,inputType:r}):e.props.fieldInputTyped({inputText:t.inputValue,inputType:r});break;case K.a.stateChangeTypes.mouseUp:case K.a.stateChangeTypes.blurInput:"operation"===r?e.props.currentOperationId&&e.props.operationInputText:e.props.currentFieldId&&e.props.fieldSelected({item:e.props.fieldSuggestions[e.props.currentFieldId]})}}},function(t){var a=t.getInputProps,o=t.getItemProps,i=t.isOpen,c=t.inputValue,s=t.selectedItem,l=t.highlightedIndex;return f.a.createElement("div",null,f.a.createElement("div",{className:n.inputBox},e.renderInput({isMenuBar:r,fullWidth:!1,classes:n,InputProps:a({placeholder:"ops-input"===e.props.id?"Operation":"fld-input"===e.props.id?"Field":e.props.id,id:"autocomplete-search-"+e.props.id})})),i?f.a.createElement(H.a,{square:!0,className:n.suggestionsContainerOpen},f.a.createElement("div",{className:n.suggestionsList},e.getSuggestions(c).map(function(t,n){return e.renderSuggestion({suggestion:t,index:n,itemProps:o({item:t}),highlightedIndex:l,selectedItem:s})}))):null)})}}]),t}(f.a.Component),ke=Object(O.connect)({operationSuggestions:Object(C.state)(we()),connection_id:Object(C.state)(ye()),currentOperationId:Object(C.state)(ve()),operationInputText:Object(C.state)(he()),operationsSuggestionsOpen:Object(C.state)(ge()),fieldSuggestions:Object(C.state)(je()),currentFieldId:Object(C.state)(me()),fieldsSuggestionsOpen:Object(C.state)(Oe()),fieldInputText:Object(C.state)(be(),Object(C.state)(fe())),operationInputTyped:Object(C.signal)(pe()),fieldInputTyped:Object(C.signal)(de()),addOperationClicked:Object(C.signal)(ue()),editOperationClicked:Object(C.signal)(le()),editFieldClicked:Object(C.signal)(se()),openSuggestions:Object(C.signal)(ce()),closeSuggestions:Object(C.signal)(ie()),operationSelected:Object(C.signal)(oe()),operationCleared:Object(C.signal)(ae()),addFieldClicked:Object(C.signal)(re()),fieldSelected:Object(C.signal)(ne()),fieldCleared:Object(C.signal)(te())},Object(w.withStyles)(function(e){return{container:{display:"flex",flexDirection:"row",flexGrow:1,alignItems:"center",height:250,width:50},inputBox:{display:"flex",flexDirection:"row",flexGrow:1,alignItems:"center"},suggestionsContainerOpen:{position:"absolute",width:180,marginTop:.1*e.spacing.unit,marginBottom:0*e.spacing.unit,marginLeft:30,marginRight:0,zIndex:3},suggestion:{display:"block"},suggestionsList:{marginTop:.1*e.spacing.unit,marginBottom:0*e.spacing.unit,marginLeft:0,marginRight:0,padding:0,listStyleType:"none"},disabled:{pointerEvents:"none",opacity:.4,touchAction:"none"},menuButton:{marginLeft:2,marginRight:2}}},{withTheme:!0})(Ce)),Se=n(522),Ie=n.n(Se);function xe(){var e=Object(m.a)(["User.currentSelection.operation.suggestionsOpen"]);return xe=function(){return e},e}function Ne(){var e=Object(m.a)(["User.currentSelection.operation.id"]);return Ne=function(){return e},e}function Fe(){var e=Object(m.a)(["User.currentSelection.operation.inputText"]);return Fe=function(){return e},e}function Ee(){var e=Object(m.a)(["fields.editing"]);return Ee=function(){return e},e}function _e(){var e=Object(m.a)(["InfoBar.operations.open"]);return _e=function(){return e},e}function De(){var e=Object(m.a)(["window.isSmall"]);return De=function(){return e},e}function Te(){var e=Object(m.a)(["window.orientation"]);return Te=function(){return e},e}function We(){var e=Object(m.a)(["App.emptyDataSet"]);return We=function(){return e},e}function Le(){var e=Object(m.a)(["App.is_mobile"]);return Le=function(){return e},e}function Ue(){var e=Object(m.a)(["App.contentType"]);return Ue=function(){return e},e}function Ze(){var e=Object(m.a)(["App.appName"]);return Ze=function(){return e},e}function Me(){var e=Object(m.a)(["operations.connection_id"]);return Me=function(){return e},e}function Ae(){var e=Object(m.a)(["operations.records"]);return Ae=function(){return e},e}function Re(){var e=Object(m.a)(["SideDrawer.open"]);return Re=function(){return e},e}function Ve(){var e=Object(m.a)(["StatsBar.handleOpenStats"]);return Ve=function(){return e},e}function Be(){var e=Object(m.a)(["MenuBar.addNewFieldClicked"]);return Be=function(){return e},e}function Ge(){var e=Object(m.a)(["MenuBar.clearCacheClicked"]);return Ge=function(){return e},e}function Xe(){var e=Object(m.a)(["MenuBar.signoutClicked"]);return Xe=function(){return e},e}function Ye(){var e=Object(m.a)(["MenuBar.connectionsClicked"]);return Ye=function(){return e},e}function Je(){var e=Object(m.a)(["SideDrawer.handleDrawerOpen"]);return Je=function(){return e},e}function ze(){var e=Object(m.a)(["operators.addOperatorClicked"]);return ze=function(){return e},e}function He(){var e=Object(m.a)(["User.handleOperationCleared"]);return He=function(){return e},e}function Pe(){var e=Object(m.a)(["AutocompleteSearch.handleOperationEdited"]);return Pe=function(){return e},e}function qe(){var e=Object(m.a)(["AutocompleteSearch.addOperationClicked"]);return qe=function(){return e},e}function Qe(){var e=Object(m.a)(["AutocompleteSearch.operationInputTyped"]);return Qe=function(){return e},e}function Ke(){var e=Object(m.a)(["fields.addFieldClicked"]);return Ke=function(){return e},e}var $e=function(e){function t(){return Object(j.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,n=f.a.createElement(_.a,{key:0,color:"inherit","aria-label":"open drawer",onClick:function(){e.props.handleSideDrawerOpen({})},className:S()(t.menuButton,this.props.currentOperation&&this.props.sideDrawerOpen&&t.hide,!this.props.currentOperation&&t.disabled)},f.a.createElement(L.a,null)),r=f.a.createElement(_.a,{key:1,color:"inherit","aria-label":"open drawer",onClick:function(){return e.props.connectionsClicked({})},className:t.menuButton},f.a.createElement(A.a,null)),a=f.a.createElement(T.a,{key:2,color:"inherit","aria-label":"open drawer",onClick:function(){return e.props.connectionsClicked({})},className:t.menuButton,disabled:"none"===this.props.connection_id},"Connect"),o=f.a.createElement(_.a,{key:4,color:"inherit","aria-label":"open drawer",onClick:function(){return e.props.addFieldClicked({})},className:t.menuButton,disabled:"none"===this.props.connection_id||this.props.fieldsEditing||this.props.emptyDataSet},f.a.createElement(Ie.a,null)),i=f.a.createElement(T.a,{key:5,color:"inherit","aria-label":"open drawer",onClick:function(){return e.props.addFieldClicked({})},className:t.menuButton,disabled:"none"===this.props.connection_id||this.props.fieldsEditing||this.props.emptyDataSet},"Add Field"),c=(f.a.createElement(T.a,{key:6,color:"inherit","aria-label":"open drawer",onClick:function(){return e.props.addOperatorClicked({})},className:t.menuButton,disabled:"none"===this.props.connection_id},"Add Operator"),f.a.createElement(ke,{id:"ops-input",style:{width:200},sourceAppBar:!0}));return f.a.createElement(x.a,{className:t.appBar,position:"static"},f.a.createElement(F.a,{className:t.appBar,disableGutters:!(this.props.sideDrawerOpen&&this.props.currentOperation)},n,f.a.createElement(Z.a,{variant:"title",color:"inherit",style:{align:"left"},className:t.typography,noWrap:!0},this.props.sideDrawerOpen?null:c),f.a.createElement("div",{className:t.buttons},this.props.isSmall&&"portrait"===this.props.orientation?r:a,this.props.isSmall&&"portrait"===this.props.orientation?o:i)))}}]),t}(f.a.Component),et=Object(O.connect)({addFieldClicked:Object(C.signal)(Ke()),operationInputTyped:Object(C.signal)(Qe()),addOperationClicked:Object(C.signal)(qe()),editOperationClicked:Object(C.signal)(Pe()),operationCleared:Object(C.signal)(He()),addOperatorClicked:Object(C.signal)(ze()),handleSideDrawerOpen:Object(C.signal)(Je()),connectionsClicked:Object(C.signal)(Ye()),signoutClicked:Object(C.signal)(Xe()),clearCacheClicked:Object(C.signal)(Ge()),addNewFieldClicked:Object(C.signal)(Be()),showStatsClicked:Object(C.signal)(Ve()),sideDrawerOpen:Object(C.state)(Re()),operations:Object(C.state)(Ae()),connection_id:Object(C.state)(Me()),appName:Object(C.state)(Ze()),contentType:Object(C.state)(Ue()),appIsMobile:Object(C.state)(Le()),emptyDataSet:Object(C.state)(We()),orientation:Object(C.state)(Te()),isSmall:Object(C.state)(De()),infoBarOperationsOpen:Object(C.state)(_e()),fieldsEditing:Object(C.state)(Ee()),operationInputText:Object(C.state)(Fe()),currentOperation:Object(C.state)(Ne()),operationsSuggestionsOpen:Object(C.state)(xe())},Object(w.withStyles)(function(e){return{appBar:{display:"flex",transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),height:64,order:1},buttons:{},menuButton:{marginLeft:2,marginRight:2},hide:{display:"none"},disabled:{pointerEvents:"none",opacity:.4,touchAction:"none"},typography:{flex:1,width:200}}},{withTheme:!0})($e)),tt=n(107),nt=n.n(tt),rt=n(72);function at(){var e=Object(m.a)(["Connections.oa daFieldsDomainChanged"]);return at=function(){return e},e}function ot(){var e=Object(m.a)(["Connections.oadaDomainChanged"]);return ot=function(){return e},e}function it(){var e=Object(m.a)(["Connections.cancelClicked"]);return it=function(){return e},e}function ct(){var e=Object(m.a)(["Connections.submitClicked"]);return ct=function(){return e},e}function st(){var e=Object(m.a)(["Connections.show"]);return st=function(){return e},e}function lt(){var e=Object(m.a)(["Connections.oada_fields_domain_text"]);return lt=function(){return e},e}function ut(){var e=Object(m.a)(["Connections.oada_domain_text"]);return ut=function(){return e},e}var dt=Object(O.connect)({oadaDomainText:Object(C.state)(ut()),oadaFieldsDomainText:Object(C.state)(lt()),show:Object(C.state)(st()),submitClicked:Object(C.signal)(ct()),cancelClicked:Object(C.signal)(it()),oadaDomainChanged:Object(C.signal)(ot()),oadaFieldsDomainChanged:Object(C.signal)(at())},function(e){function t(){return Object(j.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this;return f.a.createElement(nt.a,{open:this.props.show,className:"connections-dialog"},f.a.createElement(tt.DialogTitle,{id:"alert-dialog-title"},"Data Source [2.2.2]"," "),f.a.createElement(tt.DialogContent,null,"At what OADA domain is your data stored?"),f.a.createElement(tt.DialogContent,null,f.a.createElement("div",null,f.a.createElement(rt.b,{label:"Domain",value:this.props.oadaDomainText,onChange:function(t){return e.props.oadaDomainChanged({value:t.target.value})},style:{width:250}}))),f.a.createElement(tt.DialogActions,null,f.a.createElement(T.a,{onClick:function(){e.props.cancelClicked({})},color:"secondary"},"Cancel"),f.a.createElement(T.a,{onClick:function(){e.props.submitClicked({})},color:"secondary",autoFocus:!0},"Submit")))}}]),t}(f.a.Component)),pt=n(151),ft=n.n(pt),bt=n(527),Ot=n.n(bt),mt=n(523),jt=n.n(mt),gt=n(334),ht=n.n(gt),vt=n(49),yt=n.n(vt),wt=n(526),Ct=n.n(wt),kt=n(524),St=n.n(kt),It=n(525),xt=n.n(It);function Nt(){var e=Object(m.a)(["User.handleFieldSelected"]);return Nt=function(){return e},e}function Ft(){var e=Object(m.a)(["OpsList.handleCollapse"]);return Ft=function(){return e},e}function Et(){var e=Object(m.a)(["OpsList"]);return Et=function(){return e},e}function _t(){var e=Object(m.a)(["User.currentSelection.operation.id"]);return _t=function(){return e},e}function Dt(){var e=Object(m.a)(["operations.records.",".label"]);return Dt=function(){return e},e}var Tt=function(e){function t(){return Object(j.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"renderItem",value:function(e){var t=this,n=e.key,r=e.color1,a=e.color2,o=e.bannerText,i=e.classes,c=this.props.OpsList[n].fields.reduce(function(e,t){return e+(t.boundary?t.boundary.area:0)},0),s=e.total_area?Math.round(1e4*(c/e.total_area+1e-5))/100:0;return f.a.createElement("div",{key:"fields-"+n},f.a.createElement(vt.ListItem,{button:!0,style:{color:r},onClick:function(){t.props.handleCollapse({status:n})}},f.a.createElement(vt.ListItemText,{primary:f.a.createElement(Z.a,{variant:"body2",style:{color:r}},o+" ("+this.props.OpsList[n].fields.length+")"),secondary:f.a.createElement(Z.a,{variant:"caption",style:{color:a}},Math.round(100*(c+1e-5))/100+(s>0?" acres ("+s+"%)":" acres"))}),this.props.OpsList[n].fields.length>0?this.props.OpsList[n].collapse?f.a.createElement(xt.a,null):f.a.createElement(St.a,null):null),f.a.createElement(Ct.a,{in:!this.props.OpsList[n].collapse,timeout:"auto",unmountOnExit:!0},f.a.createElement(yt.a,{component:"div",disablePadding:!0},this.props.OpsList[n].fields.map(function(e){return f.a.createElement(vt.ListItem,{button:!0,style:{color:r},className:i.nested,key:"field-"+e.id,onClick:function(){}},f.a.createElement(vt.ListItemText,{disableTypography:!0,primary:f.a.createElement(Z.a,{variant:"body2",style:{color:r}},e.name+" ("+Math.round(100*(e.boundary.area+1e-5))/100+" acres)"),secondary:f.a.createElement("div",null,f.a.createElement(Z.a,{variant:"caption",style:{color:a}},"Since: ",e.since),f.a.createElement(Z.a,{variant:"caption",style:{color:a}},"Marked By: ",e.by))}))}))))}},{key:"render",value:function(){var e=this,t=this.props.classes,n={unplanned:{color1:"#263238",bannerText:"Unplanned",color2:"#B0BEC5"},planned:{color1:"#D50000",bannerText:"Planned",color2:"#EF9A9A"},started:{color1:"#FFC107",bannerText:"Started",color2:"#FFC107"},completed:{color1:"#1B5E20",bannerText:"Completed",color2:"#66BB6A"},total_area:Object.keys(this.props.OpsList||{}).map(function(t){return e.props.OpsList[t].fields.reduce(function(e,t){return e+(t.boundary?t.boundary.area:0)},0)}).reduce(function(e,t){return e+t},0)};return f.a.createElement(yt.a,{component:"nav",className:t.root,subheader:f.a.createElement(ht.a,{component:"div",style:{color:"#304FFE",display:"flex",alignItems:"center"}},f.a.createElement(Z.a,{variant:"caption"},Object.keys(this.props.OpsList||{}).map(function(t){return e.props.OpsList[t].fields.length}).reduce(function(e,t){return e+t},0)+" fields, "+Math.round(100*(n.total_area+1e-5))/100+" acres "))},Object.keys(this.props.OpsList||{}).map(function(r){return e.renderItem(Object(R.a)({key:r,classes:t,total_area:n.total_area},n[r]))}))}}]),t}(f.a.Component),Wt=Object(O.connect)({currentOperationName:Object(C.state)(Dt(),Object(C.state)(_t())),OpsList:Object(C.state)(Et()),handleCollapse:Object(C.signal)(Ft()),selectField:Object(C.signal)(Nt())},Object(w.withStyles)(function(e){return{root:{maxWidth:310,backgroundColor:e.palette.background.paper},nested:{paddingLeft:4*e.spacing.unit}}},{withTheme:!0})(Tt));function Lt(){var e=Object(m.a)(["AutocompleteSearch.fieldInputTyped"]);return Lt=function(){return e},e}function Ut(){var e=Object(m.a)(["DataTabs.handleChangeIndex"]);return Ut=function(){return e},e}function Zt(){var e=Object(m.a)(["DataTabs.handleChange"]);return Zt=function(){return e},e}function Mt(){var e=Object(m.a)(["DataTabs.handleFieldEdited"]);return Mt=function(){return e},e}function At(){var e=Object(m.a)(["fields.selectedId"]);return At=function(){return e},e}function Rt(){var e=Object(m.a)(["fields.records.",".name"]);return Rt=function(){return e},e}function Vt(){var e=Object(m.a)(["DataTabs.value"]);return Vt=function(){return e},e}function Bt(e){var t=e.children,n=e.dir;return f.a.createElement(Z.a,{component:"div",dir:n,style:{padding:0}},t)}var Gt=function(e){function t(){return Object(j.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.theme,a=f.a.createElement(Wt,null);return f.a.createElement("div",{className:n.root},f.a.createElement(jt.a,{axis:"rtl"===r.direction?"x-reverse":"x",index:this.props.tabValue,onChangeIndex:function(t){e.props.handleChangeIndex({index:t})},style:{padding:"0px"}},f.a.createElement(Bt,{dir:r.direction},a)))}}]),t}(f.a.Component),Xt=Object(O.connect)({tabValue:Object(C.state)(Vt()),currentInputText:Object(C.state)(Rt(),Object(C.state)(At())),handleFieldEdited:Object(C.signal)(Mt()),handleChange:Object(C.signal)(Zt()),handleChangeIndex:Object(C.signal)(Ut()),clearFieldClicked:Object(C.signal)(Lt())},Object(w.withStyles)(function(e){return{root:{backgroundColor:e.palette.background.paper,width:250,paddingLeft:"0px"},container:{display:"flex",flexDirection:"row",flexGrow:1,alignItems:"center",justifyContent:"flex-start",height:50,width:300},inputBox:{display:"flex",flexDirection:"row",flexGrow:1,alignItems:"center",paddingLeft:10,height:50,width:220},disabled:{pointerEvents:"none",opacity:.4,touchAction:"none"},inputContainer:{display:"flex",justifyContent:"flex-start",flexDirection:"column",paddingLeft:"20px",marginTop:e.spacing.unit}}},{withTheme:!0})(Gt));function Yt(){var e=Object(m.a)(["DataTabs.toggleTab"]);return Yt=function(){return e},e}function Jt(){var e=Object(m.a)(["SideDrawer.handleDrawerOpen"]);return Jt=function(){return e},e}function zt(){var e=Object(m.a)(["User.currentSelection.operation.id"]);return zt=function(){return e},e}function Ht(){var e=Object(m.a)(["SideDrawer.open"]);return Ht=function(){return e},e}var Pt=function(e){function t(){return Object(j.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,n=f.a.createElement(ke,{id:"ops-input"}),r=f.a.createElement(Xt,null);return f.a.createElement(ft.a,{variant:"persistent",classes:{paper:t.drawerPaper},anchor:"left",open:this.props.sideDrawerOpen&&!!this.props.currentOperation},f.a.createElement("div",{className:t.drawerInner},f.a.createElement("div",{className:t.drawerHeader},f.a.createElement("div",{className:t.inputContainer},f.a.createElement(Z.a,{variant:"title",noWrap:!0},n)),f.a.createElement(_.a,{onClick:function(){e.props.handleSideDrawerOpen({})}},f.a.createElement(Ot.a,{style:{color:"#FAFAFA",fontSize:35}}))),r))}}]),t}(f.a.Component),qt=Object(O.connect)({sideDrawerOpen:Object(C.state)(Ht()),currentOperation:Object(C.state)(zt()),handleSideDrawerOpen:Object(C.signal)(Jt()),dataTabsToggle:Object(C.signal)(Yt())},Object(w.withStyles)(function(e){return{hide:{display:"none"},drawerPaper:{width:250,backgroundColor:"#212121"},drawerHeader:Object(R.a)({display:"flex",alignItems:"center",flexDirection:"row",justifyContent:"flex-start",paddingLeft:"15px"},e.mixins.toolbar),drawerInner:{padding:"0px"},inputContainer:{display:"flex",justifyContent:"flex-start",flexDirection:"column",marginTop:e.spacing.unit,width:200}}},{withTheme:!0})(Pt)),Qt=n(68),Kt=n.n(Qt),$t=(n(802),n(1116)),en=n(1112),tn=n(1113),nn=n(1115),rn=n(1117),an=n(1114);function on(){var e=Object(m.a)(["fields.saveEditedField"]);return on=function(){return e},e}function cn(){var e=Object(m.a)(["fields.handleFieldPolygonClicked"]);return cn=function(){return e},e}function sn(){var e=Object(m.a)(["MapPanel.deleteCoordinate"]);return sn=function(){return e},e}function ln(){var e=Object(m.a)(["MapPanel.mapMoved"]);return ln=function(){return e},e}function un(){var e=Object(m.a)(["MapPanel.locationFound"]);return un=function(){return e},e}function dn(){var e=Object(m.a)(["MapPanel.markerDragged"]);return dn=function(){return e},e}function pn(){var e=Object(m.a)(["MapPanel.markerDragEnded"]);return pn=function(){return e},e}function fn(){var e=Object(m.a)(["MapPanel.markerDragStarted"]);return fn=function(){return e},e}function bn(){var e=Object(m.a)(["MapPanel.mouseDownOnMap"]);return bn=function(){return e},e}function On(){var e=Object(m.a)(["MapPanel.mapMoveStarted"]);return On=function(){return e},e}function mn(){var e=Object(m.a)(["User.currentSelection.operation.id"]);return mn=function(){return e},e}function jn(){var e=Object(m.a)(["operations.records.",""]);return jn=function(){return e},e}function gn(){var e=Object(m.a)(["operations.records"]);return gn=function(){return e},e}function hn(){var e=Object(m.a)(["operations.records"]);return hn=function(){return e},e}function vn(){var e=Object(m.a)(["User.currentSelection.status.status"]);return vn=function(){return e},e}function yn(){var e=Object(m.a)(["User.currentSelection.operation.id"]);return yn=function(){return e},e}function wn(){var e=Object(m.a)(["fields.selectedId"]);return wn=function(){return e},e}function Cn(){var e=Object(m.a)(["fields.editing"]);return Cn=function(){return e},e}function kn(){var e=Object(m.a)(["fields.records"]);return kn=function(){return e},e}function Sn(){var e=Object(m.a)(["fields.new_field"]);return Sn=function(){return e},e}function In(){var e=Object(m.a)(["SideDrawer.open"]);return In=function(){return e},e}function xn(){var e=Object(m.a)(["MapPanel.center"]);return xn=function(){return e},e}function Nn(){var e=Object(m.a)(["MapPanel.geohashPolygons"]);return Nn=function(){return e},e}function Fn(){var e=Object(m.a)(["App.is_mobile"]);return Fn=function(){return e},e}function En(){var e=Object(m.a)(["MapPanel.isLoading"]);return En=function(){return e},e}function _n(){var e=Object(m.a)(["MapPanel.moving"]);return _n=function(){return e},e}function Dn(){var e=Object(m.a)(["MapPanel.zoom"]);return Dn=function(){return e},e}var Tn=$t.a.Overlay,Wn=function(e){function t(){return Object(j.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"validateMouseEvent",value:function(e){this.props.fieldEditing&&(this.props.moving||this.props.dragging||e.originalEvent.target.offsetParent&&e.originalEvent.target.offsetParent.className.includes("marker")||this.props.mouseDownOnMap({pt:[e.latlng.lng,e.latlng.lat]}))}},{key:"componentDidMount",value:function(){this.refs.map.leafletElement.locate()}},{key:"render",value:function(){var e=this,t=this.props.classes,n={unplanned:{color1:"#E0E0E0",bannerText:"Unplanned",color2:"#616161"},planned:{color1:"#D50000",bannerText:"Planned",color2:"#EF9A9A"},started:{color1:"#FFC107",bannerText:"Started",color2:"#FFC107"},completed:{color1:"#76FF03",bannerText:"Completed",color2:"#33691E"}},r=[];this.props.fieldEditing&&this.props.currentField&&this.props.currentField.boundary&&this.props.currentField.boundary.geojson.coordinates[0].length>0&&(r=[],this.props.currentField.boundary.geojson.coordinates[0].forEach(function(t,n){r.push(f.a.createElement(en.a,{className:"selected-field-marker",key:e.props.selectedId+"-"+n,position:[t[1],t[0]],color:e.props.currentOperationId&&e.props.allOperations[e.props.currentOperationId]&&e.props.allOperations[e.props.currentOperationId].fields[e.props.selectedId]?e.props.allOperations[e.props.currentOperationId].fields[e.props.selectedId].status:"unplanned",draggable:!0,onDrag:function(t){e.props.markerDragged({lat:t.target._latlng.lat,lng:t.target._latlng.lng,idx:n})},onDragStart:function(t){e.props.markerDragStarted({idx:n})},onDragEnd:function(t){e.props.markerDragEnded({lat:t.target._latlng.lat,lng:t.target._latlng.lng,idx:n})},onDblClick:function(t){e.props.deleteCoordinate({index:n})}}))}));var a=this.props.currentField.boundary?f.a.createElement(tn.a,{className:t.fieldPolygon,data:this.props.currentField.boundary.geojson,onClick:function(){e.props.selectedId&&e.props.currentField.id===e.props.selectedId&&e.props.fieldEditing||e.props.handleFieldPolygonClicked({id:e.props.currentField.id,field:e.props.currentField}),e.forceUpdate()},key:"field-"+this.props.currentField.id+"-polygon"+Kt()(),color:n[this.props.currentOperation.fields[this.props.currentField.id]?this.props.currentOperation.fields[this.props.currentField.id].status:"unplanned"].color1,style:{fillOpacity:.4}}):null;return f.a.createElement("div",{className:t.mapContainer},f.a.createElement(nn.a,{onLocationfound:function(t){return e.props.locationFound({lat:t.latlng.lat,lng:t.latlng.lng})},onClick:function(t){e.validateMouseEvent(t)},onMoveStart:function(t){e.props.mapMoveStarted()},onMoveend:function(t){e.props.mapMoved({latlng:e.refs.map.leafletElement.getCenter(),zoom:e.refs.map.leafletElement.getZoom()})},dragging:!0,ref:"map",center:this.props.center,attributionControl:!this.props.isMobile,zoomControl:!0,zoom:this.props.mapZoom||15},f.a.createElement(rn.a,{key:"tile-layer",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles \xa9 Esri \u2014 Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}),r,a,f.a.createElement($t.a,{position:"topright"},f.a.createElement(Tn,{checked:!0,name:"Fields"},f.a.createElement(an.a,null,Object.keys(this.props.fields||{}).filter(function(t){return e.props.currentOperationId&&e.props.fields[t].boundary&&(t!==e.props.selectedId||!e.props.fieldsEditing)}).map(function(r){return r===e.props.currentField.id?null:f.a.createElement(tn.a,{className:t.fieldPolygon,data:e.props.fields[r].boundary.geojson,onClick:function(){e.props.selectedId&&r===e.props.selectedId&&e.props.fieldEditing||e.props.fieldEditing||e.props.handleFieldPolygonClicked({id:r,field:e.props.fields[r]}),e.forceUpdate()},key:"field-"+r+"-polygon"+Kt()(),color:n[e.props.currentOperation&&e.props.currentOperation.fields&&e.props.currentOperation.fields[r]&&e.props.currentOperation.fields[r].status?e.props.currentOperation.fields[r].status:"unplanned"].color1,style:{fillOpacity:.4}})}))))))}}]),t}(f.a.Component),Ln=Object(O.connect)({mapZoom:Object(C.state)(Dn()),moving:Object(C.state)(_n()),isLoading:Object(C.state)(En()),isMobile:Object(C.state)(Fn()),geohashPolygons:Object(C.state)(Nn()),center:Object(C.state)(xn()),sideDrawerOpen:Object(C.state)(In()),currentField:Object(C.state)(Sn()),fields:Object(C.state)(kn()),fieldEditing:Object(C.state)(Cn()),selectedId:Object(C.state)(wn()),currentOperationId:Object(C.state)(yn()),currentStatus:Object(C.state)(vn()),allOperations:Object(C.state)(hn()),operations:Object(C.state)(gn()),currentOperation:Object(C.state)(jn(),Object(C.state)(mn())),mapMoveStarted:Object(C.signal)(On()),mouseDownOnMap:Object(C.signal)(bn()),markerDragStarted:Object(C.signal)(fn()),markerDragEnded:Object(C.signal)(pn()),markerDragged:Object(C.signal)(dn()),locationFound:Object(C.signal)(un()),mapMoved:Object(C.signal)(ln()),deleteCoordinate:Object(C.signal)(sn()),handleFieldPolygonClicked:Object(C.signal)(cn()),saveEdited:Object(C.signal)(on())},Object(w.withStyles)(function(e){return{"leaflet-container":{flex:1,order:2,flexGrow:1,width:"100%"},mapContainer:{display:"flex",flexGrow:1,order:2},map:{display:"flex",width:"100%",height:"100%"},fieldPolygon:{strokeWidth:4,strokeOpacity:1,width:"100vw"},disabled:{pointerEvents:"none",opacity:.4,touchAction:"none"},hide:{display:"none"}}},{withTheme:!0})(Wn)),Un=n(95),Zn=n.n(Un),Mn=n(63),An=(n(804),n(530)),Rn=n.n(An);function Vn(){var e=Object(m.a)(["AutocompleteSearch.handleFieldEdited"]);return Vn=function(){return e},e}function Bn(){var e=Object(m.a)(["AutocompleteSearch.operationInputTyped"]);return Bn=function(){return e},e}function Gn(){var e=Object(m.a)(["BottomDrawer.handleDrawerOpen"]);return Gn=function(){return e},e}function Xn(){var e=Object(m.a)(["BottomDrawer.handleDrawerOpen"]);return Xn=function(){return e},e}function Yn(){var e=Object(m.a)(["BottomDrawer.handleOperatorMenuClose"]);return Yn=function(){return e},e}function Jn(){var e=Object(m.a)(["BottomDrawer.handleOperatorMenuOpen"]);return Jn=function(){return e},e}function zn(){var e=Object(m.a)(["User.cancelStatusChange"]);return zn=function(){return e},e}function Hn(){var e=Object(m.a)(["User.cancelNewOperation"]);return Hn=function(){return e},e}function Pn(){var e=Object(m.a)(["User.setDisabledNewOperation"]);return Pn=function(){return e},e}function qn(){var e=Object(m.a)(["User.addNewOperation"]);return qn=function(){return e},e}function Qn(){var e=Object(m.a)(["User.resetCurrentSelectionStatus"]);return Qn=function(){return e},e}function Kn(){var e=Object(m.a)(["User.saveCurrentSelectionStatus"]);return Kn=function(){return e},e}function $n(){var e=Object(m.a)(["User.setCurrentSelectionStatusTimestamp"]);return $n=function(){return e},e}function er(){var e=Object(m.a)(["User.setCurrentSelectionStatusMarker"]);return er=function(){return e},e}function tr(){var e=Object(m.a)(["User.setCurrentSelectionStatusStatus"]);return tr=function(){return e},e}function nr(){var e=Object(m.a)(["User.currentSelection.operation.disabled"]);return nr=function(){return e},e}function rr(){var e=Object(m.a)(["User.currentSelection.operation.inputText"]);return rr=function(){return e},e}function ar(){var e=Object(m.a)(["User.currentSelection.operation.id"]);return ar=function(){return e},e}function or(){var e=Object(m.a)(["operations.records.",".label"]);return or=function(){return e},e}function ir(){var e=Object(m.a)(["fields.selectedId"]);return ir=function(){return e},e}function cr(){var e=Object(m.a)(["fields.records.",".name"]);return cr=function(){return e},e}function sr(){var e=Object(m.a)(["User.accessibleUsers"]);return sr=function(){return e},e}function lr(){var e=Object(m.a)(["User.currentSelection.status.timestamp"]);return lr=function(){return e},e}function ur(){var e=Object(m.a)(["User.currentSelection.status.marker"]);return ur=function(){return e},e}function dr(){var e=Object(m.a)(["User.currentSelection.status.status"]);return dr=function(){return e},e}function pr(){var e=Object(m.a)(["BottomDrawer.operatorMenuOpen"]);return pr=function(){return e},e}function fr(){var e=Object(m.a)(["BottomDrawer.menu"]);return fr=function(){return e},e}function br(){var e=Object(m.a)(["BottomDrawer.open"]);return br=function(){return e},e}var Or=function(e){function t(){return Object(j.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"renderDatePicker",value:function(){var e=this,t=this.props.classes;return f.a.createElement(Y.a,{id:"date",label:"Date",type:"date",className:t.textField,value:this.props.currentTimestamp,InputLabelProps:{shrink:!0,style:{color:"white"}},InputProps:{style:{color:"white"}},onChange:function(t){e.props.setCurrentSelectionStatusTimestamp({timestamp:t.target.value})}})}},{key:"renderEditField",value:function(){var e=this,t=this.props.classes;return f.a.createElement(_.a,{key:4,color:"inherit","aria-label":"open drawer",onClick:function(){return e.props.editFieldClicked({})},className:t.editFieldButton},f.a.createElement(Rn.a,null))}},{key:"renderAddOperationForm",value:function(){var e=this,t=this.props.classes;return f.a.createElement("form",{className:t.container,noValidate:!0},f.a.createElement("div",{className:t.form},f.a.createElement(Y.a,{id:"operation name",label:"New Operation Name:",className:t.textField,value:this.props.newOperationName,onChange:function(t){e.props.newOperationNameTyped({inputText:t.target.value,inputType:"operation"})},margin:"normal",InputProps:{style:{color:"#FAFAFA"},classes:{input:t.input}},InputLabelProps:{style:{color:"white"},shrink:!0}})),f.a.createElement("div",null,f.a.createElement(T.a,{variant:"raised",className:t.button,color:"primary",style:{color:"#FAFAFA"},disabled:this.props.disabledNewOperation,onClick:function(){e.props.addNewOperation()}},"Add"),f.a.createElement(T.a,{variant:"raised",className:t.button,color:"secondary",style:{color:"#FAFAFA"},onClick:function(){e.props.cancelNewOperation()}},"Cancel")))}},{key:"renderAddFieldForm",value:function(){var e=this,t=this.props.classes;return f.a.createElement("form",{className:t.container,noValidate:!0},f.a.createElement("div",{className:t.form},f.a.createElement(Y.a,{id:"field name",label:"New Field Name:",className:t.textField,value:this.props.newFieldName,onChange:function(t){e.props.newFieldNameTyped({inputText:t.target.value,inputType:"field"})},margin:"normal",InputProps:{style:{color:"#FAFAFA"},classes:{input:t.input}},InputLabelProps:{style:{color:"white"},shrink:!0}})),f.a.createElement("div",null,f.a.createElement(T.a,{variant:"raised",className:t.button,color:"primary",style:{color:"#FAFAFA"},disabled:this.props.disabledNewOperation,onClick:function(){e.props.addNewField()}},"Add"),f.a.createElement(T.a,{variant:"raised",className:t.button,color:"secondary",style:{color:"#FAFAFA"},onClick:function(){e.props.cancelNewOperation()}},"Cancel")))}},{key:"renderRadioButtonGroup",value:function(){var e=this,t=this.props.classes,n=this.renderDatePicker({}),r=this.renderEditField({});return f.a.createElement("form",{className:t.container,noValidate:!0},f.a.createElement(Y.a,{select:!0,fullWidth:!0,className:t.textField,label:"Operator",InputLabelProps:{shrink:!0,style:{color:"white"}},value:this.props.currentMarker,onChange:function(t){e.props.setCurrentSelectionStatusMarker({marker:t.target.value})},InputProps:{style:{color:"white"}}},Object.values(this.props.allOperators).map(function(e){return f.a.createElement(P.MenuItem,{key:e.label,value:e.label,selected:!0},e.label)})),f.a.createElement("div",{className:t.middle},f.a.createElement(Mn.FormControl,{component:"fieldset",required:!0,className:t.formControl},f.a.createElement(Un.RadioGroup,{"aria-label":"status",name:"status",className:t.group,value:this.props.currentStatus,onChange:function(t){e.props.setCurrentSelectionStatusStatus({editFieldStatus:!0,value:t.target.value,statusValue:t.target.value})}},f.a.createElement(Mn.FormControlLabel,{value:"unplanned",className:t.statusButton,control:f.a.createElement(Zn.a,{checkedIcon:f.a.createElement(Q.a,{style:{color:"#FAFAFA",fontSize:50}},"check_circle"),icon:f.a.createElement(Q.a,{style:{color:"#FAFAFA",fontSize:50}},"radio_button_checked")}),label:f.a.createElement(Z.a,{style:{color:"white"}},"Unplanned")}),f.a.createElement(Mn.FormControlLabel,{value:"planned",className:t.statusButton,control:f.a.createElement(Zn.a,{checkedIcon:f.a.createElement(Q.a,{style:{color:"red",fontSize:50}},"check_circle"),icon:f.a.createElement(Q.a,{style:{color:"red",fontSize:50}},"radio_button_checked")}),label:f.a.createElement(Z.a,{style:{color:"white"}},"Planned")}),f.a.createElement(Mn.FormControlLabel,{value:"started",className:t.statusButton,control:f.a.createElement(Zn.a,{checkedIcon:f.a.createElement(Q.a,{style:{color:"#FFC107",fontSize:50}},"check_circle"),icon:f.a.createElement(Q.a,{style:{color:"#FFC107",fontSize:50}},"radio_button_checked")}),label:f.a.createElement(Z.a,{style:{color:"white"}},"Started")}),f.a.createElement(Mn.FormControlLabel,{value:"completed",className:t.statusButton,control:f.a.createElement(Zn.a,{checkedIcon:f.a.createElement(Q.a,{style:{color:"#76FF03",fontSize:50}},"check_circle"),icon:f.a.createElement(Q.a,{style:{color:"#76FF03",fontSize:50}},"radio_button_checked")}),label:f.a.createElement(Z.a,{style:{color:"white"}},"Completed")}))),r),n)}},{key:"renderHeaderItem",value:function(){var e=this,t=this.props.classes;if("operations"===this.props.bottomMenu){return f.a.createElement("div",{className:t.drawerHeader,tabIndex:0,role:"banner",onClick:function(){e.props.cancelNewOperation({})},onKeyDown:function(){e.props.cancelNewOperation({})}},f.a.createElement("div",null,"Add New Operation"),f.a.createElement("div",{className:t.menuButton},f.a.createElement(_.a,{"aria-label":"clear drawer",className:t.menuButton,onClick:function(){e.props.handleOperatorMenuClose({})}},f.a.createElement(ee.a,null))))}if("status-update"===this.props.bottomMenu){var n="Updating status for operation ["+this.props.currentOperationLabel+"] on field "+this.props.currentFieldLabel;return f.a.createElement("div",{className:t.drawerHeader,tabIndex:0,role:"banner",onClick:function(){e.props.cancelStatusChange({})},onKeyDown:function(){}},f.a.createElement("div",null,n),f.a.createElement("div",null,f.a.createElement(_.a,{"aria-label":"clear drawer",className:t.menuButton,onClick:function(){e.props.handleOperatorMenuClose({})}},f.a.createElement(ee.a,null))))}}},{key:"render",value:function(){var e=this,t=this.renderHeaderItem({}),n=this.renderAddOperationForm({}),r=this.renderRadioButtonGroup({});return f.a.createElement(ft.a,{anchor:"bottom",open:this.props.bottomDrawerOpen,onClose:function(){e.props.saveCurrentSelectionStatus({})}},t,"status-update"===this.props.bottomMenu?r:"operations"===this.props.bottomMenu?n:null)}}]),t}(f.a.Component),mr=Object(O.connect)({bottomDrawerOpen:Object(C.state)(br()),bottomMenu:Object(C.state)(fr()),operatorMenuOpen:Object(C.state)(pr()),currentStatus:Object(C.state)(dr()),currentMarker:Object(C.state)(ur()),currentTimestamp:Object(C.state)(lr()),allOperators:Object(C.state)(sr()),currentFieldLabel:Object(C.state)(cr(),Object(C.state)(ir())),currentOperationLabel:Object(C.state)(or(),Object(C.state)(ar())),newOperationName:Object(C.state)(rr()),disabledNewOperation:Object(C.state)(nr()),setCurrentSelectionStatusStatus:Object(C.signal)(tr()),setCurrentSelectionStatusMarker:Object(C.signal)(er()),setCurrentSelectionStatusTimestamp:Object(C.signal)($n()),saveCurrentSelectionStatus:Object(C.signal)(Kn()),resetCurrentSelectionStatus:Object(C.signal)(Qn()),addNewOperation:Object(C.signal)(qn()),setDisabledNewOperation:Object(C.signal)(Pn()),cancelNewOperation:Object(C.signal)(Hn()),cancelStatusChange:Object(C.signal)(zn()),handleOperatorMenuOpen:Object(C.signal)(Jn()),handleOperatorMenuClose:Object(C.signal)(Yn()),handleBottomDrawerOpen:Object(C.signal)(Xn()),handleBottomDrawerClose:Object(C.signal)(Gn()),newOperationNameTyped:Object(C.signal)(Bn()),editFieldClicked:Object(C.signal)(Vn())},Object(w.withStyles)(function(e){return{formControl:{margin:2*e.spacing.unit,flexWrap:"noWrap",justifyContent:"flex-start"},group:{display:"flex",flex:1,flexDirection:"row",flexWrap:"noWrap",justifyContent:"center"},statusButton:{display:"flex",flexDirection:"column",justifyContent:"center",fontColor:"white",margin:0,padding:e.spacing.unit},container:{display:"flex",flexDirection:"column",flexWrap:"noWrap",justifyContent:"center",alignItems:"center",padding:e.spacing.unit,backgroundColor:"#212121",minWidth:0,order:3},middle:{display:"flex",alignItems:"center"},editFieldButton:{color:"white"},textField:{display:"flex",flexDirection:"row",justifyContent:"flex-start",marginRight:e.spacing.unit,minWidth:"200px",width:"20%",color:"#FAFAFA",rightPadding:10},drawerPaper:{display:"flex",height:200},drawerHeader:Object(R.a)({display:"flex",flexDirection:"row",flexGrow:2,alignItems:"center",backgroundColor:"#3f51b5",color:"white",justifyContent:"space-between",padding:"0 8px",height:"10%"},e.mixins.toolbar),confirmIconGroup:{display:"flex",flexDirection:"row",justifyContent:"flex-end",flexGrow:2,flexWrap:"noWrap"},form:{color:"#FAFAFA",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"90%",flexWrap:"wrap"},menuButton:{marginLeft:2,marginRight:2}}},{withTheme:!0})(Or));function jr(){var e=Object(m.a)(["fields.cancelNewField"]);return jr=function(){return e},e}function gr(){var e=Object(m.a)(["fields.saveEditedField"]);return gr=function(){return e},e}function hr(){var e=Object(m.a)(["fields.farmTextChanged"]);return hr=function(){return e},e}function vr(){var e=Object(m.a)(["fields.fieldTextChanged"]);return vr=function(){return e},e}function yr(){var e=Object(m.a)(["User.handleFarmCleared"]);return yr=function(){return e},e}function wr(){var e=Object(m.a)(["User.handleFieldCleared"]);return wr=function(){return e},e}function Cr(){var e=Object(m.a)(["AutocompleteSearch.handleFieldEdited"]);return Cr=function(){return e},e}function kr(){var e=Object(m.a)(["User.currentSelection.field.newFieldDisabled"]);return kr=function(){return e},e}function Sr(){var e=Object(m.a)(["User.addFarmClicked"]);return Sr=function(){return e},e}function Ir(){var e=Object(m.a)(["User.addFieldClicked"]);return Ir=function(){return e},e}function xr(){var e=Object(m.a)(["fields.new_field.farm.id"]);return xr=function(){return e},e}function Nr(){var e=Object(m.a)(["fields.new_field.id"]);return Nr=function(){return e},e}function Fr(){var e=Object(m.a)(["fields.new_field.farm.suggestionsOpen"]);return Fr=function(){return e},e}function Er(){var e=Object(m.a)(["fields.new_field.field.suggestionsOpen"]);return Er=function(){return e},e}function _r(){var e=Object(m.a)(["fields.records"]);return _r=function(){return e},e}function Dr(){var e=Object(m.a)(["fields.new_field.farm.name"]);return Dr=function(){return e},e}function Tr(){var e=Object(m.a)(["fields.new_field.name"]);return Tr=function(){return e},e}var Wr=function(e){function t(){return Object(j.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return f.a.createElement("div",{className:t.editFieldDrawer},f.a.createElement("div",{className:t.drawerHeader},f.a.createElement("label",{htmlFor:"Instructions"},"(1) Enter names (2) Draw field on the map (3) Save")),f.a.createElement("div",{className:t.editFieldDrawerBottom},f.a.createElement("div",{className:t.editFieldText},f.a.createElement(rt.b,{label:"Field name",placeholder:'e.g., "Baker 135"...',value:this.props.fieldText,onChange:function(t){return e.props.fieldTextChanged({value:t.target.value})}}),f.a.createElement(rt.b,{label:"Farm Name",placeholder:'e.g., "Baker"',type:"farm",value:this.props.farmText,onChange:function(t){return e.props.farmTextChanged({value:t.target.value})}})),f.a.createElement("div",{className:t.editFieldButtons},f.a.createElement(rt.a,{className:t.editFieldButton,variant:"raised",color:"primary",onClick:function(){e.props.saveEdited({confirm:!0})},disabled:this.props.disabledNewField},"Save"),f.a.createElement(rt.a,{className:t.editFieldButton,variant:"raised",color:"secondary",onClick:function(){e.props.cancelNewField()}},"Discard"))))}}]),t}(f.a.Component),Lr=Object(O.connect)({fieldText:Object(C.state)(Tr()),farmText:Object(C.state)(Dr()),fields:Object(C.state)(_r()),fieldSuggestionsOpen:Object(C.state)(Er()),farmSuggestionsOpen:Object(C.state)(Fr()),fieldId:Object(C.state)(Nr()),farmId:Object(C.state)(xr()),addFieldClicked:Object(C.signal)(Ir()),addFarmClicked:Object(C.signal)(Sr()),disabledNewField:Object(C.state)(kr()),editFieldClicked:Object(C.signal)(Cr()),fieldCleared:Object(C.signal)(wr()),farmCleared:Object(C.signal)(yr()),fieldTextChanged:Object(C.signal)(vr()),farmTextChanged:Object(C.signal)(hr()),saveEdited:Object(C.signal)(gr()),cancelNewField:Object(C.signal)(jr())},Object(w.withStyles)(function(e){return{title:{},drawerHeader:{display:"flex",flexDirection:"row",flexGrow:2,alignItems:"center",backgroundColor:"#3f51b5",color:"white",justifyContent:"center",width:"100%",padding:"10px"},hide:{display:"none"},editFieldButtons:{display:"flex",justifyContent:"space-evenly",alignItems:"center",flexDirection:"column"},editFieldText:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",height:"128px"},editFieldDrawerBottom:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",width:"100%"},editFieldDrawer:{display:"flex",flexDirection:"column",order:3,alignItems:"center"},textField:{display:"flex",flexDirection:"row",justifyContent:"flex-start",marginRight:.25*e.spacing.unit,minWidth:"200px",width:"20%",color:"#FAFAFA",rightPadding:10}}},{withTheme:!0})(Wr)),Ur=n(531);function Zr(){var e=Object(m.a)(["StatsBar.handleClosePlanned"]);return Zr=function(){return e},e}function Mr(){var e=Object(m.a)(["StatsBar.handleCloseStarted"]);return Mr=function(){return e},e}function Ar(){var e=Object(m.a)(["StatsBar.handleCloseCompleted"]);return Ar=function(){return e},e}function Rr(){var e=Object(m.a)(["StatsBar.handleUpdateAction"]);return Rr=function(){return e},e}function Vr(){var e=Object(m.a)(["OpsList.planned.totalFields"]);return Vr=function(){return e},e}function Br(){var e=Object(m.a)(["OpsList.planned.percentage"]);return Br=function(){return e},e}function Gr(){var e=Object(m.a)(["OpsList.planned.area"]);return Gr=function(){return e},e}function Xr(){var e=Object(m.a)(["OpsList.started.totalFields"]);return Xr=function(){return e},e}function Yr(){var e=Object(m.a)(["OpsList.started.percentage"]);return Yr=function(){return e},e}function Jr(){var e=Object(m.a)(["OpsList.started.area"]);return Jr=function(){return e},e}function zr(){var e=Object(m.a)(["OpsList.completed.totalFields"]);return zr=function(){return e},e}function Hr(){var e=Object(m.a)(["OpsList.completed.percentage"]);return Hr=function(){return e},e}function Pr(){var e=Object(m.a)(["OpsList.completed.area"]);return Pr=function(){return e},e}function qr(){var e=Object(m.a)(["operations.connection_id"]);return qr=function(){return e},e}function Qr(){var e=Object(m.a)(["window.isSmall"]);return Qr=function(){return e},e}function Kr(){var e=Object(m.a)(["window.orientation"]);return Kr=function(){return e},e}function $r(){var e=Object(m.a)(["App.is_mobile"]);return $r=function(){return e},e}var ea=function(e){function t(){return Object(j.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.props;return f.a.createElement("div",{className:this.props.OpsListCompletedArea?e.flexContainer:e.hidden},f.a.createElement("div",{className:"".concat(e.pill," ").concat(e.completed)},(this.props.isSmall?"":"Completed ")+Math.round(t.OpsListCompletedArea)+" ac ("+Math.round(t.OpsListCompletedPercentage)+"%)"),f.a.createElement("div",{className:"".concat(e.pill," ").concat(e.started)},(this.props.isSmall?"":"Started ")+Math.round(t.OpsListStartedArea)+" ac ("+Math.round(t.OpsListStartedPercentage)+"%)"),f.a.createElement("div",{className:"".concat(e.pill," ").concat(e.planned)},(this.props.isSmall?"":"Planned ")+Math.round(t.OpsListPlannedArea)+" ac ("+Math.round(t.OpsListPlannedPercentage)+"%)"))}}]),t}(f.a.Component);Object(O.connect)({appIsMobile:Object(C.state)($r()),orientation:Object(C.state)(Kr()),isSmall:Object(C.state)(Qr()),connection_id:Object(C.state)(qr()),OpsListCompletedArea:Object(C.state)(Pr()),OpsListCompletedPercentage:Object(C.state)(Hr()),OpsListCompletedTotalFields:Object(C.state)(zr()),OpsListStartedArea:Object(C.state)(Jr()),OpsListStartedPercentage:Object(C.state)(Yr()),OpsListStartedTotalFields:Object(C.state)(Xr()),OpsListPlannedArea:Object(C.state)(Gr()),OpsListPlannedPercentage:Object(C.state)(Br()),OpsListPlannedTotalFields:Object(C.state)(Vr()),handleUpdateAction:Object(C.signal)(Rr()),handleCloseCompleted:Object(C.signal)(Ar()),handleCloseStarted:Object(C.signal)(Mr()),handleClosePlanned:Object(C.signal)(Zr())},Object(Ur.withStyles)(function(e){return{hidden:{display:"none"},flexContainer:{display:"flex",justifyContent:"space-evenly",backgroundColor:"#333333",color:e.palette.common.white,order:2},pill:{textAlign:"center",padding:"5px",marginTop:"5px",marginBottom:"5px",alignItems:"center",borderRadius:"3px",color:"#FFFFFF",textShadow:"1px 1px #000000"},completed:{backgroundColor:"#66BB6A"},started:{backgroundColor:"#F0C000"},planned:{backgroundColor:"#CC0000"}}},{withTheme:!0})(ea));function ta(){var e=Object(m.a)(["operators.cancelNewOperator"]);return ta=function(){return e},e}function na(){var e=Object(m.a)(["operators.saveEditedOperator"]);return na=function(){return e},e}function ra(){var e=Object(m.a)(["operators.lastNameTextChanged"]);return ra=function(){return e},e}function aa(){var e=Object(m.a)(["operators.firstNameTextChanged"]);return aa=function(){return e},e}function oa(){var e=Object(m.a)(["operators.addOperatorClicked"]);return oa=function(){return e},e}function ia(){var e=Object(m.a)(["User.handleOperatorCleared"]);return ia=function(){return e},e}function ca(){var e=Object(m.a)(["AutocompleteSearch.handleOperatorEdited"]);return ca=function(){return e},e}function sa(){var e=Object(m.a)(["User.currentSelection.operator.newOperatorDisabled"]);return sa=function(){return e},e}function la(){var e=Object(m.a)(["operators.new_operator.id"]);return la=function(){return e},e}function ua(){var e=Object(m.a)(["operators.new_operator.operator.suggestionsOpen"]);return ua=function(){return e},e}function da(){var e=Object(m.a)(["operators.records"]);return da=function(){return e},e}function pa(){var e=Object(m.a)(["operators.new_operator.lastName"]);return pa=function(){return e},e}function fa(){var e=Object(m.a)(["operators.new_operator.firstName"]);return fa=function(){return e},e}var ba=function(e){function t(){return Object(j.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return f.a.createElement("div",{className:t.operatorDrawer},f.a.createElement("div",{className:t.drawerHeader},f.a.createElement("label",{htmlFor:"Instructions"},"(1) Enter names (2) Save")),f.a.createElement("div",{className:t.operatorDrawerBottom},f.a.createElement("div",{className:t.editOperatorText},f.a.createElement(rt.b,{label:"Operator name",placeholder:'e.g., "Bob"',value:this.props.firstNameText,onChange:function(t){return e.props.firstNameTextChanged({value:t.target.value})}}),f.a.createElement(rt.b,{label:"Last Name",placeholder:'e.g., "Alice"',type:"lastname",value:this.props.lastNameText,onChange:function(t){return e.props.lastNameTextChanged({value:t.target.value})}})),f.a.createElement("div",{className:t.editOperatorButtons},f.a.createElement(rt.a,{className:t.editOperatorButton,variant:"raised",color:"primary",onClick:function(){e.props.saveEdited({confirm:!0})},disabled:this.props.disabledNewOperator},"Save"),f.a.createElement(rt.a,{className:t.editOperatorButton,variant:"raised",color:"secondary",onClick:function(){e.props.cancelNewOperator()}},"Discard"))))}}]),t}(f.a.Component),Oa=Object(O.connect)({firstNameText:Object(C.state)(fa()),lastNameText:Object(C.state)(pa()),operators:Object(C.state)(da()),operatorSuggestionsOpen:Object(C.state)(ua()),operatorId:Object(C.state)(la()),disabledNewOperator:Object(C.state)(sa()),editOperatorClicked:Object(C.signal)(ca()),operatorCleared:Object(C.signal)(ia()),addOperatorClicked:Object(C.signal)(oa()),firstNameTextChanged:Object(C.signal)(aa()),lastNameTextChanged:Object(C.signal)(ra()),saveEdited:Object(C.signal)(na()),cancelNewOperator:Object(C.signal)(ta())},Object(w.withStyles)(function(e){return{title:{},drawerHeader:{display:"flex",flexDirection:"row",flexGrow:2,alignItems:"center",backgroundColor:"#3f51b5",color:"white",justifyContent:"center",width:"100%",padding:"10px"},hide:{display:"none"},editOperatorButtons:{display:"flex",justifyContent:"space-evenly",alignItems:"center",flexDirection:"column"},editOperatorText:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",height:"128px"},operatorDrawerBottom:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",width:"100%"},operatorDrawer:{display:"flex",flexDirection:"column",order:3,alignItems:"center"},textOperator:{display:"flex",flexDirection:"row",justifyContent:"flex-start",marginRight:.25*e.spacing.unit,minWidth:"200px",width:"20%",color:"#FAFAFA"}}},{withTheme:!0})(ba));function ma(){var e=Object(m.a)(["FldList.loadData"]);return ma=function(){return e},e}function ja(){var e=Object(m.a)(["App.init"]);return ja=function(){return e},e}function ga(){var e=Object(m.a)(["window.resized"]);return ga=function(){return e},e}function ha(){var e=Object(m.a)(["window"]);return ha=function(){return e},e}function va(){var e=Object(m.a)(["operators.editing"]);return va=function(){return e},e}function ya(){var e=Object(m.a)(["fields.editing"]);return ya=function(){return e},e}var wa=function(e){function t(){return Object(j.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"updateDimensions",value:function(){this.props.windowResized({width:window.innerWidth,height:window.innerHeight})}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateDimensions.bind(this)),this.updateDimensions()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions.bind(this))}},{key:"componentWillMount",value:function(){this.props.init({}),this.props.loadFieldListData({switchTab:0})}},{key:"render",value:function(){var e=this.props.classes;return f.a.createElement("div",{className:e.app},f.a.createElement(et,null),f.a.createElement(dt,null),f.a.createElement(qt,null),f.a.createElement(Ln,null),f.a.createElement(mr,null),!this.props.operatorEditing&&this.props.fieldEditing?f.a.createElement(Lr,null):null,!this.props.fieldEditing&&this.props.operatorEditing?f.a.createElement(Oa,null):null)}}]),t}(f.a.Component),Ca=Object(O.connect)({fieldEditing:Object(C.state)(ya()),operatorEditing:Object(C.state)(va()),window:Object(C.state)(ha()),windowResized:Object(C.signal)(ga()),init:Object(C.signal)(ja()),loadFieldListData:Object(C.signal)(ma())},Object(w.withStyles)(function(e){return{root:{width:"100vw",height:"100vh",marginTop:0*e.spacing.unit,zIndex:1},app:{display:"flex",flexDirection:"column",height:"100vh",zIndex:1,top:0},statsBar:{display:"flex",order:2}}},{withTheme:!0})(wa)),ka=n(8),Sa=n(170),Ia=n(532),xa=n.n(Ia),Na=n(336),Fa=n.n(Na),Ea=n(533),_a=n.n(Ea),Da=n(1090).default,Ta={scope:"oada.awesome:all",title:"FieldWorkApp"};Da=Object({NODE_ENV:"production",PUBLIC_URL:"/FieldWorkApp"}).REACT_APP_PROD_DEV?n(1092).default:n(1094).default;var Wa=Object(R.a)({},Ta,Da),La=(Wa.oadaDomain,Wa.websiteDomain,Wa.websiteDomain,Wa.metadata,Wa.devtoolsPort,Wa.defaultNewConnectionURL,{appName:Wa.appName,contentType:Wa.contentType,bookmarksOperations:Wa.bookmarksOperations,bookmarksFields:Wa.bookmarksFields,model:{tags:{}},is_mobile:!1,emptyDataSet:!1,settings:{},view:{editing:!1,settings:{}}}),Ua=n(534),Za=n.n(Ua),Ma=n(535),Aa=n.n(Ma),Ra=n(41),Va=n.n(Ra),Ba=n(5),Ga=n(43),Xa=n.n(Ga);function Ya(){var e=Object(m.a)(["value"]);return Ya=function(){return e},e}function Ja(){var e=Object(m.a)(["DataTabs.value"]);return Ja=function(){return e},e}var za=[Object(Ba.set)(Object(C.state)(Ja()),Object(C.props)(Ya()))],Ha=[function(e){var t=e.props;e.state.set("DataTabs.value",t.index)}],Pa=[function(e){e.props;var t=e.state;t.set("DataTabs.value",1*!(1*t.get("DataTabs.value")))}];var qa=[function(e){e.props;var t=e.state,n=t.get("User.currentSelection.operation.id"),r=[];n&&(r=Object.values(t.get("".concat("operations.records."+n+".fields"))));return Object.keys(t.get("OpsList")||{}).map(function(e){t.set("".concat("OpsList."+e+".fields"),r.filter(function(t){return t.status===e}).map(function(e){return Object(R.a)({since:e.history?e.history[0].timestamp:"",by:e.history?e.history[0].marker:"",id:e.id?e.id:""},t.get("fields.records.".concat(e.id)))}))}),{value:0}},za],Qa=[function(e){e.props;var t=e.state;Object.keys(t.get("OpsList")).map(function(e){t.set("".concat("OpsList."+e+".fields"),[])})}];var Ka=[function(e){var t=e.props;e.state.toggle("".concat("OpsList."+t.status+".collapse"))}];var $a=[function(e){e.props;var t=e.state,n=t.get("OpsList"),r=Object.keys(n||{}).map(function(e){return n[e].fields.reduce(function(e,t){return e+(t.boundary?t.boundary.area:0)},0)}).reduce(function(e,t){return e+t},0);for(var a in n){var o=n[a].fields.reduce(function(e,t){return e+(t.boundary?t.boundary.area:0)},0),i=r?Math.round(1e4*(o/r+1e-5))/100:0,c=n[a].fields?n[a].fields.length:0;t.set("OpsList.".concat(a,".area"),o.toFixed(2)),t.set("OpsList.".concat(a,".percentage"),i.toFixed(2)),t.set("OpsList.".concat(a,".totalFields"),c)}}];function eo(){var e=Object(m.a)(["statusValue"]);return eo=function(){return e},e}function to(){var e=Object(m.a)(["type"]);return to=function(){return e},e}function no(){var e=Object(m.a)(["operations.loading"]);return no=function(){return e},e}function ro(){var e=Object(m.a)(["operations.loading"]);return ro=function(){return e},e}function ao(){var e=Object(m.a)(["connection_id"]);return ao=function(){return e},e}function oo(){var e=Object(m.a)(["operations.connection_id"]);return oo=function(){return e},e}function io(){var e=Object(m.a)(["type"]);return io=function(){return e},e}function co(){var e=Object(m.a)(["operations.loading"]);return co=function(){return e},e}function so(){var e=Object(m.a)(["connection_id"]);return so=function(){return e},e}function lo(){var e=Object(m.a)(["oada.",".bookmarks.operations"]);return lo=function(){return e},e}function uo(){var e=Object(m.a)(["operations.loading"]);return uo=function(){return e},e}function po(){var e=Object(m.a)(["connection_id"]);return po=function(){return e},e}function fo(){var e=Object(m.a)(["connections.operations.connection_id"]);return fo=function(){return e},e}function bo(){var e=Object(m.a)(["connection_id"]);return bo=function(){return e},e}function Oo(){var e=Object(m.a)(["Connections.connection_id"]);return Oo=function(){return e},e}function mo(){var e=Object(m.a)(["connection_id"]);return mo=function(){return e},e}function jo(){var e=Object(m.a)(["operations.connection_id"]);return jo=function(){return e},e}function go(){var e=Object(m.a)(["Connections.connection_id"]);return go=function(){return e},e}function ho(){var e=Object(m.a)(["App.emptyDataSet"]);return ho=function(){return e},e}function vo(){var e=Object(m.a)(["App.emptyDataSet"]);return vo=function(){return e},e}function yo(){var e=Object(m.a)(["connection_id"]);return yo=function(){return e},e}function wo(){var e=Object(m.a)(["oada.",".bookmarks.operations"]);return wo=function(){return e},e}function Co(){var e=Object(m.a)(["App.emptyDataSet"]);return Co=function(){return e},e}function ko(){var e=Object(m.a)(["App.emptyDataSet"]);return ko=function(){return e},e}function So(){var e=Object(m.a)(["connection_id"]);return So=function(){return e},e}function Io(){var e=Object(m.a)(["oada.",".bookmarks.operations"]);return Io=function(){return e},e}var xo="/bookmarks/operations",No="application/vnd.oada.yield.1+json",Fo={bookmarks:{_type:"application/vnd.oada.bookmarks.1+json",_rev:"0-0",operations:{_type:"application/vnd.oada.yield.1+json",_rev:"0-0","*":{_type:"application/vnd.oada.yield.1+json",_rev:"0-0"}}}},Eo=Object(ka.sequence)("operations.fetch",[function(e){var t=e.state;e.props;return{connection_id:t.get("operations.connection_id"),path:xo,tree:Fo,watch:{signals:["operations.handleWatchUpdate"]}}},function(e){return{requests:[{connection_id:e.state.get("operations.connection_id"),path:xo,tree:Fo,watch:{signals:["operations.handleWatchUpdate"]}}]}},Va.a.get,Object(Ba.when)(Object(C.state)(Io(),Object(C.props)(So()))),{true:Object(ka.sequence)("fetchOperationsSuccess",[Lo,Uo,qa,$a,Object(Ba.set)(Object(C.state)(ko()),!1)]),false:Object(ka.sequence)("fetchOperationsEmptySet",[function(){return console.log("--\x3e Operations empty set")},Object(Ba.set)(Object(C.state)(Co()),!0)])}]);var _o=Object(ka.sequence)("operations.fetchNoWatch",[function(e){var t=e.state;e.props;return{connection_id:t.get("operations.connection_id"),path:xo,tree:Fo}},Object(Ba.when)(Object(C.state)(wo(),Object(C.props)(yo()))),{true:Object(ka.sequence)("fetchOperationsSuccess",[Lo,Uo,qa,$a,Object(Ba.set)(Object(C.state)(vo()),!1)]),false:Object(ka.sequence)("fetchOperationsEmptySetNoWatch",[function(){return console.log("--\x3e Operations empty set no watch")},Object(Ba.set)(Object(C.state)(ho()),!0)])}]),Do=(Object(ka.sequence)("operations.addBookmarksOperations",[function(e){e.props;var t=e.state,n={connection_id:t.get("operations.connection_id"),data:{},type:No,path:xo,tree:Fo},r=[];return r.push(n),{connection_id:t.get("operations.connection_id"),requests:r,domain:t.get("oada_domain")}},Va.a.put,Eo]),Object(ka.sequence)("operations.init",[function(e){var t=e.state,n=JSON.parse(localStorage.getItem("_FieldWorkApp.Connections"));if(console.log("--\x3e operations.init storage connections --\x3e ",n),n&&n.connection_id){t.set("Connections.show",!1);var r=n.connection_id,a=n.oada_domain;console.log("--\x3e operations init connectionId and OadaDomain",r,a),t.set("operations.connection_id",r),t.set("Connections.oada_domain",a),t.set("Connections.oada_domain_text",a)}},Object(Ba.when)(Object(C.state)(go())),{true:[Va.a.connect],false:[Va.a.connect,Object(Ba.set)(Object(C.state)(jo()),Object(C.props)(mo())),Object(Ba.set)(Object(C.state)(Oo()),Object(C.props)(bo())),Object(Ba.set)(Object(C.state)(fo()),Object(C.props)(po()))]},Object(Ba.set)(Object(C.state)(uo()),!0),Eo,Object(Ba.when)(Object(C.state)(lo(),Object(C.props)(so()))),{true:[],false:[]},Object(Ba.set)(Object(C.state)(co()),!1),Object(Ba.set)(Object(C.props)(io()),"operations")]));var To=Object(ka.sequence)("operations.refresh",[Object(Ba.set)(Object(C.state)(oo()),Object(C.props)(ao())),Object(Ba.set)(Object(C.state)(ro()),!0),_o,Object(Ba.set)(Object(C.state)(no()),!1),Object(Ba.set)(Object(C.props)(to()),"operations")]),Wo=Object(ka.sequence)("operations.handleWatchUpdate",[function(){console.log("--\x3eoperations.handleWatchUpdate")},To,$a]);function Lo(e){e.props;var t=e.state,n=t.get("operations.connection_id"),r=t.get("oada."+n+".bookmarks.operations");if(r)return Xa.a.map(Object.keys(r||{}),function(e){if("_"===e[0]||"operations"===e);else{var a=t.get("oada.".concat(n,".bookmarks.operations.").concat(e));if(a&&a.id){var o=t.get("User.currentSelection.operation.id");t.set("User.operations."+e,{id:a.id}),o||(t.set("User.currentSelection.operation.id",a.id),t.set("User.currentSelection.operation.inputText",a.label),t.set("User.currentSelection.operation.placeholder","Operation")),t.set("operations.records.".concat(e),r[e])}}}).then(function(){})}function Uo(e){e.props;var t=e.state,n=t.get("operations.connection_id"),r=t.get("oada."+n+".bookmarks.operations");if(r)return Xa.a.map(Object.keys(r||{}),function(e){if("_"===e[0]||"operations"===e);else{var a=t.get("oada.".concat(n,".bookmarks.operations.").concat(e));a&&a.id&&t.set("operations.records.".concat(e),r[e])}}).then(function(){})}var Zo=[function(e){var t=e.props,n=(e.state,{created:Date.now(),id:t.item.id,fields:t.item.fields||{},label:t.item.label});return{id:n.id,operation:n,uuid:n.id}},function(e){var t=e.props,n=e.state,r=n.get("operations.connection_id"),a={connection_id:r,data:t.operation,path:xo+"/"+t.operation.id,tree:Fo},o=[];return o.push(a),{connection_id:r,requests:o,domain:n.get("oada_domain")}},Va.a.put,_o];var Mo=[function(e){e.props;var t=e.state,n=t.get("".concat("operations.records."+t.get("User.currentSelection.operation.id"))),r={connection_id:t.get("operations.connection_id"),data:n,type:No,path:xo+"/"+t.get("User.currentSelection.operation.id"),tree:Fo},a=[];return a.push(r),{connection_id:t.get("operations.connection_id"),requests:a,domain:t.get("oada_domain")}},Va.a.put];var Ao=[function(e){e.props;var t=e.state,n=t.get("operations.connection_id"),r={connection_id:n,type:No,path:xo+"/"+t.get("User.currentSelection.operation.id")+"/fields/"+t.get("fields.selectedId")},a=[];return a.push(r),{connection_id:n,requests:a,domain:t.get("oada_domain")}},Va.a.delete,function(e){e.props;var t=e.state;t.unset("".concat("operations.records."+t.get("User.currentSelection.operation.id")+".fields."+t.get("fields.selectedId")))}],Ro=[Object(Ba.equals)(Object(C.props)(eo())),{unplanned:[Ao],otherwise:[Mo]}],Vo=[Ro],Bo=n(19),Go=[function(e){var t=e.props,n=e.state;if(n.get("fields.editing"))return{value:2};var r=Object.keys(n.get("fields.records"));return r.map(function(e){var t=n.get("operations.records");t&&n.set("".concat("FldList."+e+".operations"),Object.values(t||{}).filter(function(t){return t.hasOwnProperty("fields")&&t.fields.hasOwnProperty(e)}).reduce(function(e,t){return e[t.id]={id:t.id,collapse:!0},e},{}))}),t.switchTab?{value:t.switchTab}:{value:1}}],Xo=[function(e){var t=e.props;e.state.toggle("".concat("FldList."+t.field_id+".operations."+t.operation_id+".collapse"))}],Yo=[function(e){var t=e.props;e.state.toggle("".concat("FldList."+t.field_id+".chronologyCollapse"))}];var Jo=n(244),zo=n.n(Jo);function Ho(){var e=Object(m.a)(["MapPanel.dragging_marker"]);return Ho=function(){return e},e}function Po(){var e=Object(m.a)(["MapPanel.dragging_marker"]);return Po=function(){return e},e}function qo(){var e=Object(m.a)(["MapPanel.moving"]);return qo=function(){return e},e}function Qo(){var e=Object(m.a)(["MapPanel.moving"]);return Qo=function(){return e},e}var Ko=[Object(Ba.set)(Object(C.state)(Qo()),!0)],$o=[Object(Ba.set)(Object(C.state)(qo()),!1)],ei=[function(e){var t=e.props;e.state.push("fields.new_field.boundary.geojson.coordinates.0",t.pt)},si,li,cc],ti=[function(e){var t=e.props,n=e.state,r={lat:t.lat,lng:t.lng};n.set("MapPanel.current_location",r)}],ni=[Object(Ba.set)(Object(C.state)(Po()),!1)],ri=[Object(Ba.set)(Object(C.state)(Ho()),!0)],ai=[function(e){var t=e.props;e.state.set("fields.new_field.boundary.geojson.coordinates.0.".concat(t.idx),[t.lng,t.lat])},si,li],oi=[function(e){var t=e.props,n=e.state;n.set("MapPanel.center",[t.latlng.lat,t.latlng.lng]),n.set("MapPanel.zoom",t.zoom)}],ii=[function(e){var t=e.state,n=t.get("fields.selectedId");if(!t.get("fields.editing")){var r=t.get("fields.records.".concat(n));r&&t.set("MapPanel.center",r.boundary.centroid)}}],ci=[function(e){var t=e.props,n=e.state,r=n.get("fields.new_field");r.boundary.geojson.coordinates[0].length>t.index&&(r.boundary.geojson.coordinates[0].splice(t.index,1),n.set("fields.new_field",r))},si,li];function si(e){var t=e.state,n=t.get("fields.new_field"),r=0;n.boundary.geojson&&n.boundary.geojson.coordinates[0].length>2&&(r=zo.a.geometry(n.boundary.geojson)/4046.86),t.set("fields.new_field.boundary.area",r),function(e){var t=e.state,n=t.get("fields.new_field");n.boundary.geojson&&n.boundary.geojson.coordinates[0].length>2?t.set("User.currentSelection.field.coordinatesOk",!0):(t.set("User.currentSelection.field.newFieldDisabled",!0),t.set("User.currentSelection.field.coordinatesOk",!1))}({state:t})}function li(e){e.props;var t=e.state,n=function(e){var t=e.coordinates[0];if(t.length>0){for(var n=t[0][1],r=t[0][1],a=t[0][0],o=t[0][0],i=0;i<t.length;i++)t[i][1]>n&&(n=t[i][1]),t[i][1]<r&&(r=t[i][1]),t[i][0]>a&&(a=t[i][0]),t[i][0]<o&&(o=t[i][0]);var c={north:n,south:r,east:a,west:o};return c}return null}(t.get("fields.new_field.boundary.geojson")),r=null,a=null;n&&(r=(n.north+n.south)/2,a=(n.east+n.west)/2),t.set("fields.new_field.boundary.bbox",n),t.set("fields.new_field.boundary.centroid",[r,a])}function ui(){var e=Object(m.a)(["BottomDrawer.operatorMenuOpen"]);return ui=function(){return e},e}function di(){var e=Object(m.a)(["BottomDrawer.operatorMenuOpen"]);return di=function(){return e},e}function pi(){var e=Object(m.a)(["BottomDrawer.open"]);return pi=function(){return e},e}function fi(){var e=Object(m.a)(["BottomDrawer.menu"]);return fi=function(){return e},e}function bi(){var e=Object(m.a)(["BottomDrawer.open"]);return bi=function(){return e},e}var Oi=[Object(Ba.toggle)(Object(C.state)(bi()))],mi=[Object(Ba.set)(Object(C.state)(fi()),"status-update"),Object(Ba.set)(Object(C.state)(pi()),!0)],ji=[Object(Ba.set)(Object(C.state)(di()),!0)],gi=[Object(Ba.set)(Object(C.state)(ui()),!1)],hi=n(536),vi=n.n(hi),yi=n(537),wi=n.n(yi),Ci=n(200);function ki(){var e=Object(m.a)(["fields.temp_buffer"]);return ki=function(){return e},e}function Si(){var e=Object(m.a)(["User.currentSelection.field.coordinatesOk"]);return Si=function(){return e},e}function Ii(){var e=Object(m.a)(["fields.selectedId"]);return Ii=function(){return e},e}function xi(){var e=Object(m.a)(["fields.isNewField"]);return xi=function(){return e},e}function Ni(){var e=Object(m.a)(["fields.editing"]);return Ni=function(){return e},e}function Fi(){var e=Object(m.a)(["fields.new_field"]);return Fi=function(){return e},e}function Ei(){var e=Object(m.a)(["fields.temp_buffer"]);return Ei=function(){return e},e}function _i(){var e=Object(m.a)(["fields.new_field"]);return _i=function(){return e},e}function Di(){var e=Object(m.a)(["fields.selectedId"]);return Di=function(){return e},e}function Ti(){var e=Object(m.a)(["item.farm.name"]);return Ti=function(){return e},e}function Wi(){var e=Object(m.a)(["fields.farms.",""]);return Wi=function(){return e},e}function Li(){var e=Object(m.a)(["fields.editing"]);return Li=function(){return e},e}function Ui(){var e=Object(m.a)(["fields.new_field"]);return Ui=function(){return e},e}function Zi(){var e=Object(m.a)(["item"]);return Zi=function(){return e},e}function Mi(){var e=Object(m.a)(["farm"]);return Mi=function(){return e},e}function Ai(){var e=Object(m.a)(["id"]);return Ai=function(){return e},e}function Ri(){var e=Object(m.a)(["User.currentSelection.field.coordinatesOk"]);return Ri=function(){return e},e}function Vi(){var e=Object(m.a)(["User.currentSelection.field.newFieldDisabled"]);return Vi=function(){return e},e}function Bi(){var e=Object(m.a)(["fields.isNewField"]);return Bi=function(){return e},e}function Gi(){var e=Object(m.a)(["fields.editing"]);return Gi=function(){return e},e}var Xi=247105e-9,Yi={bookmarks:{_type:"application/vnd.oada.bookmarks.1+json",_rev:"0-0",fields:{_type:"application/vnd.oada.fields.1+json",_rev:"0-0","fields-index":{"*":{_type:"application/vnd.oada.field.1+json",_rev:"0-0","fields-index":{"*":{_type:"application/vnd.oada.field.1+json",_rev:"0-0"}}}}}}},Ji=[oc,cc].concat(Object(Bo.a)(Go),[nc,ic,Object(Ba.set)(Object(C.state)(Gi()),!0),Object(Ba.set)(Object(C.state)(Bi()),!0)]),zi=[nc,function(e){e.props;var t=e.state,n=t.get("User.currentSelection.operation.id"),r=t.get("fields.selectedId"),a=t.get("operations.records.".concat(n,".fields.").concat(r,".status")),o=t.get("operations.records.".concat(n,".fields.").concat(r,".history.0.marker"));a&&t.set("User.currentSelection.status.status",a);o&&(t.set("User.currentSelection.status.marker",o),t.set("User.label",o))},ic].concat(Object(Bo.a)(Go),Object(Bo.a)(ii),Object(Bo.a)(mi));function Hi(e){e.props;var t=e.state,n=t.get("fields.connection_id"),r=t.get("fields.records");return Xa.a.map(Object.keys(r||{}),function(e){return t.unset("fields.records.".concat(e))}).then(function(){var e=t.get("oada.".concat(n,".bookmarks.fields"));return e?Xa.a.map(Object.keys(e["fields-index"]||{}),function(n){return e["fields-index"][n]?Xa.a.map(Object.keys(e["fields-index"][n]["fields-index"]||{}),function(r){var a=e["fields-index"][n]["fields-index"][r],o={id:r,name:a.name,farm:{id:n,name:e["fields-index"][n].name}};if(a.boundary){var i=vi()(a.boundary.geojson);o.boundary={geojson:a.boundary.geojson,area:zo.a.geometry(a.boundary.geojson)*Xi,centroid:i.geometry.coordinates.reverse(),bbox:wi()(a.boundary.geojson),visible:!0}}return t.set("fields.records.".concat(r),o)}):void 0}):void 0}).then(function(){})}function Pi(e){e.props;var t=e.state,n=t.get("fields.connection_id"),r=t.get("fields.farms");return Xa.a.map(Object.keys(r||{}),function(e){return t.unset("fields.farms.".concat(e))}).then(function(){var e=t.get("oada.".concat(n,".bookmarks.fields"));return e?Xa.a.map(Object.keys(e["fields-index"]||{}),function(n){if(e["fields-index"][n]&&e["fields-index"][n].name){var r={id:n,name:e["fields-index"][n].name};return t.set("fields.farms.".concat(e["fields-index"][n].name),r)}}):void 0}).then(function(){})}var qi=[function(e){e.state;var t=e.props;return{data:{_id:"resources/"+t.item.farm.id,name:t.item.farm.name}}},function(e){var t=e.props;return{connection_id:e.state.get("operations.connection_id"),data:t.data,path:"/bookmarks/fields/fields-index/".concat(t.item.farm.id),tree:Yi}},function(e){var t=e.props,n=e.state,r={_id:"resources/"+t.item.farm.id,name:t.item.farm.name},a=[];return a.push({connection_id:n.get("operations.connection_id"),data:r,path:"/bookmarks/fields/fields-index/".concat(t.item.farm.id),tree:Yi}),{requests:a}},Va.a.put];var Qi=[Object(Ba.set)(Object(C.state)(Vi()),!0),Object(Ba.set)(Object(C.state)(Ri()),!1)],Ki=[function(e){var t=e.props,n=(e.state,{_id:"resources/"+t.item.id,name:t.item.name,boundary:{geojson:t.item.boundary.geojson}});return{id:t.item.id,field:n}},function(e){var t=e.props,n=e.state,r=n.get("fields.farms.".concat(t.item.farm.name)),a=t.item.farm.id;r&&(a=n.get("fields.farms.".concat(t.item.farm.name,".id")));var o=[];return o.push({connection_id:n.get("operations.connection_id"),data:t.field,path:"/bookmarks/fields/fields-index/".concat(a,"/fields-index/").concat(t.id),tree:Yi}),{requests:o}},Va.a.put,Qi],$i=[nc,ic].concat(Object(Bo.a)(ii)),ec=[Object(Ba.set)("field.records.".concat(Object(C.props)(Ai()),".farm"),Object(C.props)(Mi()))],tc=[Object(Ba.set)(Object(C.props)(Zi()),Object(C.state)(Ui())),Object(Ba.set)(Object(C.state)(Li()),!1),Object(Ba.when)(Object(C.state)(Wi(),Object(C.props)(Ti()))),{true:[],false:[qi]},Ki,Object(Ba.unset)(Object(C.state)(Di())),Object(Ba.set)(Object(C.state)(_i()),{}),Object(Ba.unset)(Object(C.state)(Ei()))];function nc(e){var t=e.props,n=e.state;n.set("fields.selectedId",t.field.id),n.get("fields.editing")||n.set("fields.new_field.field.suggestionsOpen",!1)}function rc(){return{id:Kt()(),name:"",farm:{name:"",id:Kt()()},boundary:{geojson:{type:"Polygon",coordinates:[[]]},visible:!0}}}function ac(e){e.props;var t=e.state,n=(t.get("fields.new_field.farm.name"),rc());return t.set("fields.selectedId",n.id),t.set("fields.records.".concat(n.id),n),{item:n}}function oc(e){e.props;var t=e.state,n=(t.get("fields.new_field.field.name"),rc());return t.set("fields.new_field",n),{field:n}}function ic(e){var t=e.props,n=e.state;if(!n.get("fields.editing")){var r=function(e){e.props;var t=e.state,n=t.get("".concat("operations.records."+t.get("User.currentSelection.operation.id")+".fields."+t.get("fields.selectedId")+".status"));return n||"unplanned"}({props:t,state:n});r&&n.set("User.currentSelection.status.status",r),n.set("User.currentSelection.status.timestamp",function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1;return t<10&&(t="0"+t),n<10&&(n="0"+n),e.getFullYear()+"-"+n+"-"+t}()),n.set("User.currentSelection.status.marker",n.get("User.label"))}}function cc(e){e.props;var t=e.state,n=t.get("fields.selectedId"),r=t.get("fields.new_field.name"),a=t.get("fields.new_field.farm.name"),o=t.get("User.currentSelection.field.coordinatesOk");console.log("selectedId, field_name, farm_name, coordinatesOk, ",n,r,a,o),r&&a&&r.length>0&&a.length>0&&o?t.set("User.currentSelection.field.newFieldDisabled",!1):t.set("User.currentSelection.field.newFieldDisabled",!0)}function sc(e){var t=e.props,n=e.state;n.set("fields.new_field.farm.name",t.value),n.set("fields.new_field.farm.suggestionsOpen",!0),cc({props:t,state:n})}function lc(e){var t=e.props,n=e.state;n.set("fields.new_field.name",t.value),n.set("fields.new_field.field.suggestionsOpen",!0),cc({props:t,state:n})}var uc=Object(Ci.sequence)("fields.handleWatchUpdate",[function(){},Hi,Pi,qa,$a]),dc=Object(Ci.sequence)("fields.cancelNewField",[function(){},Object(Ba.set)(Object(C.state)(Fi()),{}),Object(Ba.set)(Object(C.state)(Ni()),!1),Object(Ba.set)(Object(C.state)(xi()),!1),Object(Ba.unset)(Object(C.state)(Ii())),Object(Ba.set)(Object(C.state)(Si()),!1),Object(Ba.unset)(Object(C.state)(ki()))]),pc=n(197);function fc(){var e=Object(m.a)(["Connections.connection_id"]);return fc=function(){return e},e}var bc="eyJqa3UiOiJodHRwczovL2lkZW50aXR5Lm9hZGEtZGV2LmNvbS9jZXJ0cyIsImtpZCI6ImtqY1NjamMzMmR3SlhYTEpEczNyMTI0c2ExIiwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYifQ.eyJyZWRpcmVjdF91cmlzIjpbImh0dHA6Ly9vcGVuYXRrLmNvbS9GaWVsZFdvcmtBcHAvb2F1dGgyL3JlZGlyZWN0Lmh0bWwiLCJodHRwOi8vbG9jYWxob3N0L29hdXRoMi9yZWRpcmVjdC5odG1sIl0sInRva2VuX2VuZHBvaW50X2F1dGhfbWV0aG9kIjoidXJuOmlldGY6cGFyYW1zOm9hdXRoOmNsaWVudC1hc3NlcnRpb24tdHlwZTpqd3QtYmVhcmVyIiwiZ3JhbnRfdHlwZXMiOlsiYXV0aG9yaXphdGlvbl9jb2RlIl0sInJlc3BvbnNlX3R5cGVzIjpbInRva2VuIiwiY29kZSIsImlkX3Rva2VuIiwiaWRfdG9rZW4gdG9rZW4iLCJjb2RlIGlkX3Rva2VuIiwiY29kZSB0b2tlbiIsImNvZGUgaWRfdG9rZW4gdG9rZW4iXSwiY2xpZW50X25hbWUiOiJPcGVuQVRLIiwiY2xpZW50X3VyaSI6Imh0dHA6Ly9vcGVuYXRrLmNvbSIsImNvbnRhY3RzIjpbIlNhbSBOb2VsIDxzYW5vZWxAcHVyZHVlLmVkdT4iXSwiandrcyI6eyJrZXlzIjpbeyJrdHkiOiJSU0EiLCJuIjoiemF1WkZCdU1kbHYxa1lqelViNHEtXzNtNHNtRnhuZnc0U1lvYUhxN2NpOFNjdFkzeGo3cmRBSHlrUXBuUVZyajZLTzhtYUh2LTBCdlc1TWhjZ2l2a3VZcy16SEV2ZllCZVZCbmN2SGdPa0pQYmM5MUN3X2l3T1k3RUhXQjhoTTdWaUxRVmNfRHYwaDhuSnliQnZoTDA0Q0hRdDdDcE10VllHNmZvSlhjM2RxNTJqTlFiQkhJWjVtN1Z6MUt0eXpvTGNwOE8ybWhhTHA0NVVyM0NfMWVHdHY4bjVOejliV19CaDVYRlliRHh2N0JuaFpOSXcxR0NiampBd210Ym5uTDdHZ2Y0Q3k2MHdSSG1SNHZvZTIxT0lqb0FTcTJqWjAzeDEybVhzN0hQSTNZQjR5Mjl3dlpNdzJnTHpPZFRvcnJxTy10bG1uMWJvUGtXS0pKU1hvQXZ3IiwiZSI6IkFRQUIifV19LCJzb2Z0d2FyZV9pZCI6ImE3MDNiZmRjLTNmYTEtNDk5Zi1iOTA1LTExZjBiNTRmMzgwNyIsInJlZ2lzdHJhdGlvbl9wcm92aWRlciI6Imh0dHBzOi8vaWRlbnRpdHkub2FkYS1kZXYuY29tIiwiaWF0IjoxNTMzODQ2MTEyfQ.Y9BlbqHzOvufADGAW9HG4Yx2rqbg6zPalpcjSS_97Mpg36lOuADGJ4YTQ2iQfRlZjzqBi1sUq3iFhReBfk89Oy2nSEY6RVPnONK5v6a73jce3xGPUWk8DDl3rf3lcrt-IqWFoAieUie7WK5nrPFIe-_xcgYdChnuGrugjO9dGOY",Oc="https://openatk.com/FieldWorkApp/oauth2/redirect.html",mc=Object(ka.sequence)("App.init",[function(e){var t=e.state,n=new Aa.a(window.navigator.userAgent);t.set("App.is_mobile",null!==n.mobile())},function(e){var t=e.state,n=JSON.parse(localStorage.getItem("_FieldWorkApp.Connections"));if(n&&n.connection_id){var r=n.connection_id,a=n.oada_domain;t.set("Connections.show",!1),t.set("operations.connection_id",r),t.set("fields.connection_id",r),t.set("Connections.connection_id",r),t.set("Connections.oada_domain",a),t.set("Connections.oada_domain_text",a)}else t.set("Connections.show",!0)},Object(Ba.when)(Object(C.state)(fc())),{true:Object(ka.sequence)("autoInitSuccess",[function(e){var t=e.state;return{domain:t.get("Connections.oada_domain"),options:{redirect:Oc,metadata:bc,scope:"oada.yield:all"},token:"def",connection_id:t.get("operations.connection_id"),signals:["fields.handleWatchUpdate"]}},pc.init,Hi,Pi,function(e){var t=e.state;return{domain:t.get("Connections.oada_domain"),options:{redirect:Oc,metadata:bc,scope:"oada.yield:all"},token:"def",connection_id:t.get("operations.connection_id")}},Do]),false:[]}]);var jc=[function(e){var t=e.state;e.props;return{connection_id:t.get("operations.connection_id")}},Ra.resetCache,mc];var gc=Za()({target:window.localStorage?localStorage:null,json:!0,sync:{Connections:"Connections"},prefix:"_FieldWorkApp"}),hc=Object(ka.Module)({state:La,signals:i,modules:{LocalCache:gc}});function vc(){var e=Object(m.a)(["Connections.show"]);return vc=function(){return e},e}function yc(){var e=Object(m.a)(["Connections.oada_domain"]);return yc=function(){return e},e}function wc(){var e=Object(m.a)(["Connections.oada_fields_domain"]);return wc=function(){return e},e}function Cc(){var e=Object(m.a)(["Connections.oada_domain"]);return Cc=function(){return e},e}function kc(){var e=Object(m.a)(["Connections.oada_domain"]);return kc=function(){return e},e}function Sc(){var e=Object(m.a)(["Connections.show"]);return Sc=function(){return e},e}function Ic(){var e=Object(m.a)(["Connections.oada_domain"]);return Ic=function(){return e},e}function xc(){var e=Object(m.a)(["domain"]);return xc=function(){return e},e}function Nc(){var e=Object(m.a)(["Connections.oada_domain"]);return Nc=function(){return e},e}function Fc(){var e=Object(m.a)(["domain"]);return Fc=function(){return e},e}function Ec(){var e=Object(m.a)(["Connections.oada_domain_text"]);return Ec=function(){return e},e}function _c(){var e=Object(m.a)(["Connections.oada_domain"]);return _c=function(){return e},e}function Dc(){var e=Object(m.a)(["Connections.show"]);return Dc=function(){return e},e}function Tc(){var e=Object(m.a)(["Connections.show"]);return Tc=function(){return e},e}function Wc(){var e=Object(m.a)(["value"]);return Wc=function(){return e},e}function Lc(){var e=Object(m.a)(["Connections.oada_fields_domain_text"]);return Lc=function(){return e},e}function Uc(){var e=Object(m.a)(["value"]);return Uc=function(){return e},e}function Zc(){var e=Object(m.a)(["Connections.oada_domain_text"]);return Zc=function(){return e},e}function Mc(){var e=Object(m.a)(["Connections.oada_fields_domain_text"]);return Mc=function(){return e},e}function Ac(){var e=Object(m.a)(["Connections.oada_domain_text"]);return Ac=function(){return e},e}function Rc(){var e=Object(m.a)(["Connections.oada_fields_domain"]);return Rc=function(){return e},e}function Vc(){var e=Object(m.a)(["Connections.oada_domain"]);return Vc=function(){return e},e}function Bc(){var e=Object(m.a)(["Connections.oada_token"]);return Bc=function(){return e},e}var Gc="eyJqa3UiOiJodHRwczovL2lkZW50aXR5Lm9hZGEtZGV2LmNvbS9jZXJ0cyIsImtpZCI6ImtqY1NjamMzMmR3SlhYTEpEczNyMTI0c2ExIiwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYifQ.eyJyZWRpcmVjdF91cmlzIjpbImh0dHA6Ly9vcGVuYXRrLmNvbS9GaWVsZFdvcmtBcHAvb2F1dGgyL3JlZGlyZWN0Lmh0bWwiLCJodHRwOi8vbG9jYWxob3N0L29hdXRoMi9yZWRpcmVjdC5odG1sIl0sInRva2VuX2VuZHBvaW50X2F1dGhfbWV0aG9kIjoidXJuOmlldGY6cGFyYW1zOm9hdXRoOmNsaWVudC1hc3NlcnRpb24tdHlwZTpqd3QtYmVhcmVyIiwiZ3JhbnRfdHlwZXMiOlsiYXV0aG9yaXphdGlvbl9jb2RlIl0sInJlc3BvbnNlX3R5cGVzIjpbInRva2VuIiwiY29kZSIsImlkX3Rva2VuIiwiaWRfdG9rZW4gdG9rZW4iLCJjb2RlIGlkX3Rva2VuIiwiY29kZSB0b2tlbiIsImNvZGUgaWRfdG9rZW4gdG9rZW4iXSwiY2xpZW50X25hbWUiOiJPcGVuQVRLIiwiY2xpZW50X3VyaSI6Imh0dHA6Ly9vcGVuYXRrLmNvbSIsImNvbnRhY3RzIjpbIlNhbSBOb2VsIDxzYW5vZWxAcHVyZHVlLmVkdT4iXSwiandrcyI6eyJrZXlzIjpbeyJrdHkiOiJSU0EiLCJuIjoiemF1WkZCdU1kbHYxa1lqelViNHEtXzNtNHNtRnhuZnc0U1lvYUhxN2NpOFNjdFkzeGo3cmRBSHlrUXBuUVZyajZLTzhtYUh2LTBCdlc1TWhjZ2l2a3VZcy16SEV2ZllCZVZCbmN2SGdPa0pQYmM5MUN3X2l3T1k3RUhXQjhoTTdWaUxRVmNfRHYwaDhuSnliQnZoTDA0Q0hRdDdDcE10VllHNmZvSlhjM2RxNTJqTlFiQkhJWjVtN1Z6MUt0eXpvTGNwOE8ybWhhTHA0NVVyM0NfMWVHdHY4bjVOejliV19CaDVYRlliRHh2N0JuaFpOSXcxR0NiampBd210Ym5uTDdHZ2Y0Q3k2MHdSSG1SNHZvZTIxT0lqb0FTcTJqWjAzeDEybVhzN0hQSTNZQjR5Mjl3dlpNdzJnTHpPZFRvcnJxTy10bG1uMWJvUGtXS0pKU1hvQXZ3IiwiZSI6IkFRQUIifV19LCJzb2Z0d2FyZV9pZCI6ImE3MDNiZmRjLTNmYTEtNDk5Zi1iOTA1LTExZjBiNTRmMzgwNyIsInJlZ2lzdHJhdGlvbl9wcm92aWRlciI6Imh0dHBzOi8vaWRlbnRpdHkub2FkYS1kZXYuY29tIiwiaWF0IjoxNTMzODQ2MTEyfQ.Y9BlbqHzOvufADGAW9HG4Yx2rqbg6zPalpcjSS_97Mpg36lOuADGJ4YTQ2iQfRlZjzqBi1sUq3iFhReBfk89Oy2nSEY6RVPnONK5v6a73jce3xGPUWk8DDl3rf3lcrt-IqWFoAieUie7WK5nrPFIe-_xcgYdChnuGrugjO9dGOY",Xc=[Object(Ba.set)(Object(C.state)(Bc()),""),Object(Ba.set)(Object(C.state)(Vc()),""),Object(Ba.set)(Object(C.state)(Rc()),""),Object(Ba.set)(Object(C.state)(Ac()),""),Object(Ba.set)(Object(C.state)(Mc()),"")],Yc=[Object(Ba.set)(Object(C.state)(Zc()),Object(C.props)(Uc()))],Jc=[Object(Ba.set)(Object(C.state)(Lc()),Object(C.props)(Wc()))],zc=[Object(Ba.set)(Object(C.state)(Tc()),!1),function(e){var t=e.state;return{domain:t.get("Connections.oada_domain"),options:{redirect:"http://openatk.com/FieldWorkApp/oauth2/redirect.html",metadata:Gc,scope:"oada.yield:all"},token:"def",connection_id:t.get("operations.connection_id"),signals:["fields.handleWatchUpdate"]}},pc.init,Hi,Pi,function(e){var t=e.state;return{domain:t.get("Connections.oada_domain"),options:{redirect:"http://openatk.com/FieldWorkApp/oauth2/redirect.html",metadata:Gc,scope:"oada.yield:all"},token:"def",connection_id:t.get("operations.connection_id")}},Do,Go],Hc=[Object(Ba.set)(Object(C.state)(Dc()),!1),Object(Ba.set)(Object(C.state)(_c()),Object(C.state)(Ec())),Object(Ba.set)(Object(C.props)(Fc()),Object(C.state)(Nc())),Va.a.resetCache,zc,Object(Ba.set)(Object(C.props)(xc()),Object(C.state)(Ic()))],Pc=[Object(Ba.set)(Object(C.state)(Sc()),!1),Object(Ba.set)(Object(C.state)(kc()),Object(C.state)(Cc())),Object(Ba.set)(Object(C.state)(wc()),Object(C.state)(yc()))],qc=[Object(Ba.set)(Object(C.state)(vc()),!0)];var Qc=Object(ka.Module)({state:{open:!1},signals:{connectionsClicked:qc,signoutClicked:Xc,clearCacheClicked:jc}});function Kc(){var e=Object(m.a)(["SideDrawer.open"]);return Kc=function(){return e},e}var $c=[Object(Ba.toggle)(Object(C.state)(Kc()))],es=Object(ka.Module)({state:{open:!1},signals:c}),ts=Object(ka.Module)({state:{value:0},signals:{handleChange:za,handleChangeIndex:Ha,toggleTab:Pa}}),ns=[function(e){var t=e.props;e.state.set("User.currentSelection.status.status",t.value)},ps].concat(Object(Bo.a)(qa),Object(Bo.a)(Go),Object(Bo.a)(Oi),[Ro,bs]),rs=[function(e){var t=e.props,n=e.state;t.marker&&n.set("User.currentSelection.status.marker",t.marker)}],as=[function(e){var t=e.props,n=e.state;t.timestamp&&n.set("User.currentSelection.status.timestamp",t.timestamp)}],os=[ps].concat(Object(Bo.a)(qa),Object(Bo.a)(Go),Object(Bo.a)(Oi),[bs]),is=[fs].concat(Object(Bo.a)(qa),[$a]),cs=[function(e){e.props;e.state.set("User.currentSelection.operation.id",null)}].concat(Object(Bo.a)(Qa)),ss=[].concat(Object(Bo.a)(Oi),[function(e){var t=e.state,n=!0,r=t.get("User.currentSelection.operation.inputText"),a=t.get("operations.records");0!==r.length?Object.keys(a||{}).forEach(function(e){n=r!==a[e].label}):n=!1;if(n){var o=Kt()(),i={id:o,label:r,fields:{}};return t.set("".concat("operations.records."+o),i),t.set("".concat("operations.records."+o+".id"),o),{item:i,data:i}}},Zo,fs],Object(Bo.a)(qa)),ls=[function(e){e.props;return e.state.get("User.currentSelection.operation.disabled")}],us=[function(e){var t=e.state,n=t.get("User.currentSelection.operation.id");return{item:t.get("".concat("operations.records."+n))}},fs].concat(Object(Bo.a)(qa),Object(Bo.a)(Oi)),ds=Object(Bo.a)(Oi);function ps(e){e.props;var t=e.state,n=t.get("User.currentSelection.operation.id");if(n){var r=t.get("fields.selectedId"),a=t.get("User.currentSelection.status.status");t.set("operations.records.".concat(n,".fields.").concat(r,".status"),a),"unplanned"===a?t.unset("".concat("operations.records."+n+".fields."+r)):r&&(t.set("".concat("operations.records."+n+".fields."+r+".id"),r),t.get("".concat("operations.records."+n+".fields."+r+".history"))||t.set("".concat("operations.records."+n+".fields."+r+".history"),[]),t.get("".concat("operations.records."+n+".fields."+r+".history"))&&t.unshift("".concat("operations.records."+n+".fields."+r+".history"),{status:a||"planned",marker:t.get("User.currentSelection.status.marker"),timestamp:t.get("User.currentSelection.status.timestamp")}))}}function fs(e){var t=e.props,n=e.state;t.item&&(n.set("User.currentSelection.operation.id",t.item.id),n.set("User.currentSelection.operation.inputText",t.item.label),n.set("User.currentSelection.operation.suggestionsOpen",!1))}function bs(e){var t=e.props,n=e.state;if(!n.get("fields.editing")){var r=function(e){e.props;var t=e.state,n=t.get("fields.selectedId"),r=t.get("User.currentSelection.operation.id");return t.get("operations.records.".concat(r,".fields.").concat(n,".status'}"))||"unplanned"}({props:t,state:n});r&&n.set("User.currentSelection.status.status",r),n.set("User.currentSelection.status.timestamp",function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1;return t<10&&(t="0"+t),n<10&&(n="0"+n),e.getFullYear()+"-"+n+"-"+t}()),n.set("User.currentSelection.status.marker",n.get("User.label"))}}var Os=Object(ka.Module)({state:{id:"servio",label:"Servio",operations:{},fields:{},currentSelection:{operation:{id:null,placeholder:"Operation",suggestionsOpen:!1,inputText:"",disabled:!1,editing:!1},farm:{id:"",name:""},field:{id:null,placeholder:"Field",suggestionsOpen:!1,name:"",disabled:!1,editing:!1,tempObject:null,newFieldDisabled:!0},status:{status:null,marker:null,timestamp:null}},accessibleUsers:{servio:{id:"servio",label:"Servio"},pguruji:{id:"pguruji",label:"Parag"},aultac:{id:"aultac",label:"Aaron"},sanoel:{id:"sanoel",label:"Sam"}}},signals:s}),ms={center:[40.98551896940516,-86.18823766708374],moving:!1,zoom:15,isLoading:!1},js=Object(ka.Module)({state:ms,signals:{locationFound:ti,mapMoved:[].concat(Object(Bo.a)(oi),Object(Bo.a)($o)),mapMoveStarted:Ko,mouseDownOnMap:ei,markerDragStarted:ri,markerDragEnded:ni,markerDragged:ai,deleteCoordinate:ci}}),gs=Object(ka.Module)({state:{open:!1,menu:"operations",operatorMenuOpen:!1},signals:{handleDrawerOpen:Oi,openBottomDrawerForStatusUpdate:mi,handleOperatorMenuOpen:ji,handleOperatorMenuClose:gi}});function hs(){var e=Object(m.a)(["BottomDrawer.open"]);return hs=function(){return e},e}function vs(){var e=Object(m.a)(["BottomDrawer.menu"]);return vs=function(){return e},e}var ys=[Ns,Object(Ba.set)(Object(C.state)(vs()),"operations"),Object(Ba.set)(Object(C.state)(hs()),!0)],ws=[Ns,function(e){var t=e.props,n=e.state;n.set("User.currentSelection.operation.inputText",t.inputText),n.set("User.currentSelection.operation.suggestionsOpen",!0)}],Cs=[function(e){var t=e.props,n=e.state,r=n.get("fields.selectedId");n.set("fields.records.".concat(r,".name"),t.inputText),n.set("fields.new_field.field.suggestionsOpen",!0)}],ks=[function(e){var t=e.props,n=e.state,r=n.get("fields.selectedId"),a=JSON.parse(JSON.stringify(n.get("fields.records.".concat(r,".boundary")))),o=JSON.parse(JSON.stringify(n.get("fields.records.".concat(r))));console.log("--\x3e copying this boundary into buffer",a),a&&a.geojson.coordinates[0].length>=3?n.set("User.currentSelection.field.coordinatesOk",!0):n.set("User.currentSelection.field.coordinatesOk",!1);n.set("fields.new_field",o),cc({props:t,state:n}),n.set("fields.temp_buffer.boundary",a),n.set("fields.editing",!0),n.set("fields.isNewField",!1)}].concat(Object(Bo.a)(Oi),Object(Bo.a)(ii)),Ss=[function(e){e.props;e.state.set("User.currentSelection.operation.editing",!0)}],Is=[function(e){var t=e.props,n=e.state;"ops-input"===t.id?n.set("User.currentSelection.operation.suggestionsOpen",!0):n.set("fields.new_field.field.suggestionsOpen",!0)}],xs=[function(e){var t=e.props,n=e.state;if("ops-input"===t.id){n.get("User.currentSelection.operation.id");n.set("User.currentSelection.operation.suggestionsOpen",!1)}else n.set("fields.new_field.field.suggestionsOpen",!1)}];function Ns(e){var t=e.props,n=e.state,r=t.inputText,a=n.get("operations.records");n.get("BottomDrawer.open")||(r=n.get("User.currentSelection.operation.inputText"));var o=!1;Object.keys(a||{}).forEach(function(e){r===a[e].label||0===r.length?(n.set("User.currentSelection.operation.disabled",!0),o=!0):o||n.set("User.currentSelection.operation.disabled",!1)})}var Fs=Object(ka.Module)({state:{},signals:l}),Es={planned:{area:0,collapse:!0,fields:[]},started:{area:0,collapse:!0,fields:[]},completed:{area:0,collapse:!0,fields:[]}},_s=Object(ka.Module)({state:Es,signals:{handleCollapse:Ka,loadData:qa}}),Ds=Object(ka.Module)({state:{},signals:a}),Ts=n(538),Ws=Object(ka.Module)({state:{},signals:Ts}),Ls="https://oada.openatk.com",Us=Object(ka.Module)({state:{open:!1,oada_domain_text:Ls,oada_fields_domain_text:Ls,oada_domain:Ls,oada_fields_domain:Ls,show:!1},signals:{submitClicked:Hc,cancelClicked:Pc,oadaDomainChanged:Yc,oadaFieldsDomainChanged:Jc}}),Zs=Object(ka.Module)({state:{records:{},loading:!0,connection_id:"none",fieldsChanged:!1},signals:{operationClicked:[],handleWatchUpdate:Wo,handleFieldUpdate:Vo}}),Ms=Object(ka.Module)({state:{records:{},farms:{},loading:!0,connection_id:0,new_field:{},editing:!1},signals:o}),As={planned:{open:!1},started:{open:!1},completed:{open:!1}},Rs=Object(ka.Module)({state:As,signals:r}),Vs=[function(e){var t=e.state,n=e.props,r=n.width>n.height?"landscape":"portrait";t.get("window.orientation")!==r&&t.set("window.orientation",r);var a="portrait"===r?n.width<767:n.height<500;t.get("window.isSmall")!==a&&t.set("window.isSmall",a)}],Bs=[function(e){return e.windowSize.init("window.resized")},Vs],Gs=Object(ka.Module)({state:{isSmall:!0,orientation:"portrait"},signals:u});function Xs(){var e=Object(m.a)(["User.currentSelection.field.newFieldDisabled"]);return Xs=function(){return e},e}function Ys(){var e=Object(m.a)(["operators.editing"]);return Ys=function(){return e},e}function Js(){var e=Object(m.a)(["operators.selectedId"]);return Js=function(){return e},e}function zs(){var e=Object(m.a)(["operators.records.",""]);return zs=function(){return e},e}function Hs(){var e=Object(m.a)(["item"]);return Hs=function(){return e},e}function Ps(){var e=Object(m.a)(["User.currentSelection.operator.newOperatorDisabled"]);return Ps=function(){return e},e}function qs(){var e=Object(m.a)(["operators.editing"]);return qs=function(){return e},e}var Qs={bookmarks:{_type:"application/vnd.oada.bookmarks.1+json",_rev:"0-0",operators:{_type:"application/vnd.oada.yield.1+json",_rev:"0-0","*":{_type:"application/vnd.oada.yield.1+json",_rev:"0-0"}}}},Ks=[ol,Object(Ba.set)(Object(C.state)(qs()),!0)];function $s(e){e.props;var t=e.state,n=t.get("operators.connection_id"),r=t.get("operators.records");return Xa.a.map(Object.keys(r||{}),function(e){return t.unset("operators.records.".concat(e))}).then(function(){var e=t.get("oada.".concat(n,".bookmarks.operators"));return e?Xa.a.map(Object.keys(e||{}),function(n){if(e[n]&&e[n].firstName){var r=e[n].id,a=e[n].lastName,o={id:r,firstName:e[n].firstName,lastName:a,label:e[n].label};return t.set("operators.records.".concat(r),o)}}):void 0}).then(function(){})}var el=[Object(Ba.set)(Object(C.state)(Ps()),!0)],tl=[function(e){var t=e.props,n=(e.state,{_id:"resources/"+t.item.id,firstName:t.item.firstName,lastName:t.item.lastName,label:t.item.label});return{id:t.item.id,operator:n}},function(e){var t=e.props;return{connection_id:e.state.get("operations.connection_id"),data:t.operator,path:"/bookmarks/operators/".concat(t.id),tree:Qs}},Va.a.put,el],nl=[al,function(e){e.props,e.state}].concat(Object(Bo.a)(ii)),rl=[Object(Ba.set)(Object(C.props)(Hs()),Object(C.state)(zs(),Object(C.state)(Js()))),Object(Ba.set)(Object(C.state)(Ys()),!1),Object(Ba.when)(Object(C.state)(Xs())),{true:[],false:[tl,Vo].concat(Object(Bo.a)(qa))}];function al(e){var t=e.props,n=e.state;n.set("operators.selectedId",t.field.id),n.get("operators.editing")||(n.set("operators.new_operator.operator.suggestionsOpen",!1),n.set("operators.editing",!1))}function ol(e){e.props;var t=e.state,n=function(e,t){return{id:Kt()(),firstName:e,lastName:t,label:""}}(t.get("operators.new_operator.firstName"),t.get("operators.new_operator.lastName"));return t.set("operators.new_operator",n),{operator:n}}function il(e){e.props;var t=e.state,n=t.get("operators.selectedId"),r=t.get("operators.records.".concat(n,".firstName")),a=t.get("operators.records.".concat(n,".lastName"));r.length>0&&a.length>0?t.set("User.currentSelection.operator.newOperatorDisabled",!1):t.set("User.currentSelection.operator.newOperatorDisabled",!0)}function cl(e){var t=e.props,n=e.state;n.set("operators.new_operator.lastName",t.value),n.set("operators.new_operator.lastName.suggestionsOpen",!0),il({props:t,state:n})}function sl(e){var t=e.props,n=e.state;n.set("operators.new_operator.firstName",t.value),n.set("operators.new_operator.field.suggestionsOpen",!0),il({props:t,state:n})}var ll=Object(Ci.sequence)("operators.handleWatchUpdate",[function(){console.log("--\x3e operators.handlingWatchUpdate")},$s]);function ul(e){e.props;var t=e.state;console.log("--\x3e Canceling new operator"),t.set("operators.editing",!1),t.unset("operators.new_operator"),t.unset("operators.selectedId")}var dl,pl=Object(ka.Module)({state:{records:{},loading:!0,connection_id:0,new_operator:{},editing:!1},signals:d}),fl=Object(ka.Module)({modules:(dl={App:hc,window:Gs,Connections:Us,oada:xa.a,SideDrawer:es,MenuBar:Qc,StatsBar:Rs,DataTabs:ts,User:Os,MapPanel:js,BottomDrawer:gs,AutocompleteSearch:Fs,OpsList:_s,FldList:Ds,fields:_a.a,operations:Zs},Object(Sa.a)(dl,"fields",Ms),Object(Sa.a)(dl,"EditFieldDrawer",Ws),Object(Sa.a)(dl,"operators",pl),dl),providers:{oada:Fa.a}}),bl=null;var Ol=Object(ka.Controller)(fl,{devtools:bl&&bl({host:"localhost:8787"})}),ml=n(335),jl=n.n(ml),gl=(n(1108),Object(w.createMuiTheme)());Object(b.render)(f.a.createElement(O.Container,{controller:Ol,style:{height:"100vh"}},f.a.createElement(jl.a,{theme:gl},f.a.createElement(Ca,null))),document.getElementById("root"))},538:function(e,t){},555:function(e,t,n){e.exports=n(1110)},802:function(e,t,n){},955:function(e,t){},957:function(e,t){},962:function(e,t){},964:function(e,t){},995:function(e,t){},997:function(e,t){},998:function(e,t){}},[[555,2,1]]]);
//# sourceMappingURL=main.2f72d480.chunk.js.map