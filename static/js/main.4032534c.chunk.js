(this["webpackJsonpfield-work"]=this["webpackJsonpfield-work"]||[]).push([[0],{1021:function(e,a,n){"use strict";n.r(a);var t={};n.r(t),n.d(t,"state",(function(){return De})),n.d(t,"actions",(function(){return Ae})),n.d(t,"onInitialize",(function(){return Fe}));var o={};n.r(o),n.d(o,"state",(function(){return We})),n.d(o,"actions",(function(){return Ze})),n.d(o,"effects",(function(){return Ve}));var r=n(0),i=n.n(r),c=n(28),s=n.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(598),n(599),n(600);var l,d,u=n(193),p=n(69),m=n(1),f=n.n(m),g=n(236),v=n(573),w=n(9),b=n.n(w),h=n(25),O=n(37),k={OPTIONS:{redirect:d="https://openatk.com/FieldWorkApp/oauth2/redirect/",metadata:l="eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImRldjEiLCJqd2siOnsia3R5IjoiUlNBIiwibiI6InJyMzhpSzhGaTBfLUNSTFR2Vks0SUlDbGFyaWk2d1ZIcEU3elpQWG9FUmxfT29oNjRZbWJRY1JhNWVGdzBVUWhVdkVDaEt1OU5vM2ptN0xXOVpjTDFIS3Joa1VXLU9Rb2JPWFVuckNnb0NwYThWWWhfd1JJZFFZYnN2UFFWajVOR3V1TlhhWkJfX3B4Rnktbl9PMklNUzhPR3Jlem0zYlFIREFmLWpuZ0loWkdaZ0xhdkxKeVNIVXlEUUw0RmJRNkQzUXozQU1PcnhGdmE0S0JJUENRS0ZPbVlYVm40enRnVDY4aGd5TW9jMUt5dHhvUmd6VkhuQ2RUcFBXV1Zybk1GY0plZFlELUxtazBYbzVyallPeG1xOEExZWpmeFBNZVJfM1Y3OEFKazJMREk0dkdhSjNmbmFQWlM3Q3ZXOEYzcFdXaWpfQnlWR0NJLTVCcmtxSF9uUSIsImUiOiJBUUFCIn19.eyJyZWRpcmVjdF91cmlzIjpbImh0dHBzOi8vb3BlbmF0ay5jb20vRmllbGRXb3JrQXBwL29hdXRoMi9yZWRpcmVjdC5odG1sIiwiaHR0cHM6Ly9vcGVuYXRrLmNvbS9GaWVsZFdvcmtBcHAvb2F1dGgyL3JlZGlyZWN0LyIsImh0dHA6Ly9sb2NhbGhvc3Qvb2F1dGgyL3JlZGlyZWN0Lmh0bWwiLCJodHRwOi8vbG9jYWxob3N0L29hdXRoMi9yZWRpcmVjdC8iXSwidG9rZW5fZW5kcG9pbnRfYXV0aF9tZXRob2QiOiJ1cm46aWV0ZjpwYXJhbXM6b2F1dGg6Y2xpZW50LWFzc2VydGlvbi10eXBlOmp3dC1iZWFyZXIiLCJncmFudF90eXBlcyI6WyJhdXRob3JpemF0aW9uX2NvZGUiXSwicmVzcG9uc2VfdHlwZXMiOlsidG9rZW4iLCJjb2RlIiwiaWRfdG9rZW4iLCJpZF90b2tlbiB0b2tlbiIsImNvZGUgaWRfdG9rZW4iLCJjb2RlIHRva2VuIiwiY29kZSBpZF90b2tlbiB0b2tlbiJdLCJjbGllbnRfbmFtZSI6Ik9wZW5BVEsiLCJjbGllbnRfdXJpIjoiaHR0cDovL29wZW5hdGsuY29tIiwiY29udGFjdHMiOlsiU2FtIE5vZWwgPHNhbm9lbEBwdXJkdWUuZWR1PiJdLCJqd2tzIjp7ImtleXMiOlt7Imt0eSI6IlJTQSIsIm4iOiJ3ZWVmam51cjVxMTFQVHZzSTctMmlJUGRTeERJWGFva0tUWnk3OUR2dlNlWEFESFJnWXJCZW95bmFHN2NmaGttOGpkRzJ1NzV4Y2ozbUZweEVfVGs2a1AxTGR3TXZtaC11TXNuLVprb0REU3g0NkNOeGRiS2dyRFl3emZ2RElBU0RuZktwZ1FkX1RPLXQ0XzgyWjg5VmRnMFNGTzVOS2I4LS11NlN4c3dYU2NJckZGMkdzNDNrX1hqeEFOTEpqVzNMY0pRaG1GVmJWSjRpZHcyVXZNQXZwSVVhU3NZTHhaUXVNeTNxcEQzVGdWRmVmM3lBXy1jallVbUhRM09uTUM0Ym9JM24wVW1tSV8xcWtoaDJvMmFCTHhCUjZnakVIZG5DbTZZRldoOXV0NEFCcWN1X3ItZUdycVcxRHozdWVzdzY5UnZVazBVeldvc1BuMzVhVUZrQ1EiLCJlIjoiQVFBQiIsImtpZCI6IjYwZjZhYzNlYTY5MjRiNmJiZDBjZDVmYWQxMjg3ZDJiIn1dfSwic29mdHdhcmVfaWQiOiJhNzAzYmZkYy0zZmExLTQ5OWYtYjkwNS0xMWYwYjU0ZjM4MDciLCJyZWdpc3RyYXRpb25fcHJvdmlkZXIiOiJodHRwczovL2lkZW50aXR5Lm9hZGEtZGV2LmNvbSIsImlhdCI6MTUzMzg0NjExMn0.F0iwEhA2PNBVCEVRYbcbo1qTb01b8n1C3L_LtXmZT2APO5eLObMxt4PvAMaTR-5LPumG2uUHE9fthEK-NIbShgQVhWRMKEsXSYiZO4MhvYPAVjxuWT_ery7fsb1W2XK-a0AH-qBSEM5eBX3IYM2EatXobF3E87_xcMUVWSFFCj47QIm0TFU9x4o41P16prhRU3Y7jeG7VxQDiVvEhNo5qalyC6TgW961fzF0y6zG5BBs43UorRIWuUw27Du-8DBst3MsattRcqHX2JHLwRaacj4yAH_oGXjT64gOpkWzWQFi1AEtAm5-0IS_z3e4ULMuDrJDxL78iccQTloZFKvOlw",scope:"oada.yield:all"},REDIRECT:d,METADATA:l,SCOPE:"oada.yield:all",oadaDomain:""},y={domain:k.oadaDomain},E={onInitialize:function(e){var a=e.state,n=e.actions,t=window.localStorage["oada:domain"],o=window.localStorage["oada:token"];t&&(a.view.Login.domain=t),t&&o&&n.view.Login.login({token:o})},login:function(e,a){return Object(h.a)(b.a.mark((function n(){var t,o,r,i,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.state,o=e.actions,r=a.token,i=t.view.Login,c=i.domain,i.loading=!0,c=c.match(/^http/)?c:"https://"+i.domain,n.next=8,o.app.OADAManager.login({domain:c,token:r});case 8:i.loading=!1,t.app.OADAManager.connected&&(i.loggedIn=!0,window.localStorage["oada:domain"]=i.domain,window.localStorage["oada:token"]=t.app.OADAManager.token);case 10:case"end":return n.stop()}}),n)})))()},logout:function(e){return Object(h.a)(b.a.mark((function a(){var n,t,o;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.state,t=e.actions,o=n.view.Login,!n.app.OADAManager.connected){a.next=7;break}return a.next=5,t.app.OADAManager.logout();case 5:delete window.localStorage["oada:domain"],delete window.localStorage["oada:token"];case 7:o.loggedIn=!1;case 8:case"end":return a.stop()}}),a)})))()},domainChange:function(e,a){e.state.view.Login.domain=a.value},viewDemo:function(e,a){e.state.view.Login.loggedIn=!0}},D=n(68),A=n(239),F=n.n(A),M={open:!1,fieldId:function(e,a){return Object(D.a)(e),f.a.get(a,"view.Map.selectedField")},field:function(e,a){var n=e.fieldId,t=f.a.get(a,"view.TopBar.OperationDropdown.selectedOperation");if(null==n)return null;var o=f.a.get(t,"fields.".concat(n,".status"),null),r=null;if(1==f.a.get(a,"app.OADAManager.connected")){var i=f.a.get(a,"app.OADAManager.currentConnection");r=f.a.get(a,"app.oada.".concat(i,".bookmarks.seasons.2020.fields.").concat(n))}else r=f.a.get(a,"app.localData.abc123.seasons.2020.fields.".concat(n));if(null==r)return null;var c=247105e-9*F.a.geometry(r.boundary);return f.a.merge({},r,{status:o,acres:c})},farm:function(e,a){var n=e.field,t=null;if(1==f.a.get(a,"app.OADAManager.connected")){var o=f.a.get(a,"app.OADAManager.currentConnection");if(f.a.get(n,"farm._id")){var r=f.a.get(a,"app.oadaSeasonFarmsIdBy_id.".concat(f.a.get(n,"farm._id"),".id"));t=f.a.get(a,"app.oada.".concat(o,".bookmarks.seasons.2020.farms.").concat(r))}}else f.a.get(n,"farm.id")&&(t=f.a.get(a,"app.localData.abc123.seasons.2020.farms.".concat(n.farm.id)));return t},showAddOperationButton:function(e,a){if(Object(D.a)(e),1==f.a.get(a,"app.OADAManager.connected")){var n=f.a.get(a,"app.OADAManager.currentConnection");return f.a.isEmpty(f.a.get(a,"app.oada.".concat(n,".bookmarks.seasons.2020.operations")))}return f.a.isEmpty(f.a.get(a,"app.localData.abc123.seasons.2020.operations"))}},C=n(49),x=n.n(C),S={bookmarks:{_type:"application/vnd.oada.bookmarks.1+json",_rev:0,fields:{_type:"application/vnd.oada.fields.1+json",_rev:0,fields:{"*":{_type:"application/vnd.oada.field.1+json",_rev:0,farm:{_type:"application/vnd.oada.farm.1+json"}}},farms:{"*":{_type:"application/vnd.oada.farm.1+json",_rev:0}}},seasons:{_type:"application/vnd.oada.seasons.1+json",_rev:0,"*":{_type:"application/vnd.oada.season.1+json",_rev:0,fields:{"*":{_type:"application/vnd.oada.field.1+json",_rev:0,operations:{"*":{_type:"application/vnd.oada.operation.1+json"}}}},farms:{"*":{_type:"application/vnd.oada.farm.1+json",_rev:0}},operations:{"*":{_type:"application/vnd.oada.operation.1+json",_rev:0}}}}}},j=M,I={open:function(e){e.state.view.FieldDetails.open=!0},close:function(e){e.state.view.FieldDetails.open=!1},changeOADAFieldStatus:function(e,a){var n=e.state,t=e.actions,o=f.a.get(n,"view.Map.selectedField"),r=f.a.get(n,"view.TopBar.OperationDropdown.selectedOperationId"),i=f.a.get(n,"app.OADAManager.currentConnection"),c=f.a.clone(f.a.get(n,"app.oada.".concat(i,".bookmarks.seasons.2020.operations.").concat(r,".fields.").concat(o)))||{},s=a;if(c.status==a&&(s=null),c.status=s,null==c.status){f.a.unset(n,"app.oada.".concat(i,".bookmarks.seasons.2020.operations.").concat(r,".fields.").concat(o)),f.a.unset(n,"app.oada.".concat(i,".bookmarks.seasons.2020.fields.").concat(o,".operations.").concat(r));var l=[{type:"application/vnd.oada.operation.1+json",path:"/bookmarks/seasons/2020/operations/".concat(r,"/fields/").concat(o)},{type:"application/vnd.oada.field.1+json",path:"/bookmarks/seasons/2020/fields/".concat(o,"/operations/").concat(r)}];t.app.oada.delete({requests:l,connection_id:i})}else{f.a.set(n,"app.oada.".concat(i,".bookmarks.seasons.2020.operations.").concat(r,".fields.").concat(o),c),null==f.a.get(n,"app.oada.".concat(i,".bookmarks.seasons.2020.fields.").concat(o,".operations"))&&f.a.set(n,"app.localData.abc123.seasons.2020.fields.".concat(o,".operations"),{}),f.a.set(n,"app.oada.".concat(i,".bookmarks.seasons.2020.fields.").concat(o,".operations.").concat(r),{});var d=f.a.get(n,"view.TopBar.OperationDropdown.selectedOperation"),u=[{tree:S,data:c,type:"application/vnd.oada.operation.1+json",path:"/bookmarks/seasons/2020/operations/".concat(r,"/fields/").concat(o)},{tree:S,data:{_id:d._id},type:"application/vnd.oada.field.1+json",path:"/bookmarks/seasons/2020/fields/".concat(o,"/operations/").concat(r)}];t.app.oada.put({requests:u,connection_id:i})}},changeLocalFieldStatus:function(e,a){var n=e.state,t=(n.view.FieldDetails,f.a.get(n,"view.Map.selectedField")),o=f.a.get(n,"view.TopBar.OperationDropdown.selectedOperationId"),r=f.a.clone(f.a.get(n,"app.localData.abc123.seasons.2020.operations.".concat(o,".fields.").concat(t)))||{},i=a;r.status==a&&(i=null),r.status=i,null==r.status?(f.a.unset(n,"app.localData.abc123.seasons.2020.operations.".concat(o,".fields.").concat(t)),f.a.unset(n,"app.localData.abc123.seasons.2020.fields.".concat(t,".operations.").concat(o))):(f.a.set(n,"app.localData.abc123.seasons.2020.operations.".concat(o,".fields.").concat(t),r),null==f.a.get(n,"app.localData.abc123.seasons.2020.fields.".concat(t,".operations"))&&f.a.set(n,"app.localData.abc123.seasons.2020.fields.".concat(t,".operations"),{}),f.a.set(n,"app.localData.abc123.seasons.2020.fields.".concat(t,".operations.").concat(o),{}))},onStatusChange:function(e,a){var n=e.state,t=e.actions,o=a.status,r=t.view.FieldDetails;n.app.OADAManager.connected?r.changeOADAFieldStatus(o):r.changeLocalFieldStatus(o)},onAddNewOperationClick:function(e){e.actions.view.TopBar.OperationDropdown.onAdd()}},N={open:!1,selectedField:null},B={},T={fieldStyles:{},selectedField:null,editingField:null,center:[41.448068,-84.972648],zoom:13,bounds:[[41.44053877385792,-84.97886180877687],[41.46330393671208,-84.96770381927492]],fields:function(e,a){Object(D.a)(e);var n=f.a.get(a,"view.Map.fieldStyles"),t=f.a.get(a,"view.Map.editingField"),o=(f.a.get(a,"view.Map.BoundaryDrawing.drawing"),f.a.get(a,"view.TopBar.OperationDropdown.selectedOperation")),r=f.a.get(a,"app.seasonFields");return f.a.chain(r).mapValues((function(e,a){if(null==e)return null;if(null==e.boundary)return null;if(t==a)return null;var r=f.a.clone(e);if(null!=n[a]&&(r.style=n[a]),o){var i="white";o.fields&&o.fields[a]&&("planned"==o.fields[a].status&&(i="red"),"started"==o.fields[a].status&&(i="orange"),"done"==o.fields[a].status&&(i="#0acd00")),r.style=f.a.merge({},r.style,{fillColor:i,color:i})}return r})).omitBy((function(e,a){if(null==e)return!0})).value()}},R=n(55),_=n.n(R),W=n(529),Z=n.n(W),V=n(530),L=n.n(V),z={zoomTo:function(e,a){return Object(h.a)(b.a.mark((function n(){var t,o,r,i,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.state,o=a.latitude,r=a.longitude,i=a.zoom,(c=f.a.get(t,"view.Map")).center=[o,r],c.zoom=i,n.next=7,_.a.delay(500);case 7:c.center=null,c.zoom=null;case 9:case"end":return n.stop()}}),n)})))()},styleField:{highlight:function(e,a){var n=e.state;if(a){var t=f.a.get(n,"view.Map");f.a.set(t,"fieldStyles.".concat(a),{weight:5})}},unhighlight:function(e,a){var n=e.state;if(a){var t=f.a.get(n,"view.Map");f.a.set(t,"fieldStyles.".concat(a),{weight:3})}}},unselectField:function(e){return Object(h.a)(b.a.mark((function a(){var n,t,o,r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.state,t=e.actions,o=f.a.get(t,"view.Map"),!(r=f.a.get(n,"view.Map")).selectedField){a.next=9;break}return t.view.FieldDetails.close(),o.styleField.unhighlight(r.selectedField),a.next=8,_.a.delay(200);case 8:r.selectedField=null;case 9:case"end":return a.stop()}}),a)})))()},onFieldClick:function(e,a){var n=e.state,t=e.actions,o=a.id,r=f.a.get(t,"view.Map"),i=f.a.get(n,"view.Map");f.a.get(i,"BoundaryDrawing.drawing")||(r.styleField.unhighlight(i.selectedField),i.selectedField=o,r.styleField.highlight(o),t.view.FieldDetails.open())},onMapClick:function(e,a){var n=e.actions,t=f.a.get(n,"view.Map");t.unselectField(),t.BoundaryDrawing.onMapClick(a)},zoomBounds:function(e,a){return Object(h.a)(b.a.mark((function a(){var n,t,o,r,i;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=e.state,t=f.a.get(n,"view.Map"),o=f.a.compact(f.a.map(t.fields,(function(e){return e.boundary?{geo:e.boundary}:null}))),r=L.a.parse(o,{GeoJSON:"geo"}),i=Z()(r),isFinite(i[0])&&isFinite(i[1])&&isFinite(i[2])&&isFinite(i[3])&&(t.bounds=[[i[1],i[0]],[i[3],i[2]]]);case 6:case"end":return a.stop()}}),a)})))()}},G=n(47),U={boundary:{},drawing:!1},J={addPointToBoundary:function(e,a){var n=e.state.view.Map.BoundaryDrawing;f.a.set(n,"boundary.".concat(x()()),[a.lat,a.lng])},updateBoundaryPoint:Object(G.h)(Object(G.d)(10),Object(G.g)((function(e,a){var n=e.state.view.Map.BoundaryDrawing;f.a.set(n,"boundary.".concat(a.id),[a.latlng.lat,a.latlng.lng])}))),onMapClick:function(e,a){var n=e.state,t=e.actions,o=a.lat,r=a.lng,i=n.view.Map.BoundaryDrawing,c=t.view.Map.BoundaryDrawing;i.drawing&&c.addPointToBoundary({lat:o,lng:r})},onMarkerMove:function(e,a){e.actions.view.Map.BoundaryDrawing.updateBoundaryPoint(a)},onStartDrawing:function(e,a){var n=e.state.view.Map.BoundaryDrawing;n.boundary=(a||{}).boundary||{},n.drawing=!0},onStopDrawing:function(e,a){var n=e.state.view.Map.BoundaryDrawing;n.drawing=!1,n.boundary={}}},X=Object(O.a)({BoundaryDrawing:U},T),P=Object(O.a)({BoundaryDrawing:J},z),Y={OADADomain:{open:!1,domain:k.oadaDomain}},H={OADADomain:{open:function(e){e.state.view.Modals.OADADomain.open=!0},close:function(e){e.state.view.Modals.OADADomain.open=!1},onConnectClick:function(e){e.actions.view.Modals.OADADomain.open()},onDomainChange:function(e,a){var n=e.state,t=a.domain;n.view.Modals.OADADomain.domain=t},onConnect:function(e){return Object(h.a)(b.a.mark((function a(){var n,t,o,r,i;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.actions,t=e.state,o=t.view.Modals.OADADomain,r=n.view.Modals.OADADomain,i=o.domain,o.loading=!0,a.next=7,n.app.OADAManager.onDomainChanged({domain:i});case 7:o.loading=!1,r.close();case 9:case"end":return a.stop()}}),a)})))()},onCancel:function(e){e.actions.view.Modals.OADADomain.close()}}};function Q(e){var a={type:"Polygon",coordinates:[f.a.map(e,(function(e){return[e[1],e[0]]}))]};return a.coordinates&&a.coordinates[0]&&a.coordinates[0].length>0&&a.coordinates[0].push(a.coordinates[0][0]),a}function q(e,a){var n=e.state,t=e.actions,o=a.fieldId,r=a.newBoundary,i=a.farmId,c=a.farm_id,s=a.seasonFarm_id,l=n.view.Modals.SaveField,d=t.app.getSeasonField(o),u=l.name,p={},m={};return u!=d.name&&(p.name=u),0==f.a.isEqual(r,d.boundary)&&(p.boundary=r),m=f.a.cloneDeep(p),s?d.farm&&d.farm._id==s||(p.farm={_id:s},m.farm={_id:c}):d.farm&&d.farm.id==i||(p.farm={id:i},m.farm={id:i}),{fieldChanges:m,seasonFieldChanges:p}}function K(e,a,n,t){var o=e.state;if(!f.a.isEmpty(n)||!f.a.isEmpty(t)){var r="app.localData.abc123.fields.fields.".concat(a);f.a.set(o,r,f.a.merge({},f.a.get(o,r),n));var i="app.localData.abc123.seasons.2020.fields.".concat(a);f.a.set(o,i,f.a.merge({},f.a.get(o,i),t))}}function $(e,a,n,t){return ee.apply(this,arguments)}function ee(){return(ee=Object(h.a)(b.a.mark((function e(a,n,t,o){var r,i,c,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.state,i=a.actions,!f.a.isEmpty(t)||!f.a.isEmpty(o)){e.next=3;break}return e.abrupt("return");case 3:return c=[],0==f.a.isEmpty(t)&&c.push({tree:S,data:t,path:"/bookmarks/fields/fields/".concat(n)}),0==f.a.isEmpty(o)&&c.push({tree:S,data:o,path:"/bookmarks/seasons/2020/fields/".concat(n)}),console.log("fieldChanges",t),console.log("seasonFieldChanges",o),s=f.a.get(r,"app.OADAManager.currentConnection"),e.next=11,i.app.oada.put({requests:c,connection_id:s});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e,a){var n=a.boundary,t=a.farmId,o=a.farm_id;return{name:e.state.view.Modals.SaveField.name,boundary:n,farm:o?{_id:o}:{id:t}}}function ne(e,a){var n=a.field,t=e.state,o=x()();return f.a.set(t,"app.localData.abc123.fields.fields.".concat(o),n),f.a.set(t,"app.localData.abc123.seasons.2020.fields.".concat(o),Object(O.a)({},n,{operations:{},year:"2020"})),o}function te(e,a){return oe.apply(this,arguments)}function oe(){return(oe=Object(h.a)(b.a.mark((function e(a,n){var t,o,r,i,c,s,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.field,o=n.seasonField,r=a.state,i=a.actions,c=x()(),s=[],t&&s.push({tree:S,data:t,path:"/bookmarks/fields/fields/".concat(c)}),o&&s.push({tree:S,data:Object(O.a)({},o,{operations:{},year:"2020"}),path:"/bookmarks/seasons/2020/fields/".concat(c)}),l=f.a.get(r,"app.OADAManager.currentConnection"),e.next=9,i.app.oada.put({requests:s,connection_id:l});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var re={open:!1,name:"",farmSearch:"",farms:function(e,a){var n=e.farmSearch;return f.a.compact(f.a.map(a.app.seasonFarms,(function(e,a){return!e||""!=n&&e.name&&-1==e.name.toLowerCase().search(n.toLowerCase())?null:{key:a,text:e.name,value:a}})))},farmId:null,farm:function(e,a){var n=e.farmId;e.farms;if(n)return f.a.get(a,"app.seasonFarms.".concat(n))}},ie={open:function(e){var a=e.state,n=e.actions,t=a.view.Modals.SaveField,o=f.a.get(a,"view.Map.editingField");if(null==o)t.name="";else{var r=n.app.getSeasonField(o);if(t.name=r.name,a.app.OADAManager.connected){var i=f.a.get(a,"app.oadaSeasonFarmsIdBy_id.".concat(f.a.get(r,"farm._id"),".id"));t.farmId=i}else t.farmId=f.a.get(r,"farm.id")}t.open=!0},close:function(e){e.state.view.Modals.SaveField.open=!1},saveField:function(e){return Object(h.a)(b.a.mark((function a(){var n,t,o,r,i,c,s,l,d,u,p,m,g,v,w;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.state,t=n.view.Modals.SaveField,o=f.a.get(n,"view.Map.BoundaryDrawing.boundary"),r=Q(o),i=t.farmId,c=null,s=null,(l=t.farm)&&n.app.OADAManager.connected&&(c=f.a.get(n,"app.oadaOrgData.fields.farms.".concat(i,"._id")),s=f.a.get(n,"app.seasonFarms.".concat(i,"._id"))),!(d=f.a.get(n,"view.Map.editingField"))){a.next=15;break}u=q(e,{fieldId:d,newBoundary:r,farmId:i,farm_id:c,seasonFarm_id:s}),p=u.fieldChanges,m=u.seasonFieldChanges,n.app.OADAManager.connected?$(e,d,p,m):K(e,d,p,m),a.next=31;break;case 15:if(!n.app.OADAManager.connected){a.next=26;break}return a.next=18,ae(e,{boundary:r,farm_id:c});case 18:return g=a.sent,a.next=21,ae(e,{boundary:r,farm_id:s});case 21:return v=a.sent,a.next=24,te(e,{field:g,seasonField:v});case 24:a.next=31;break;case 26:return a.next=28,ae(e,{boundary:r,farm:l,farmId:i});case 28:return w=a.sent,a.next=31,ne(e,{field:w});case 31:case"end":return a.stop()}}),a)})))()},onSave:function(e){var a=e.actions,n=e.state,t=a.view.Modals.SaveField;t.saveField(),a.view.Map.BoundaryDrawing.onStopDrawing(),n.view.Map.editingField=null,t.close()},onCancel:function(e){var a=e.actions,n=e.state,t=a.view.Modals.SaveField;a.view.Map.BoundaryDrawing.onStopDrawing(),n.view.Map.editingField=null,t.close()},onNameChange:function(e,a){var n=e.state,t=a.name;n.view.Modals.SaveField.name=t},onFarmSearchChange:function(e,a){e.state.view.Modals.SaveField.farmSearch=a},onFarmChange:function(e,a){var n=e.state,t=a.id;n.view.Modals.SaveField.farmId=t},onFarmAdd:function(e){e.actions.view.Modals.NewFarm.open({callbackAction:"view.Modals.SaveField.onFarmAddComplete"})},onFarmAddComplete:function(e,a){var n=e.state,t=a.id;n.view.Modals.SaveField.farmId=t}};function ce(e,a){var n=e.state,t=a.operation,o=x()();return f.a.set(n,"app.localData.abc123.seasons.2020.operations.".concat(o),t),o}function se(e,a){return le.apply(this,arguments)}function le(){return(le=Object(h.a)(b.a.mark((function e(a,n){var t,o,r,i,c,s,l,d;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,o=a.actions,r=n.operation,i=x()(),c=[{tree:S,data:r,path:"/bookmarks/seasons/2020/operations/".concat(i)}],s=f.a.get(t,"app.OADAManager.currentConnection"),e.next=7,o.app.oada.put({requests:c,connection_id:s});case 7:return l=e.sent,d=f.a.get(l,"responses.0.headers.content-location").substr(1),e.abrupt("return",{id:i,_id:d});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var de={open:!1,name:"",useTemplate:!1,invertTemplate:!1,templateOperation:""},ue={open:function(e){var a=e.state.view.Modals.NewOperation;a.name="",a.open=!0},close:function(e){e.state.view.Modals.NewOperation.open=!1},saveOperation:function(e){return Object(h.a)(b.a.mark((function a(){var n,t,o,r,i,c,s,l,d;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.state,t=n.view.Modals.NewOperation,u={name:t.name,useTemplate:t.useTemplate,invertTemplate:t.invertTemplate,templateOperation:t.templateOperation},o={name:u.name,fields:{}},!t.useTemplate){a.next=12;break}if(r=f.a.get(n,"app.OADAManager.currentConnection"),i=f.a.omitBy(f.a.get(n,"app.oada.".concat(r,".bookmarks.seasons.2020.operations"))||{},(function(e,a){return f.a.startsWith(a,"_")})),c=i[t.templateOperation]){a.next=10;break}return alert("ERROR: The selected template operation was not found.  Did not create new operation."),a.abrupt("return");case 10:t.invertTemplate?(console.log("INVERTING"),o.fields=f.a.mapValues(f.a.omitBy(n.app.seasonFields,(function(e,a){return!!c.fields[a]})),(function(e){return{status:"planned"}})),console.log("INVERTING, operation.fields = ",o.fields)):o.fields=f.a.cloneDeep(c.fields),f.a.each(f.a.keys(o.fields),(function(e){o.fields[e].status="planned"}));case 12:if(!n.app.OADAManager.connected){a.next=21;break}return a.next=15,se(e,{operation:o});case 15:s=a.sent,l=s.id,s._id,f.a.set(n,"view.TopBar.OperationDropdown.selected",l),a.next=25;break;case 21:return a.next=23,ce(e,{operation:o});case 23:d=a.sent,f.a.set(n,"view.TopBar.OperationDropdown.selected",d);case 25:n.view.Modals.NewOperation.useTemplate=!1,n.view.Modals.NewOperation.invertTemplate=!1,n.view.Modals.NewOperation.templateOperation="";case 28:case"end":return a.stop()}var u}),a)})))()},onNameChange:function(e,a){var n=e.state,t=a.name;n.view.Modals.NewOperation.name=t},onCancel:function(e){e.actions.view.Modals.NewOperation.close()},onSave:function(e){return Object(h.a)(b.a.mark((function a(){var n,t;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.actions,t=n.view.Modals.NewOperation,a.next=4,t.saveOperation();case 4:t.close();case 5:case"end":return a.stop()}}),a)})))()},onUseTemplate:function(e){var a=e.state.view.Modals.NewOperation;a.useTemplate=!a.useTemplate},onInvertTemplate:function(e){var a=e.state.view.Modals.NewOperation;a.invertTemplate=!a.invertTemplate},onTemplateOperation:function(e,a){var n=e.state,t=a.templateOperation;n.view.Modals.NewOperation.templateOperation=t}};function pe(e,a){var n=a.farm,t=e.state,o=x()();return f.a.set(t,"app.localData.abc123.farms.".concat(o),n),f.a.set(t,"app.localData.abc123.seasons.2020.farms.".concat(o),n),o}function me(e,a){return fe.apply(this,arguments)}function fe(){return(fe=Object(h.a)(b.a.mark((function e(a,n){var t,o,r,i,c,s,l,d,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.farm,o=a.state,r=a.actions,i=x()(),c=[{tree:S,data:t,path:"/bookmarks/fields/farms/".concat(i)},{tree:S,data:t,path:"/bookmarks/seasons/2020/farms/".concat(i)}],s=f.a.get(o,"app.OADAManager.currentConnection"),e.next=7,r.app.oada.put({requests:c,connection_id:s});case 7:if(l=e.sent,null!=(d=f.a.get(l,"responses.0.headers.content-location").substr(1))){e.next=11;break}throw"OADA did not return an _id when creating a farm.";case 11:if(null!=(u=f.a.get(l,"responses.1.headers.content-location").substr(1))){e.next=14;break}throw"OADA did not return an _id when creating a season farm.";case 14:return e.abrupt("return",{farm_id:d,seasonFarm_id:u,id:i});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ge={open:!1,name:""},ve={open:function(e,a){var n=e.state,t=a.callbackAction,o=n.view.Modals.NewFarm;o.name="",o.open=!0,o.callbackAction=t||null},close:function(e){e.state.view.Modals.NewFarm.open=!1},saveFarm:function(e){return Object(h.a)(b.a.mark((function a(){var n,t,o,r,i,c,s,l,d,u,p;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.state,t=e.actions,o=n.view.Modals.NewFarm,m={name:o.name},r={name:m.name},!n.app.OADAManager.connected){a.next=17;break}return a.next=6,me(e,{farm:r});case 6:if(i=a.sent,c=i.farm_id,s=i.seasonFarm_id,l=i.id,!o.callbackAction){a.next=15;break}if(d=f.a.get(t,o.callbackAction)){a.next=14;break}throw"callbackAction: ".concat(o.callbackAction," does not exist.");case 14:d({farm_id:c,seasonFarm_id:s,id:l});case 15:a.next=25;break;case 17:return a.next=19,pe(e,{farm:r});case 19:if(u=a.sent,!o.callbackAction){a.next=25;break}if(p=f.a.get(t,o.callbackAction)){a.next=24;break}throw"callbackAction: ".concat(o.callbackAction," does not exist.");case 24:p({id:u});case 25:case"end":return a.stop()}var m}),a)})))()},onNameChange:function(e,a){var n=e.state,t=a.name;n.view.Modals.NewFarm.name=t},onCancel:function(e){e.actions.view.Modals.NewFarm.close()},onSave:function(e){return Object(h.a)(b.a.mark((function a(){var n,t;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.actions,t=n.view.Modals.NewFarm,a.next=4,t.saveFarm();case 4:t.close();case 5:case"end":return a.stop()}}),a)})))()}},we=Object(O.a)({SaveField:re,NewOperation:de,NewFarm:ge},Y),be=Object(O.a)({SaveField:ie,NewOperation:ue,NewFarm:ve},H),he={onMyLocationClick:function(e,a){var n=e.actions;if(a){var t=a.latitude,o=a.longitude;n.view.Map.zoomTo({latitude:t,longitude:o,zoom:15})}},onLocationChange:function(e,a){var n=e.state;if(a){var t=a.latitude,o=a.longitude;console.log("onLocationChange",a),null!=t&&null!=o&&(n.view.Map.location={latitude:t,longitude:o})}},onAddField:function(e){e.actions.view.Map.BoundaryDrawing.onStartDrawing()},onSaveField:function(e){e.actions.view.Modals.SaveField.open()},onCancelField:function(e){var a=e.state,n=e.actions;a.view.Map.editingField=null,n.view.Map.BoundaryDrawing.onStopDrawing()},onEditField:function(e){var a=e.actions,n=e.state,t=n.view.FieldDetails.field;n.view.Map.editingField=n.view.FieldDetails.fieldId;var o={},r=f.a.get(t,"boundary.coordinates.0");r.length>0&&r.pop(),f.a.forEach(r||[],(function(e){o[x()()]=[e[1],e[0]]})),a.view.Map.BoundaryDrawing.onStartDrawing({boundary:o}),a.view.Map.unselectField()},onResetCache:function(e){return Object(h.a)(b.a.mark((function a(){var n;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.actions,a.next=3,n.app.oada.resetCache();case 3:case"end":return a.stop()}}),a)})))()},onLogout:function(e){return Object(h.a)(b.a.mark((function a(){var n;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.actions,a.next=3,n.view.Login.logout();case 3:case"end":return a.stop()}}),a)})))()}},Oe={open:!1,selected:null,search:"",list:function(e,a){var n=e.selected,t=e.operations,o=f.a.get(a,"view.TopBar.OperationDropdown.search");return f.a.omitBy(f.a.mapValues(t,(function(e,a){var t=e.name;return null==a||null==t||""!=o&&-1==t.search(o)?null:{text:t,value:a,selected:n==a,label:{color:"green",empty:!0,circular:!0}}})),f.a.isEmpty)},operations:function(e,a){Object(D.a)(e);var n=null;if(1==f.a.get(a,"app.OADAManager.connected")){var t=f.a.get(a,"app.OADAManager.currentConnection");n=f.a.omitBy(f.a.get(a,"app.oada.".concat(t,".bookmarks.seasons.2020.operations"))||{},(function(e,a){return f.a.startsWith(a,"_")}))}else n=f.a.get(a,"app.localData.abc123.seasons.2020.operations");return n},selectedOperationId:function(e,a){var n=e.selected,t=e.operations,o=n;return null==o&&f.a.keys(t).length>0&&(o=f.a.keys(t)[0]),o},selectedOperation:function(e,a){var n=e.selectedOperationId;return e.operations[n]}},ke={onAdd:function(e){var a=e.state,n=e.actions;return a.view.TopBar.OperationDropdown.open=!1,n.view.Modals.NewOperation.open()},onChange:function(e,a){var n=e.state,t=a.id,o=n.view.TopBar.OperationDropdown;o.selected=t,o.open=!1},onOpenChange:function(e,a){var n=e.state,t=a.open;n.view.TopBar.OperationDropdown.open=t},onSearch:function(e,a){var n=e.state,t=a.search;n.view.TopBar.OperationDropdown.search=t}},ye=Object(O.a)({OperationDropdown:Oe},{}),Ee=Object(O.a)({OperationDropdown:ke},he),De=Object(O.a)({Login:y,FieldDetails:j,FieldList:N,Map:X,Modals:we,TopBar:ye},{}),Ae=Object(O.a)({Login:E,FieldDetails:I,FieldList:B,Map:P,Modals:be,TopBar:Ee},{}),Fe=function(){var e=Object(h.a)(b.a.mark((function e(a){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.actions,e.next=3,n.app.onInitialize();case 3:return e.next=5,n.view.Login.onInitialize();case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Me={"42f60b10-784c-11ea-8dfd-a3e960f56105":{name:"1004 G-N",boundary:{type:"Polygon",coordinates:[[[-84.97584700584412,41.4628134964027],[-84.97539639472963,41.462765256171906],[-84.97495651245119,41.46275721612994],[-84.97424840927125,41.46250797433487],[-84.97405529022217,41.46203360827181],[-84.97410893440247,41.46044164256161],[-84.97139453887941,41.46130195211675],[-84.96770381927492,41.46327177680542],[-84.97010707855226,41.46330393671208],[-84.9764907360077,41.46306273702346],[-84.97634053230287,41.45965368547904],[-84.97462391853334,41.46024867436535],[-84.9746346473694,41.461004463187685],[-84.97491359710695,41.46126175098986],[-84.97492432594301,41.46172004235903],[-84.97529983520509,41.46208988917259],[-84.97581481933594,41.46234717266838],[-84.9761688709259,41.46278133625282]]]},farm:{id:"42f08cd0-784c-11ea-8dfd-a3e960f56105"}},"7c0ce950-784c-11ea-bfa5-97fea4f9bfd9":{name:"1001 HO-N",boundary:{type:"Polygon",coordinates:[[[-84.97347593307495,41.44864540647965],[-84.97626543045044,41.44856498851091],[-84.97617959976196,41.44784122230691],[-84.977445602417,41.44782513852177],[-84.97759580612183,41.44862932289387],[-84.97886180877687,41.448532821295515],[-84.97866868972778,41.44205080201176],[-84.97654438018799,41.442887227983185],[-84.97549295425415,41.44425443952937],[-84.97323989868165,41.44608806625952],[-84.97272491455078,41.44689227216232],[-84.97330427169801,41.44726220353039]]]},farm:{id:"42f08cd0-784c-11ea-8dfd-a3e960f56105"}},"8ab27420-784c-11ea-bfa5-97fea4f9bfd9":{name:"1002 HO-S",boundary:{type:"Polygon",coordinates:[[[-84.97152328491212,41.44697269220437],[-84.97148036956789,41.44166475561947],[-84.97152328491212,41.44111785263252],[-84.97347593307495,41.441085681725035],[-84.97373342514038,41.44073180069027],[-84.97635126113893,41.44053877385792],[-84.97645854949953,41.44134304853828],[-84.97607231140138,41.44161649965898],[-84.97611522674562,41.44240467585386],[-84.97540712356569,41.44398099952468]]]},farm:{id:"42f08cd0-784c-11ea-8dfd-a3e960f56105"}}},Ce={"42f08cd0-784c-11ea-8dfd-a3e960f56105":{name:"Bowman and Bowman"},"52f08cd0-784c-11ea-8dfd-a3e960f56105":{name:"Martz Farms"}},xe={acresStatus:function(e,a){Object(D.a)(e);var n=a.app.operationFields,t=a.app.seasonFields,o=0,r=0,i=0;f.a.forEach(n,(function(e,a){if(null!=e){var n=t[a];if(null!=n){var c=247105e-9*F.a.geometry(n.boundary);"planned"==e.status?o+=c:"started"==e.status?r+=c:"done"==e.status&&(i+=c)}}}));var c=o+r+i;return{planned:Math.round(o),plannedPercentage:Math.round(o/(c||1)*100),started:Math.round(r),startedPercentage:Math.round(r/(c||1)*100),done:Math.round(i),donePercentage:Math.round(i/(c||1)*100)}},seasonFarms:function(e,a){var n;if(Object(D.a)(e),1==f.a.get(a,"app.OADAManager.connected")){var t=f.a.get(a,"app.OADAManager.currentConnection");n=f.a.chain(a).get("app.oada.".concat(t,".bookmarks.seasons.2020.farms")).omitBy((function(e,a){return!!f.a.startsWith(a,"_")||(null==e||void 0)})).value()}else n=f.a.get(a,"app.localData.abc123.seasons.2020.farms");return n||{}},seasonFields:function(e,a){var n;if(Object(D.a)(e),1==f.a.get(a,"app.OADAManager.connected")){var t=f.a.get(a,"app.OADAManager.currentConnection");n=f.a.chain(a).get("app.oada.".concat(t,".bookmarks.seasons.2020.fields")).omitBy((function(e,a){return!!f.a.startsWith(a,"_")||(null==e||void 0)})).value()}else n=f.a.get(a,"app.localData.abc123.seasons.2020.fields");return n||{}},operationFields:function(e,a){Object(D.a)(e);var n=f.a.get(a,"view.TopBar.OperationDropdown.selectedOperationId"),t=[];if(null!=n)if(1==f.a.get(a,"app.OADAManager.connected")){var o=f.a.get(a,"app.OADAManager.currentConnection");t=f.a.get(a,"app.oada.".concat(o,".bookmarks.seasons.2020.operations.").concat(n,".fields"))||[]}else t=f.a.get(a,"app.localData.abc123.seasons.2020.operations.".concat(n,".fields"))||[];return t},currentOADA:function(e,a){if(Object(D.a)(e),a.app.OADAManager.connected){var n=a.app.OADAManager.currentConnection;if(!n)return;return a.app.oada[n]}},oadaOrgData:function(e){var a=e.currentOADA;if(a)return a.bookmarks},oadaSeasonFarmsIdBy_id:function(e,a){var n=e.oadaOrgData;return f.a.chain(n).get("seasons.2020.farms").mapValues((function(e,a){return e?{_id:e._id,id:a}:null})).omitBy(f.a.isNull).mapKeys((function(e,a){return e._id})).value()},oadaSeasonFarms_idByFarm_id:function(e,a){var n=e.oadaOrgData;return f.a.chain(n).get("fields.farms").mapValues((function(e,a){return e?{seasonFarm_id:f.a.get(n,"seasons.2020.farms.".concat(a,"._id")),farm_id:e._id}:null})).omitBy(f.a.isNull).mapKeys((function(e,a){return e.farm_id})).value()},localOrgData:function(e){return e.localData.abc123},localData:{organizations:{abc123:{name:"Default"}},abc123:{fields:{fields:Object(O.a)({},Me),farms:Object(O.a)({},Ce)},seasons:{2020:{fields:Object(O.a)({},Me),farms:Object(O.a)({},Ce),operations:{}}}}}},Se={getSeasonField:function(e,a){var n=e.state,t=[];if(1==f.a.get(n,"app.OADAManager.connected")){var o=f.a.get(n,"app.OADAManager.currentConnection");t=f.a.get(n,"app.oada.".concat(o,".bookmarks.seasons.2020.fields"))}else t=f.a.get(n,"app.localData.abc123.seasons.2020.fields");return t[a]},getSeasonFarm:function(e,a){var n=e.state,t=[];if(1==f.a.get(n,"app.OADAManager.connected")){var o=f.a.get(n,"app.OADAManager.currentConnection");t=f.a.get(n,"app.oada.".concat(o,".bookmarks.seasons.2020.farms"))}else t=f.a.get(n,"app.localData.abc123.seasons.2020.farms");return t[a]},onInitialize:function(e){e.state;e.actions.view.Map.zoomBounds()}},je={connected:!1,currentConnection:null,domain:null,token:null,user:function(e,a){return e.currentConnection?f.a.get(a,"app.oada.localhost.users.me"):null}},Ie=n(531),Ne=_.a.promisify(Ie.browser.getAccessToken),Be=je,Te={getToken:function(e,a){return Object(h.a)(b.a.mark((function n(){var t,o,r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.state,!(o=t.app.OADAManager).token){n.next=4;break}return n.abrupt("return",o.token);case 4:return n.next=6,Ne(a.replace(/^https?:\/\//,""),{metadata:k.METADATA,scope:k.SCOPE,redirect:k.REDIRECT});case 6:return r=n.sent,n.abrupt("return",r.access_token);case 8:case"end":return n.stop()}}),n)})))()},connect:function(e,a){return Object(h.a)(b.a.mark((function n(){var t,o,r,i,c,s;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.actions,o=e.state,e.effects,r=a.domain,i=a.token,c=o.app.OADAManager,s=t.app.OADAManager,i&&(c.token=i),n.next=7,s.getToken(r);case 7:return i=n.sent,n.abrupt("return",t.app.oada.connect({token:i,domain:r,options:k.OPTIONS,cache:!1}).then((function(e){return e.error||(c.currentConnection=e.connectionId,c.token=e.token,c.connected=!0,o.view.TopBar.OperationDropdown.selected=null),e})));case 9:case"end":return n.stop()}}),n)})))()},logout:function(e){return Object(h.a)(b.a.mark((function a(){var n,t,o,r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.actions,t=e.state,o=t.app.OADAManager,r=o.currentConnection,o.token=null,a.next=6,n.app.oada.disconnect({connection_id:r});case 6:case"end":return a.stop()}}),a)})))()},getUserInfo:function(e){return Object(h.a)(b.a.mark((function a(){var n,t,o,r,i;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.actions,t=e.state,o=t.app.OADAManager,r=o.currentConnection,i=[{path:"/users/me"}],a.next=6,n.app.oada.get({requests:i,connection_id:r});case 6:case"end":return a.stop()}}),a)})))()},fetchAndWatch:function(e){return Object(h.a)(b.a.mark((function a(){var n,t,o,r,i,c,s,l,d;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.actions,t=e.state,o=t.app.OADAManager,r=o.currentConnection,i=[{path:"/bookmarks/fields",tree:S,watch:{actions:[n.app.OADAManager.onFieldChanged]}},{path:"/bookmarks/seasons",tree:S,watch:{actions:[]}}],a.next=6,n.app.oada.get({requests:i,connection_id:r});case 6:if(c=a.sent,s=[],console.log("SOMETIMES ERRORS:",c),!c.responses[0].error){a.next=16;break}if(404==c.responses[0].status){a.next=12;break}throw c.responses[0].error;case 12:return l=[{tree:S,data:{fields:{},farms:{}},path:"/bookmarks/fields"}],a.next=15,n.app.oada.put({requests:l,connection_id:r});case 15:s.push(i[0]);case 16:if(!c.responses[1].error){a.next=23;break}if(404==c.responses[1].status){a.next=19;break}throw c.responses[0].error;case 19:return d=[{tree:S,data:{},path:"/bookmarks/seasons"}],a.next=22,n.app.oada.put({requests:d,connection_id:r});case 22:s.push(i[1]);case 23:if(!(s.length>0)){a.next=26;break}return a.next=26,n.app.oada.get({requests:s,connection_id:r});case 26:case"end":return a.stop()}}),a)})))()},initSeasonFields:function(e){var a=e.state,n=e.actions.app.OADAManager,t=[];return f.a.forEach(f.a.get(a,"app.oadaOrgData.fields.fields"),(function(e,a){f.a.startsWith(a,"_")||t.push({fieldId:a,name:e.name,boundary:e.boundary,farm:e.farm})})),n.changeSeasonFields(t)},initSeasonFarms:function(e){var a=e.state,n=e.actions.app.OADAManager,t=[];return f.a.forEach(f.a.get(a,"app.oadaOrgData.fields.farms"),(function(e,a){f.a.startsWith(a,"_")||t.push({farmId:a,name:e.name})})),n.changeSeasonFarms(t)},changeSeasonFields:function(e,a){return Object(h.a)(b.a.mark((function n(){var t,o,r,i,c,s;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.state,o=e.actions,r=t.app.OADAManager,i=r.currentConnection,c=[],s=t.app.seasonFields,f.a.forEach(a,(function(e){if(null!=e.fieldId){var a={},n=s[e.fieldId];if(e.name&&(null!=n&&n.name==e.name||(a.name=e.name)),e.boundary&&(null!=n&&0!=f.a.isEqual(n.boundary,e.boundary)||(a.boundary=e.boundary)),e.farm){var o=f.a.get(e,"farm._id");if(o){var r=f.a.get(t,"app.oadaSeasonFarms_idByFarm_id.".concat(o,".seasonFarm_id"));r?(null==n||null==n.farm||null==n.farm._id||null!=r&&n.farm._id!=r)&&(a.farm=f.a.merge({},a.farm,{_id:r})):console.log("No matching season farm found for farmId:",o,"Cannot check if season fields farm has changed. Data:",e)}}f.a.isEmpty(a)||c.push({tree:S,data:a,type:"application/vnd.oada.field.1+json",path:"/bookmarks/seasons/2020/fields/".concat(e.fieldId)})}})),0!=c.length){n.next=8;break}return n.abrupt("return");case 8:return n.next=10,o.app.oada.put({requests:c,connection_id:i});case 10:case"end":return n.stop()}}),n)})))()},changeSeasonFarms:function(e,a){return Object(h.a)(b.a.mark((function n(){var t,o,r,i,c,s;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.state,o=e.actions,r=t.app.OADAManager,i=r.currentConnection,c=[],s=t.app.seasonFarms,f.a.forEach(a,(function(e){if(null!=e.farmId){var a={},n=s[e.farmId];e.name&&(null!=n&&n.name==e.name||(a.name=e.name)),f.a.isEmpty(a)||c.push({tree:S,data:a,type:"application/vnd.oada.farm.1+json",path:"/bookmarks/seasons/2020/farms/".concat(e.farmId)})}})),0!=c.length){n.next=8;break}return n.abrupt("return");case 8:return n.next=10,o.app.oada.put({requests:c,connection_id:i});case 10:case"end":return n.stop()}}),n)})))()},deleteSeasonFields:function(e,a){return Object(h.a)(b.a.mark((function n(){var t,o,r,i,c,s;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.state,o=e.actions,console.log("delete season fields",a),r=t.app.OADAManager,i=r.currentConnection,c=[],s=t.app.seasonFields,f.a.forEach(a,(function(e){s[e]&&c.push({tree:S,type:"application/vnd.oada.field.1+json",path:"/bookmarks/seasons/2020/fields/".concat(e)})})),0!=c.length){n.next=9;break}return n.abrupt("return");case 9:return n.next=11,o.app.oada.delete({requests:c,connection_id:i});case 11:case"end":return n.stop()}}),n)})))()},deleteSeasonFarms:function(e,a){return Object(h.a)(b.a.mark((function n(){var t,o,r,i,c,s;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.state,o=e.actions,console.log("delete season farms",a),r=t.app.OADAManager,i=r.currentConnection,c=[],s=t.app.seasonFarms,f.a.forEach(a,(function(e){s[e]&&c.push({tree:S,type:"application/vnd.oada.farm.1+json",path:"/bookmarks/seasons/2020/farms/".concat(e)})})),0!=c.length){n.next=9;break}return n.abrupt("return");case 9:return n.next=11,o.app.oada.delete({requests:c,connection_id:i});case 11:case"end":return n.stop()}}),n)})))()},login:function(e,a){return Object(h.a)(b.a.mark((function n(){var t,o,r,i,c,s,l;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.actions,o=e.state,r=a.domain,i=a.token,c=o.app.OADAManager,s=t.app.OADAManager,c.domain=r,n.next=7,s.connect({domain:r,token:i});case 7:if(l=n.sent,l.error){n.next=20;break}return n.next=12,s.getUserInfo();case 12:return n.next=14,s.fetchAndWatch();case 14:return n.next=16,s.initSeasonFarms();case 16:return n.next=18,s.initSeasonFields();case 18:return n.next=20,t.view.Map.zoomBounds();case 20:case"end":return n.stop()}}),n)})))()},onFieldChanged:function(e,a){return Object(h.a)(b.a.mark((function n(){var t,o,r,i,c,s,l,d,u;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.state,o=e.actions,console.log("onFieldChanged",a),r=o.app.OADAManager,i=f.a.get(a,"response.change")||[],f.a.isArray(i)){n.next=7;break}return console.warn("WARNING: response.change not an array"),n.abrupt("return");case 7:c=a.path&&a.path.length>0?"".concat(a.connection_id,".").concat(a.path):a.connection_id,s=[],l=[],d=[],u=[],f.a.forEach(i,(function(e){if("merge"==e.type){var n=e.path.split("/"),o=n.join(".");f.a.get(t,"".concat(c).concat(o));if("fields"==f.a.get(n,1)){var r=f.a.get(n,2);if(null==r&&null!=f.a.get(e,"body"))return void console.log("WARNING: Received a bad field change from OADA",a);var i=f.a.get(e,"body"),p=i.name,m=i.boundary;s.push(f.a.pickBy({fieldId:r,name:p,boundary:m},(function(e){return!f.a.isUndefined(e)})))}else if("farms"==f.a.get(n,1)){var g=f.a.get(n,2);if(null==g&&null!=f.a.get(e,"body"))return void console.log("WARNING: Received a bad farm change from OADA",a);var v=f.a.get(e,"body").name;d.push(f.a.pickBy({farmId:g,name:v},(function(e){return!f.a.isUndefined(e)})))}}else if("delete"==e.type){var w=e.path.split("/").join(".");f.a.get(t,"".concat(c).concat(w));f.a.forEach(f.a.get(e,"body.fields"),(function(e,a){null==e&&l.push(a)})),f.a.forEach(f.a.get(e,"body.farms"),(function(e,a){null==e&&u.push(a)}))}else console.warn("Unrecognized change type",e.type)})),l.length>0&&r.deleteSeasonFields(l),s.length>0&&r.changeSeasonFields(s),u.length>0&&r.deleteSeasonFarms(u),d.length>0&&r.changeSeasonFarms(d);case 17:case"end":return n.stop()}}),n)})))()},onSeasonsChanged:function(e,a){e.state,e.actions}},Re=n(532),_e=n.n(Re)()("app.oada"),We=Object(O.a)({oada:_e.state,OADAManager:Be},xe),Ze=Object(O.a)({oada:_e.actions,OADAManager:Te},Se),Ve={oada:_e.effects},Le=Object(v.a)({view:t,app:o}),ze=Object(g.b)(),Ge=n(1089),Ue=n(1068),Je=n(1025);function Xe(){var e=Object(u.a)(["\n        position: absolute;\n        top: 10px;\n        right: 10px;\n        font-size: 1.2em;\n        color: #FFFFFF;\n        cursor: pointer;\n      "]);return Xe=function(){return e},e}function Pe(){var e=Object(u.a)(["\n          display: flex;\n          flex-direction: column;\n        "]);return Pe=function(){return e},e}function Ye(){var e=Object(u.a)(["\n        width: 400px;\n        display: flex;\n        flex-direction: column;\n        background: #fff;\n        padding: 15px;\n        padding-top: 7px;\n        border-radius: 5px;\n      "]);return Ye=function(){return e},e}function He(){var e=Object(u.a)(["\n      height: 100vh;\n      width: 100vw;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      background: url(imgs/login-background.jpg) no-repeat center center fixed;\n      background-size: cover;\n    "]);return He=function(){return e},e}var Qe=function(){var e=ze(),a=e.state,n=e.actions,t=a.view.Login,o=n.view.Login;return Object(p.b)("div",{css:Object(p.a)(He())},Object(p.b)("div",{css:Object(p.a)(Ye())},Object(p.b)("img",{css:{height:300},src:"imgs/logo2.svg",alt:"logo"}),Object(p.b)(Ge.a,{css:Object(p.a)(Pe()),onSubmit:o.login},Object(p.b)(Ue.a,{placeholder:"OADA Domain...",value:t.domain,onChange:function(e,a){return o.domainChange(a)}}),Object(p.b)(Je.a,{style:{marginTop:7},primary:!0,loading:t.loading,disabled:t.loading},"Connect to Your OADA Cloud"),Object(p.b)(Je.a,{style:{marginTop:7},onClick:o.viewDemo,disabled:t.loading},"View Demo"))),Object(p.b)("a",{css:Object(p.a)(Xe()),onClick:o.logout},"Logout"))},qe=n(1095),Ke=n(1096),$e=(n(961),n(1069)),ea=n(1070),aa=n(1071);function na(){var e=ze(),a=e.state,n=e.actions,t=a.view.Map.BoundaryDrawing,o=n.view.Map.BoundaryDrawing,r=t.boundary,c=t.drawing,s=o.onMarkerMove;return c?i.a.createElement($e.a,null,i.a.createElement(ea.a,{positions:f.a.map(r)}),f.a.map(r,(function(e,a){return i.a.createElement(aa.a,{position:e,key:a,draggable:!0,onMove:function(e){var n=e.latlng,t=e.oldLatLng;return s({latlng:n,oldLatLng:t,id:a})}})}))):null}var ta=n(1072);function oa(){var e=ze(),a=e.state,n=e.actions,t=a.view.Map,o=n.view.Map,r=t.fields,c=o.onFieldClick;return 0==f.a.keys(r).length?null:i.a.createElement($e.a,null,f.a.map(r,(function(e,a){return i.a.createElement(ta.a,{bubblingMouseEvents:!1,style:e.style,data:e.boundary,key:x()(),onClick:function(e){c({id:a})}})})))}function ra(){var e=ze(),a=e.actions,n=e.state,t=a.view.Map,o=n.view.Map;return i.a.createElement(qe.a,{bounds:o.bounds,center:o.center,zoom:o.zoom,onClick:function(e){return t.onMapClick(Object(O.a)({},e.latlng))},zoomControl:!1},i.a.createElement(Ke.a,{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles \xa9 Esri \u2014 Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}),i.a.createElement(Ke.a,{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-labels/{z}/{x}/{y}{r}.png",minZoom:0,maxZoom:20,attribution:""}),i.a.createElement(na,null),i.a.createElement(oa,null))}var ia=n(1081),ca=n(1076),sa=n(1073),la=n(1077);function da(){var e=ze().actions.view.TopBar;return i.a.createElement(sa.a,null,i.a.createElement(ca.a,{style:{flex:1}}),i.a.createElement(la.a,{color:"inherit",onClick:function(){return e.onCancelField()}},"Cancel"),i.a.createElement(la.a,{color:"inherit",onClick:function(){return e.onSaveField()}},"Save"))}var ua=n(1091);function pa(e){var a=e.style,n=ze(),t=n.actions,o=n.state,r=t.view.TopBar.OperationDropdown,c=o.view.TopBar.OperationDropdown,s=c.selectedOperation,l=c.list,d=c.open,u=c.search,p=r.onAdd,m=r.onChange,g=r.onOpenChange,v=r.onSearch;return i.a.createElement(ca.a,{style:a},i.a.createElement(ca.a,{style:{flexDirection:"row"}},s?i.a.createElement(ua.a,{open:d,onOpen:function(){g({open:!0})},onBlur:function(){g({open:!1})},text:s.name,icon:"cog",floating:!0,labeled:!0,button:!0,className:"icon"},i.a.createElement(ua.a.Menu,{style:{top:42}},i.a.createElement(ua.a.Item,{style:{textAlign:"center"},text:"Add New Operation",value:"Add New Operation",onClick:function(e,a){p()}}),i.a.createElement(Ue.a,{icon:"search",iconPosition:"left",className:"search",style:{marginTop:3},value:u,onChange:function(e){v({search:e.target.value})}}),i.a.createElement(ua.a.Menu,{scrolling:!0},f.a.map(l,(function(e){return i.a.createElement(ua.a.Item,Object.assign({key:e.value},e,{onClick:function(e,a){m({id:a.value})}}))}))))):i.a.createElement(ua.a,{onClick:function(){p()},open:!1,text:"Add New Operation",icon:"cog",floating:!0,labeled:!0,button:!0,className:"icon"}),i.a.createElement(ca.a,{style:{flex:1}})))}var ma=n(149),fa=n(1078),ga=n(562),va=n.n(ga),wa=n(1094),ba=n(1080);function ha(e){var a=e.style,n=ze(),t=n.actions,o=n.state,r=t.view.TopBar,c=i.a.useState(null),s=Object(ma.a)(c,2),l=s[0],d=s[1];function u(){d(null)}return i.a.createElement(ca.a,{style:a},i.a.createElement(fa.a,{edge:"end",color:"inherit","aria-label":"Menu",onClick:function(e){d(e.currentTarget)}},i.a.createElement(va.a,null)),i.a.createElement(wa.a,{style:{top:50,right:5},open:Boolean(l),keepMounted:!0,anchorEl:l,onClose:u},i.a.createElement(ba.a,{onClick:function(){u(),r.onAddField()}},"Add Field"),o.view.FieldDetails.open?i.a.createElement(ba.a,{onClick:function(){u(),r.onEditField()}},"Edit Field"):null,i.a.createElement(ba.a,{onClick:function(){u(),r.onLogout()}},"Logout")))}var Oa=n(563),ka=n(564),ya=n.n(ka);var Ea=Object(Oa.geolocated)({positionOptions:{enableHighAccuracy:!0},userDecisionTimeout:5e3})((function(e){var a=e.coords,n=(e.isGeolocationAvailable,e.isGeolocationEnabled,ze().actions.view.TopBar);return Object(r.useEffect)((function(){n.onLocationChange(a)})),i.a.createElement(ca.a,null,i.a.createElement(fa.a,{edge:"end",color:"inherit","aria-label":"Menu",onClick:function(){n.onMyLocationClick(a)}},i.a.createElement(ya.a,null)))}));function Da(e){e.toggleTitle;return i.a.createElement(sa.a,null,i.a.createElement(pa,{style:{flex:1}}),i.a.createElement(Ea,null),i.a.createElement(ha,null))}function Aa(){var e=ze().state.view.Map.BoundaryDrawing.drawing;return i.a.createElement(ca.a,{style:{zIndex:1201}},i.a.createElement(ia.a,{position:"static"},e?i.a.createElement(da,null):i.a.createElement(Da,null)))}var Fa=n(1093),Ma=n(1079),Ca=n(1084),xa=n(1024),Sa=n(1082),ja=n(1083),Ia=n(340),Na=n.n(Ia),Ba=n(341),Ta=n.n(Ba);function Ra(){return i.a.createElement(Fa.a,{open:!1,variant:"persistent"},i.a.createElement(ca.a,{style:{height:64}}),i.a.createElement("div",{style:{width:250},role:"presentation"},i.a.createElement(Ma.a,null,["Inbox","Starred","Send email"].map((function(e,a){return i.a.createElement(xa.a,{button:!0,key:e},i.a.createElement(Sa.a,null,a%2===0?i.a.createElement(Na.a,null):i.a.createElement(Ta.a,null)),i.a.createElement(ja.a,{primary:e}))}))),i.a.createElement(Ca.a,null),i.a.createElement(Ma.a,null,["All mail","Trash","Spam"].map((function(e,a){return i.a.createElement(xa.a,{button:!0,key:e},i.a.createElement(Sa.a,null,a%2===0?i.a.createElement(Na.a,null):i.a.createElement(Ta.a,null)),i.a.createElement(ja.a,{primary:e}))})))))}var _a=n(1090),Wa=n(1086),Za=n(1087),Va=n(1097),La=n(1085);function za(){var e=ze(),a=e.state,n=e.actions,t=a.view.FieldDetails,o=n.view.FieldDetails,r=t.open,c=t.field,s=t.farm,l=t.showAddOperationButton,d=o.onStatusChange;o.onEditFieldClick,o.onAddNewOperationClick;return Boolean(c)||(r=!1,c={}),i.a.createElement(Fa.a,{anchor:"bottom",open:r,variant:"persistent"},i.a.createElement(ca.a,{style:{paddingBottom:20}},i.a.createElement(ca.a,{style:{flexDirection:"column",alignItems:"center"}},i.a.createElement(ca.a,{style:{justifyContent:"left",flexDirection:"row",alignItems:"center",marginTop:10}},i.a.createElement(La.a,{style:{fontWeight:"bold",fontSize:20}},c.name),i.a.createElement(La.a,{style:{marginLeft:7,fontSize:18}},"- ".concat(Math.round(c.acres)," ac"))),null==s?null:i.a.createElement(La.a,{style:{fontSize:15,color:"#999",marginTop:2,marginBottom:7}},s.name)),i.a.createElement(ca.a,{style:{justifyContent:"center",flexDirection:"row"}},l?i.a.createElement(Je.a,{style:{marginTop:15},onClick:function(){return o.onAddNewOperationClick()}},"Add New Operation"):i.a.createElement(Va.a,{component:"fieldset"},i.a.createElement(Wa.a,{"aria-label":"position",name:"position",row:!0},i.a.createElement(Za.a,{value:"bottom",control:i.a.createElement(_a.a,{color:"primary",checked:"planned"==c.status||!1,onChange:function(){d({status:"planned"})}}),label:"Planned",labelPlacement:"bottom"}),i.a.createElement(Za.a,{value:"bottom",control:i.a.createElement(_a.a,{color:"primary",checked:"started"==c.status||!1,onChange:function(){d({status:"started"})}}),label:"Started",labelPlacement:"bottom"}),i.a.createElement(Za.a,{value:"bottom",control:i.a.createElement(_a.a,{color:"primary",checked:"done"==c.status||!1,onChange:function(){d({status:"done"})}}),label:"Done",labelPlacement:"bottom"}))))))}function Ga(e){var a=e.acresStatus;return i.a.createElement(ca.a,{style:{backgroundColor:"#c50003",paddingLeft:7,paddingRight:7,paddingTop:5,paddingBottom:5,borderRadius:5}},i.a.createElement(La.a,{style:{color:"white",textShadowColor:"#000",textShadowOffset:{width:1,height:1},textShadowRadius:2}},"".concat(a.planned," ac (").concat(a.plannedPercentage,"%)")))}function Ua(e){var a=e.acresStatus;return i.a.createElement(ca.a,{style:{backgroundColor:"#eeb705",paddingLeft:7,paddingRight:7,paddingTop:5,paddingBottom:5,borderRadius:5,marginRight:7,marginLeft:7}},i.a.createElement(La.a,{style:{color:"white",textShadowColor:"#000",textShadowOffset:{width:1,height:1},textShadowRadius:2}},"".concat(a.started," ac (").concat(a.startedPercentage,"%)")))}function Ja(e){var a=e.acresStatus;return i.a.createElement(ca.a,{style:{backgroundColor:"#5bb25f",paddingLeft:7,paddingRight:7,paddingTop:5,paddingBottom:5,borderRadius:5}},i.a.createElement(La.a,{style:{color:"white",textShadowColor:"#000",textShadowOffset:{width:1,height:1},textShadowRadius:2}},"".concat(a.done," ac (").concat(a.donePercentage,"%)")))}function Xa(){var e=ze().state,a=e.app.acresStatus;return e.view.TopBar.OperationDropdown.selectedOperationId?i.a.createElement(ca.a,{style:{position:"absolute",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",top:68,zIndex:401,width:"100vw"}},i.a.createElement(Ga,{acresStatus:a}),i.a.createElement(Ua,{acresStatus:a}),i.a.createElement(Ja,{acresStatus:a})):null}var Pa=n(1088),Ya=n(129);function Ha(){var e=ze(),a=e.state,n=e.actions,t=a.view.Modals.SaveField,o=n.view.Modals.SaveField,r=(t.open,t.name),c=o.onNameChange,s=o.onCancel,l=o.onSave,d=i.a.useState(!1),u=Object(ma.a)(d,2),p=u[0],m=u[1],f=t.farm||{},g=t.farms;return i.a.createElement(Pa.a,{open:t.open,size:"tiny"},i.a.createElement(Pa.a.Header,null,a.view.Map.editingField?"Edit Field":"New Field"),i.a.createElement(Pa.a.Content,null,i.a.createElement(ca.a,{style:{flexDirection:"column",zIndex:1}},i.a.createElement(La.a,{style:{marginBottom:7}},"Field Name:"),i.a.createElement(Ge.a,{onSubmit:function(){return l()}},i.a.createElement(Ue.a,{autoFocus:!0,placeholder:"Back 40",value:r,onChange:function(e){c({name:e.target.value})}})),i.a.createElement(La.a,{style:{marginBottom:7,marginTop:15}},"Farm:"),i.a.createElement(ua.a,{trigger:i.a.createElement(ca.a,{style:{paddingLeft:13,paddingRight:7,border:"1px solid rgba(34,36,38,.15)",borderRadius:".28571429rem",height:38,flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},i.a.createElement(La.a,{style:{color:f.name?"rgba(0,0,0,.87)":"rgba(0,0,0,.25)"}},f.name||"Select a farm"),i.a.createElement(Ya.a,{name:"caret down",style:{paddingBottom:17}})),icon:null,onOpen:function(){m(!0)},onBlur:function(){m(!1)},open:p},i.a.createElement(ua.a.Menu,{style:{overflow:"hidden",maxHeight:"50vh"}},i.a.createElement(ua.a.Item,{style:{textAlign:"center"},text:"Add New Farm",value:"Add New Farm",onClick:function(e,a){o.onFarmAdd(),m(!1)}}),i.a.createElement(Ue.a,{icon:"search",iconPosition:"left",className:"search",value:t.farmSearch,onChange:function(e){o.onFarmSearchChange(e.target.value)}}),i.a.createElement(ua.a.Menu,{scrolling:!0},g.map((function(e){return i.a.createElement(ua.a.Item,Object.assign({key:e.value},e,{onClick:function(){o.onFarmChange({id:e.value}),m(!1)}}))}))))))),i.a.createElement(Pa.a.Actions,null,i.a.createElement(Je.a,{negative:!0,onClick:function(){return s()}},"Cancel"),i.a.createElement(Je.a,{positive:!0,icon:"checkmark",labelPosition:"right",content:"Save",onClick:function(){return l()}})))}function Qa(){var e=ze(),a=e.state,n=e.actions,t=a.view.Modals.OADADomain,o=n.view.Modals.OADADomain,r=t.open,c=t.domain,s=o.onDomainChange,l=o.onCancel,d=o.onConnect;return i.a.createElement(Pa.a,{open:r,size:"tiny"},i.a.createElement(Pa.a.Header,null,"Connect to OADA Server"),i.a.createElement(Pa.a.Content,null,i.a.createElement(La.a,null,"Domain:"),i.a.createElement(ca.a,{style:{flexDirection:"row"}},i.a.createElement(Ue.a,{style:{flex:1,marginTop:7},placeholder:"https://oada.openatk.com",value:c,onChange:function(e){s({domain:e.target.value})}}))),i.a.createElement(Pa.a.Actions,null,i.a.createElement(Je.a,{negative:!0,onClick:function(){return l()}},"Cancel"),i.a.createElement(Je.a,{positive:!0,icon:"checkmark",labelPosition:"right",content:"Connect",onClick:function(){return d({})}})))}var qa=n(1067);function Ka(){var e=ze(),a=e.state,n=e.actions,t=a.view.Modals.NewOperation,o=n.view.Modals.NewOperation,r=t.open,c=t.name,s=t.useTemplate,l=t.invertTemplate,d=(t.templateOperation,o.onNameChange),u=o.onCancel,p=o.onSave,m=o.onUseTemplate,f=o.onInvertTemplate,g=o.onTemplateOperation,v=Object.values(a.view.TopBar.OperationDropdown.list);return i.a.createElement(Pa.a,{open:r,size:"tiny"},i.a.createElement(Pa.a.Header,null,"New Operation"),i.a.createElement(Pa.a.Content,null,i.a.createElement(La.a,null,"Name:"),i.a.createElement(ca.a,{style:{flexDirection:"row"}},i.a.createElement(Ge.a,{style:{flex:1},onSubmit:p},i.a.createElement(Ue.a,{autoFocus:!0,style:{width:"100%",marginTop:7},placeholder:"Corn Planting",value:c,onChange:function(e){d({name:e.target.value})}}),i.a.createElement("br",null),i.a.createElement(qa.a,{label:"Plan from another operation",value:s,onChange:function(e){return m()}}),s?i.a.createElement("div",null,i.a.createElement(ua.a,{placeholder:"Select Template Operation",fluid:!0,search:!0,selection:!0,options:v,onChange:function(e,a){var n=a.value;return g({templateOperation:n})}}),i.a.createElement(qa.a,{label:"Invert (Plan all unused fields)",value:l,onChange:function(e){return f()}})):""))),i.a.createElement(Pa.a.Actions,null,i.a.createElement(Je.a,{negative:!0,onClick:function(){return u()}},"Cancel"),i.a.createElement(Je.a,{positive:!0,icon:"checkmark",labelPosition:"right",content:"Save",onClick:function(){return p()}})))}function $a(){var e=ze(),a=e.state,n=e.actions,t=a.view.Modals.NewFarm,o=n.view.Modals.NewFarm,r=t.open,c=t.name,s=o.onNameChange,l=o.onCancel,d=o.onSave;return i.a.createElement(Pa.a,{open:r,size:"tiny"},i.a.createElement(Pa.a.Header,null,"New Farm"),i.a.createElement(Pa.a.Content,null,i.a.createElement(La.a,null,"Name:"),i.a.createElement(ca.a,{style:{flexDirection:"row"}},i.a.createElement(Ue.a,{style:{flex:1,marginTop:7},placeholder:"Bowman Farms",value:c,onChange:function(e){s({name:e.target.value})}}))),i.a.createElement(Pa.a.Actions,null,i.a.createElement(Je.a,{negative:!0,onClick:function(){return l()}},"Cancel"),i.a.createElement(Je.a,{positive:!0,icon:"checkmark",labelPosition:"right",content:"Save",onClick:function(){return d()}})))}var en=function(){return ze().state.view.Login.loggedIn?i.a.createElement("div",{className:"App"},i.a.createElement(Aa,null),i.a.createElement(Xa,null),i.a.createElement(ra,null),i.a.createElement(Ra,null),i.a.createElement(za,null),i.a.createElement(Ha,null),i.a.createElement(Qa,null),i.a.createElement(Ka,null),i.a.createElement($a,null)):i.a.createElement(Qe,null)},an=Object(G.c)(Le,{devtools:!0});s.a.render(i.a.createElement(g.a,{value:an},i.a.createElement(en,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},281:function(e,a){},593:function(e,a,n){e.exports=n(1021)},598:function(e,a,n){},599:function(e,a,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},600:function(e,a,n){},615:function(e,a){},617:function(e,a){},650:function(e,a){},651:function(e,a){},720:function(e,a){},961:function(e,a,n){}},[[593,1,2]]]);
//# sourceMappingURL=main.4032534c.chunk.js.map