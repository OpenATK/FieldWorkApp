{"version":3,"sources":["serviceWorker.js","config/index.js","overmind/view/Login/index.js","overmind/view/Login/state.js","overmind/view/Login/actions.js","overmind/view/FieldDetails/state.js","overmind/app/OADAManager/tree.js","overmind/view/FieldDetails/index.js","overmind/view/FieldDetails/actions.js","overmind/view/FieldList/index.js","overmind/view/FieldList/state.js","overmind/view/FieldList/actions.js","overmind/view/Map/state.js","overmind/view/Map/actions.js","overmind/view/Map/BoundaryDrawing/index.js","overmind/view/Map/BoundaryDrawing/state.js","overmind/view/Map/BoundaryDrawing/actions.js","overmind/view/Map/index.js","overmind/view/Modals/state.js","overmind/view/Modals/actions.js","overmind/view/Modals/SaveField/actions.js","overmind/view/Modals/SaveField/index.js","overmind/view/Modals/SaveField/state.js","overmind/view/Modals/NewOperation/actions.js","overmind/view/Modals/NewOperation/index.js","overmind/view/Modals/NewOperation/state.js","overmind/view/Modals/NewFarm/actions.js","overmind/view/Modals/NewFarm/index.js","overmind/view/Modals/NewFarm/state.js","overmind/view/Modals/index.js","overmind/view/TopBar/actions.js","overmind/view/TopBar/OperationDropdown/index.js","overmind/view/TopBar/OperationDropdown/state.js","overmind/view/TopBar/OperationDropdown/actions.js","overmind/view/TopBar/index.js","overmind/view/TopBar/state.js","overmind/view/index.js","overmind/view/state.js","overmind/view/actions.js","overmind/app/test/testFields.js","overmind/app/test/testFarms.js","overmind/app/state.js","overmind/app/actions.js","overmind/app/OADAManager/state.js","overmind/app/OADAManager/actions.js","overmind/app/OADAManager/index.js","overmind/app/index.js","overmind/index.js","view/Login/index.js","view/Map/BoundaryDrawing/index.js","view/Map/Fields/index.js","view/Map/index.js","view/TopBar/DrawingToolbar/index.js","view/TopBar/NormalToolbar/OperationDropdown/index.js","view/TopBar/NormalToolbar/MoreDropdown/index.js","view/TopBar/NormalToolbar/MyLocation/index.js","view/TopBar/NormalToolbar/MyLocation/Button.js","view/TopBar/NormalToolbar/index.js","view/TopBar/index.js","view/FieldList/index.js","view/FieldDetails/index.js","view/AcresStatus/AcresPlanned/index.js","view/AcresStatus/AcresStarted/index.js","view/AcresStatus/AcresDone/index.js","view/AcresStatus/index.js","view/Modals/SaveField.js","view/Modals/OADADomain.js","view/Modals/NewOperation.js","view/Modals/NewFarm.js","view/App.js","index.js","../../../oada-id-client-js/src/core.js","../../../oada-id-client-js/index.js","view/logo.svg","../../../oada-id-client-js/src/browser.js","../../../oada-id-client-js/src/node-browser.js","../../../oada-id-client-js/src/middleware.js"],"names":["Boolean","window","location","hostname","match","METADATA","REDIRECT","OPTIONS","redirect","metadata","scope","SCOPE","oadaDomain","state","domain","config","actions","onInitialize","localStorage","token","view","Login","login","myState","loading","app","OADAManager","connected","loggedIn","logout","domainChange","data","value","viewDemo","open","fieldId","_","get","field","selectedFieldId","operation","status","currentConnection","acres","geojsonArea","geometry","boundary","merge","farm","farmId","id","showAddOperationButton","isEmpty","bookmarks","_type","_rev","fields","farms","seasons","operations","_state","FieldDetails","close","changeOADAFieldStatus","operationId","clone","newStatus","unset","requests","type","path","oada","delete","connection_id","set","tree","_id","put","changeLocalFieldStatus","onStatusChange","myActions","onAddNewOperationClick","TopBar","OperationDropdown","onAdd","selectedField","fieldStyles","editingField","center","zoom","bounds","fieldsToRender","chain","mapValues","styledField","style","color","fillColor","omitBy","v","k","zoomTo","latitude","longitude","Promise","delay","styleField","highlight","weight","unhighlight","unselectField","onFieldClick","onMapClick","props","BoundaryDrawing","zoomBounds","compact","map","f","geo","featureCollection","GeoJSON","parse","BBox","isFinite","drawing","addPointToBoundary","Map","uuid","lat","lng","updateBoundaryPoint","pipe","debounce","mutate","latlng","onMarkerMove","onStartDrawing","onStopDrawing","_actions","OADADomain","Modals","onConnectClick","onDomainChange","onConnect","onDomainChanged","onCancel","convertToGEOJSON","points","coordinates","p","length","push","getChanges","newBoundary","farm_id","seasonFarm_id","SaveField","seasonField","getSeasonField","newName","name","seasonFieldChanges","fieldChanges","isEqual","cloneDeep","saveChangesToLocalData","editingFieldId","fieldPath","seasonFieldPath","saveChangesToOADA","context","a","console","log","createField","addFieldToLocalData","year","addFieldToOADA","farmSearch","search","seasonFarms","toLowerCase","key","text","saveField","onSave","onNameChange","onFarmSearchChange","onFarmChange","onFarmAdd","NewFarm","callbackAction","onFarmAddComplete","addOperationToLocalData","addOperationToOADA","ret","substr","NewOperation","saveOperation","addFarmToLocalData","addFarmToOADA","saveFarm","action","onMyLocationClick","coords","onLocationChange","onAddField","onSaveField","onCancelField","onEditField","currentField","coors","pop","forEach","onResetCache","resetCache","onLogout","selected","list","label","empty","circular","o","startsWith","selectedOperationId","selectedId","keys","selectedOperation","onChange","onOpenChange","onSearch","FieldList","acresStatus","operationFields","seasonFields","planned","started","done","fieldOperation","area","total","Math","round","plannedPercentage","startedPercentage","donePercentage","currentOADA","oadaOrgData","oadaSeasonFarmsIdBy_id","isNull","mapKeys","oadaSeasonFarms_idByFarm_id","localOrgData","localData","abc123","organizations","testFields","testFarms","getSeasonFarm","user","getAccessToken","promisify","oadaIdClient","getToken","replace","res","access_token","connect","effects","options","cache","then","response","error","connectionId","disconnect","getUserInfo","fetchAndWatch","watchRequests","watch","onFieldChanged","rewatchRequests","responses","initSeasonFields","fieldsChanged","obj","changeSeasonFields","initSeasonFarms","changed","changeSeasonFarms","theSeasonFields","fieldChange","seasonFarmId","change","seasonFarm","deleteSeasonFields","deleted","deleteSeasonFarms","changes","isArray","warn","watchPath","fieldsDeleted","farmsChanged","farmsDeleted","changePathArr","split","changePath","join","pickBy","isUndefined","onSeasonsChanged","oadaCacheOvermind","namespaced","createHook","overmind","css","height","src","alt","Form","onSubmit","Input","placeholder","evt","Button","marginTop","primary","disabled","onClick","LayerGroup","Polygon","positions","Marker","position","draggable","onMove","oldLatLng","Fields","bubblingMouseEvents","zoomControl","TileLayer","url","attribution","minZoom","maxZoom","DrawingToolbar","Toolbar","View","flex","OperationsDropdown","flexDirection","Dropdown","onOpen","onBlur","icon","floating","labeled","button","className","Menu","top","Item","textAlign","iconPosition","target","scrolling","option","MoreDropdown","React","useState","anchorEl","setAnchorEl","handleClose","IconButton","edge","aria-label","event","currentTarget","right","keepMounted","onClose","MenuItem","geolocated","positionOptions","enableHighAccuracy","userDecisionTimeout","isGeolocationAvailable","isGeolocationEnabled","useEffect","NormalToolbar","toggleTitle","zIndex","AppBar","TemporaryDrawer","Drawer","variant","width","role","List","index","ListItem","ListItemIcon","ListItemText","Divider","onEditFieldClick","anchor","paddingBottom","alignItems","justifyContent","Text","fontWeight","fontSize","marginLeft","marginBottom","FormControl","component","FormGroup","row","FormControlLabel","control","Checkbox","checked","labelPlacement","AcresPlanned","backgroundColor","paddingLeft","paddingRight","paddingTop","borderRadius","textShadowColor","textShadowOffset","textShadowRadius","AcresStarted","marginRight","AcresDone","AcresStatus","display","farmOpen","setFarmOpen","farmOptions","Modal","size","Header","Content","autoFocus","trigger","border","Icon","overflow","maxHeight","Actions","negative","positive","labelPosition","content","App","createOvermind","devtools","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","request","require","URI","objectAssign","jwt","jwku","jwksutils","jwk2pem","crypto","clientAuth","register","core","stuff","mergeOptions","args","Array","prototype","concat","apply","arguments","argParams","filter","arg","hasOwnProperty","params","reduce","scopes1","scopes2","ind","scopes","indexOf","storeState","stateObj","callback","retrieveState","Error","stateTok","randomBytes","toString","authorize","configuration","parameters","privateKey","kty","errCallback","combineCallbacks","req","buffer","end","err","resp","e","conf","JSON","query","uri","addQuery","client_id","removeQuery","callbacks","result","i","verifyIDToken","jwkForSignature","jwk","opts","audience","issuer","verify","nonce","init","getIDToken","cb","response_type","process","browser","tok","id_token","handleRedirect","assertion","generate","payload","jti","code","grant_type","redirect_uri","client_assertion","client_assertion_type","post","send","exchangeCode","module","exports","node","middleware","popUpRedirect","authFun","_oadaIdClientPopUpFunction","fragment","opener","isWsl","http","fs","resolve","server","createServer","test","statusCode","statusMessage","urlObj","file","__dirname","writeHead","statSync","createReadStream","listen","stringify","next","dom","param"],"mappings":"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","file":"static/js/main.6a9ee921.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","const SCOPE = 'oada.yield:all';\nconst METADATA_OPENATK = 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImRldjEiLCJqd2siOnsia3R5IjoiUlNBIiwibiI6InJyMzhpSzhGaTBfLUNSTFR2Vks0SUlDbGFyaWk2d1ZIcEU3elpQWG9FUmxfT29oNjRZbWJRY1JhNWVGdzBVUWhVdkVDaEt1OU5vM2ptN0xXOVpjTDFIS3Joa1VXLU9Rb2JPWFVuckNnb0NwYThWWWhfd1JJZFFZYnN2UFFWajVOR3V1TlhhWkJfX3B4Rnktbl9PMklNUzhPR3Jlem0zYlFIREFmLWpuZ0loWkdaZ0xhdkxKeVNIVXlEUUw0RmJRNkQzUXozQU1PcnhGdmE0S0JJUENRS0ZPbVlYVm40enRnVDY4aGd5TW9jMUt5dHhvUmd6VkhuQ2RUcFBXV1Zybk1GY0plZFlELUxtazBYbzVyallPeG1xOEExZWpmeFBNZVJfM1Y3OEFKazJMREk0dkdhSjNmbmFQWlM3Q3ZXOEYzcFdXaWpfQnlWR0NJLTVCcmtxSF9uUSIsImUiOiJBUUFCIn19.eyJyZWRpcmVjdF91cmlzIjpbImh0dHBzOi8vb3BlbmF0ay5jb20vRmllbGRXb3JrQXBwL29hdXRoMi9yZWRpcmVjdC5odG1sIiwiaHR0cHM6Ly9vcGVuYXRrLmNvbS9GaWVsZFdvcmtBcHAvb2F1dGgyL3JlZGlyZWN0LyIsImh0dHA6Ly9sb2NhbGhvc3Qvb2F1dGgyL3JlZGlyZWN0Lmh0bWwiLCJodHRwOi8vbG9jYWxob3N0L29hdXRoMi9yZWRpcmVjdC8iXSwidG9rZW5fZW5kcG9pbnRfYXV0aF9tZXRob2QiOiJ1cm46aWV0ZjpwYXJhbXM6b2F1dGg6Y2xpZW50LWFzc2VydGlvbi10eXBlOmp3dC1iZWFyZXIiLCJncmFudF90eXBlcyI6WyJhdXRob3JpemF0aW9uX2NvZGUiXSwicmVzcG9uc2VfdHlwZXMiOlsidG9rZW4iLCJjb2RlIiwiaWRfdG9rZW4iLCJpZF90b2tlbiB0b2tlbiIsImNvZGUgaWRfdG9rZW4iLCJjb2RlIHRva2VuIiwiY29kZSBpZF90b2tlbiB0b2tlbiJdLCJjbGllbnRfbmFtZSI6Ik9wZW5BVEsiLCJjbGllbnRfdXJpIjoiaHR0cDovL29wZW5hdGsuY29tIiwiY29udGFjdHMiOlsiU2FtIE5vZWwgPHNhbm9lbEBwdXJkdWUuZWR1PiJdLCJqd2tzIjp7ImtleXMiOlt7Imt0eSI6IlJTQSIsIm4iOiJ3ZWVmam51cjVxMTFQVHZzSTctMmlJUGRTeERJWGFva0tUWnk3OUR2dlNlWEFESFJnWXJCZW95bmFHN2NmaGttOGpkRzJ1NzV4Y2ozbUZweEVfVGs2a1AxTGR3TXZtaC11TXNuLVprb0REU3g0NkNOeGRiS2dyRFl3emZ2RElBU0RuZktwZ1FkX1RPLXQ0XzgyWjg5VmRnMFNGTzVOS2I4LS11NlN4c3dYU2NJckZGMkdzNDNrX1hqeEFOTEpqVzNMY0pRaG1GVmJWSjRpZHcyVXZNQXZwSVVhU3NZTHhaUXVNeTNxcEQzVGdWRmVmM3lBXy1jallVbUhRM09uTUM0Ym9JM24wVW1tSV8xcWtoaDJvMmFCTHhCUjZnakVIZG5DbTZZRldoOXV0NEFCcWN1X3ItZUdycVcxRHozdWVzdzY5UnZVazBVeldvc1BuMzVhVUZrQ1EiLCJlIjoiQVFBQiIsImtpZCI6IjYwZjZhYzNlYTY5MjRiNmJiZDBjZDVmYWQxMjg3ZDJiIn1dfSwic29mdHdhcmVfaWQiOiJhNzAzYmZkYy0zZmExLTQ5OWYtYjkwNS0xMWYwYjU0ZjM4MDciLCJyZWdpc3RyYXRpb25fcHJvdmlkZXIiOiJodHRwczovL2lkZW50aXR5Lm9hZGEtZGV2LmNvbSIsImlhdCI6MTUzMzg0NjExMn0.F0iwEhA2PNBVCEVRYbcbo1qTb01b8n1C3L_LtXmZT2APO5eLObMxt4PvAMaTR-5LPumG2uUHE9fthEK-NIbShgQVhWRMKEsXSYiZO4MhvYPAVjxuWT_ery7fsb1W2XK-a0AH-qBSEM5eBX3IYM2EatXobF3E87_xcMUVWSFFCj47QIm0TFU9x4o41P16prhRU3Y7jeG7VxQDiVvEhNo5qalyC6TgW961fzF0y6zG5BBs43UorRIWuUw27Du-8DBst3MsattRcqHX2JHLwRaacj4yAH_oGXjT64gOpkWzWQFi1AEtAm5-0IS_z3e4ULMuDrJDxL78iccQTloZFKvOlw';\nconst METADATA_LOCALHOST = 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImRldjEiLCJqd2siOnsia3R5IjoiUlNBIiwibiI6InJyMzhpSzhGaTBfLUNSTFR2Vks0SUlDbGFyaWk2d1ZIcEU3elpQWG9FUmxfT29oNjRZbWJRY1JhNWVGdzBVUWhVdkVDaEt1OU5vM2ptN0xXOVpjTDFIS3Joa1VXLU9Rb2JPWFVuckNnb0NwYThWWWhfd1JJZFFZYnN2UFFWajVOR3V1TlhhWkJfX3B4Rnktbl9PMklNUzhPR3Jlem0zYlFIREFmLWpuZ0loWkdaZ0xhdkxKeVNIVXlEUUw0RmJRNkQzUXozQU1PcnhGdmE0S0JJUENRS0ZPbVlYVm40enRnVDY4aGd5TW9jMUt5dHhvUmd6VkhuQ2RUcFBXV1Zybk1GY0plZFlELUxtazBYbzVyallPeG1xOEExZWpmeFBNZVJfM1Y3OEFKazJMREk0dkdhSjNmbmFQWlM3Q3ZXOEYzcFdXaWpfQnlWR0NJLTVCcmtxSF9uUSIsImUiOiJBUUFCIn19.eyJyZWRpcmVjdF91cmlzIjpbImh0dHA6Ly92aXAzLmVjbi5wdXJkdWUuZWR1OjgwMDAvb2F1dGgyL3JlZGlyZWN0Lmh0bWwiLCJodHRwOi8vbG9jYWxob3N0OjgwMDAvb2F1dGgyL3JlZGlyZWN0Lmh0bWwiLCJodHRwOi8vbG9jYWxob3N0OjgwMDAvb2F1dGgyL3JlZGlyZWN0LyJdLCJ0b2tlbl9lbmRwb2ludF9hdXRoX21ldGhvZCI6InVybjppZXRmOnBhcmFtczpvYXV0aDpjbGllbnQtYXNzZXJ0aW9uLXR5cGU6and0LWJlYXJlciIsImdyYW50X3R5cGVzIjpbImltcGxpY2l0Il0sInJlc3BvbnNlX3R5cGVzIjpbInRva2VuIiwiaWRfdG9rZW4iLCJpZF90b2tlbiB0b2tlbiJdLCJjbGllbnRfbmFtZSI6Ik9wZW5BVEsiLCJjbGllbnRfdXJpIjoiaHR0cHM6Ly92aXAzLmVjbi5wdXJkdWUuZWR1IiwiY29udGFjdHMiOlsiU2FtIE5vZWwgPHNhbm9lbEBwdXJkdWUuZWR1PiJdLCJzb2Z0d2FyZV9pZCI6IjFmNzg0NzdmLTM1NDEtNDEzYi05N2I2LTg2NDRiNGFmNWJiOCIsInJlZ2lzdHJhdGlvbl9wcm92aWRlciI6Imh0dHBzOi8vaWRlbnRpdHkub2FkYS1kZXYuY29tIiwiaWF0IjoxNTEyMDA2NzYxLCJqd2tzIjp7ImtleXMiOlt7Imt0eSI6IlJTQSIsIm4iOiJ1VjdaV21ESjJ4anJjbXJROHhXbW9XVUtLNUFjX0Uyd3ZRVm9JOTRaSUxQcXFLS2VDSTJXOEZabzVTT2xhVDd6YUV3RUVHVHpvcEFrTVpiNVRkZHF6emJRY2JKeW5tbFBzVmNvSEtaazRjSVZiaklVVWIyUXh2aW44WUtaNTlmQW1lSFhEU2Y2cktzMUdRSzNWeFYxMmdTSzZDdk92clBLel9IdkFrNzBHblJxV2IxUjVMV0VqdzNpYUdBSU9wcVU4X3hkd3NZaVJ1bmt1dGR6bDNOeUtLbm5tV0lEX2VhTHZSODFJRHBvM1phR0VNM2FSaUF0c3Y0My1jS3hTLWdydFJoSHRtblNpT2ZSbkh1a1JlSjU4azEyTjdIVnlzR2k3d1BLc3lKbHltdjZzWDR4Y2FUekFXd3NDRDZHWThhSzJaV0dmRkFnN3BybVBUaVZMaUhqb1EiLCJlIjoiQVFBQiIsImtpZCI6IjVhNWU3ZDQ1MzU3MjRjNjk5Yzk0MGExZjEyMTJkMzU2In1dfX0.W43ow1Mk8pAIJZ0-S4feCSdJbhhEFXAFycBxtUwVaHGNELXa5AiQQdayRcSpZLeYhBULeEE2Kg6Ikb6eqyWrO3w4QUAEs88YYpc2ghUJwFLrI_1_69hyeNLo_dt2qSc1fbc4Bx9zEUsFh1he9sUq4SAjrbTnv6v_o513XFbsSjDq_qzC2QTKuQRPxxxCsTRvDvP_gkTLXPzzh_I0ATJIgBCoRxT1UNBNU6xnuXSrwS9NG-8k_B2mABNAwvWdYpqQBH1g5D7vWcaT-urZ0Pc_7ZjQv_zN407Gn_hgCcZ1TkNtjlM7jM2dv09Ckk0vANCjuv31o0JtRKjZdblIkdB_jQ';\n\nconst REDIRECT_OPENATK = 'https://openatk.com/FieldWorkApp/oauth2/redirect/';\nconst REDIRECT_LOCALHOST = 'http://localhost:8000/oauth2/redirect/';\n\nlet METADATA;\nlet REDIRECT;\nlet oadaDomain = '';\nif (process.env.NODE_ENV !== 'production') {\n  console.log('NODE_ENV = ', process.env.NODE_ENV);\n  METADATA = METADATA_LOCALHOST;\n  REDIRECT = REDIRECT_LOCALHOST;\n  oadaDomain = 'https://localhost';\n} else {\n  METADATA = METADATA_OPENATK;\n  REDIRECT = REDIRECT_OPENATK;\n}\n\nlet OPTIONS = {\n    redirect: REDIRECT,\n    metadata: METADATA,\n    scope: SCOPE\n};\n\nexport default {\n  OPTIONS,\n  REDIRECT,\n  METADATA,\n  SCOPE,\n  oadaDomain\n}\n","import _state from './state'\nimport _actions from './actions'\n\nexport const state = _state;\nexport const actions = _actions;\n","import config from '../../../config'\nexport default {\n  domain: config.oadaDomain\n}\n","export default {\n  onInitialize({ state, actions }) {\n    const domain = window.localStorage['oada:domain'];\n    const token = window.localStorage['oada:token'];\n    if (domain) {\n      state.view.Login.domain = domain\n    }\n    if (domain && token) {\n      //Auto login\n      actions.view.Login.login({token});\n    }\n  },\n  async login({ state, actions }, {token}) {\n    const myState = state.view.Login;\n    let domain = myState.domain;\n    myState.loading = true;\n    domain = domain.match(/^http/) ? domain : 'https://'+myState.domain;\n    await actions.app.OADAManager.login({domain, token});\n    myState.loading = false;\n    if (state.app.OADAManager.connected) {\n      myState.loggedIn = true;\n      //Save domain and token\n      window.localStorage['oada:domain'] = myState.domain;\n      window.localStorage['oada:token'] = state.app.OADAManager.token;\n    }\n  },\n  async logout({ state, actions }) {\n    const myState = state.view.Login;\n    if (state.app.OADAManager.connected) {\n      await actions.app.OADAManager.logout();\n      delete window.localStorage['oada:domain']\n      delete window.localStorage['oada:token']\n    }\n    myState.loggedIn = false;\n  },\n  domainChange({ state }, data) {\n    const myState = state.view.Login;\n    myState.domain = data.value;\n  },\n  viewDemo({ state }, data) {\n    const myState = state.view.Login;\n    myState.loggedIn = true;\n  }\n}\n","import _ from 'lodash';\nimport geojsonArea from '@mapbox/geojson-area';\n\nexport default {\n  open: false,\n  fieldId: ({}, state) => {\n    return _.get(state, `view.Map.selectedField`);\n  },\n  field: ({fieldId: selectedFieldId}, state) => {\n    const operation = _.get(state, `view.TopBar.OperationDropdown.selectedOperation`);\n    if (selectedFieldId == null) return null;\n    const status = _.get(operation, `fields.${selectedFieldId}.status`, null);\n    let field = null;\n    if (_.get(state, `app.OADAManager.connected`) == true) {\n      let currentConnection = _.get(state, `app.OADAManager.currentConnection`)\n      field = _.get(state, `app.oada.${currentConnection}.bookmarks.seasons.2020.fields.${selectedFieldId}`); //TODO year\n    } else {\n      field = _.get(state, `app.localData.abc123.seasons.2020.fields.${selectedFieldId}`); //TODO year, organization\n    }\n    if (field == null) return null;\n    const acres = geojsonArea.geometry(field.boundary) * 0.000247105 //Meters to acres;\n    return _.merge({}, field, {status, acres});\n  },\n  farm: ({field}, state) => {\n    //Get farm for selected field\n    let farm = null;\n    if (_.get(state, `app.OADAManager.connected`) == true) {\n      let currentConnection = _.get(state, `app.OADAManager.currentConnection`)\n      if (_.get(field, 'farm._id')) {\n        const farmId = _.get(state, `app.oadaSeasonFarmsIdBy_id.${_.get(field, 'farm._id')}.id`)\n        farm = _.get(state, `app.oada.${currentConnection}.bookmarks.seasons.2020.farms.${farmId}`); //TODO year\n      }\n    } else {\n      if (_.get(field, 'farm.id')) {\n        farm = _.get(state, `app.localData.abc123.seasons.2020.farms.${field.farm.id}`); //TODO year, organization\n      }\n    }\n    return farm;\n  },\n  showAddOperationButton: ({}, state) => {\n    if (_.get(state, `app.OADAManager.connected`) == true) {\n      let currentConnection = _.get(state, `app.OADAManager.currentConnection`)\n      return _.isEmpty(_.get(state, `app.oada.${currentConnection}.bookmarks.seasons.2020.operations`)); //TODO year\n    } else {\n      return _.isEmpty(_.get(state, `app.localData.abc123.seasons.2020.operations`)); //TODO year\n    }\n  }\n}\n","export default {\n  bookmarks: {\n    _type: \"application/vnd.oada.bookmarks.1+json\",\n    _rev: 0,\n    fields: {\n      _type: \"application/vnd.oada.fields.1+json\",\n      _rev: 0,\n      fields: {\n        \"*\": {\n          _type: \"application/vnd.oada.field.1+json\",\n          _rev: 0,\n          farm: {\n            _type: \"application/vnd.oada.farm.1+json\",\n          }\n        }\n      },\n      farms: {\n        \"*\": {\n          _type: \"application/vnd.oada.farm.1+json\",\n          _rev: 0\n        }\n      }\n    },\n    seasons: {\n      _type: \"application/vnd.oada.seasons.1+json\",\n      _rev: 0,\n      \"*\": {\n        _type: \"application/vnd.oada.season.1+json\",\n        _rev: 0,\n        fields: {\n          \"*\": {\n            _type: \"application/vnd.oada.field.1+json\",\n            _rev: 0,\n            operations: {\n              \"*\": {\n                _type: \"application/vnd.oada.operation.1+json\"\n              }\n            }\n          }\n        },\n        farms: {\n          \"*\": {\n            _type: \"application/vnd.oada.farm.1+json\",\n            _rev: 0\n          }\n        },\n        operations: {\n          \"*\": {\n            _type: \"application/vnd.oada.operation.1+json\",\n            _rev: 0\n          }\n        }\n      }\n    }\n  }\n};\n","import _state from './state'\nimport _actions from './actions'\n\nexport const state = _state;\nexport const actions = _actions;\n","import _ from 'lodash';\nimport uuid from 'uuid/v1';\nimport tree from '../../app/OADAManager/tree.js';\n\nexport default {\n  open({state}) {\n    const myState = state.view.FieldDetails;\n    myState.open = true;\n  },\n  close({state}) {\n    const myState = state.view.FieldDetails;\n    myState.open = false;\n  },\n  changeOADAFieldStatus({state, actions}, status) {\n    const selectedFieldId = _.get(state, `view.Map.selectedField`);\n    const operationId = _.get(state, `view.TopBar.OperationDropdown.selectedOperationId`)\n\n    let currentConnection = _.get(state, `app.OADAManager.currentConnection`)\n    let field = _.clone(_.get(state, `app.oada.${currentConnection}.bookmarks.seasons.2020.operations.${operationId}.fields.${selectedFieldId}`)) || {}; //TODO year, organization\n    let newStatus = status;\n    if (field.status == status) newStatus = null; //Unchecking\n    field.status = newStatus;\n    if (field.status == null) {\n      //Optimistic Update\n      //Remove field from operation\n      _.unset(state, `app.oada.${currentConnection}.bookmarks.seasons.2020.operations.${operationId}.fields.${selectedFieldId}`) //TODO year, organization\n      //Remove operation from season's field's operation list\n      _.unset(state, `app.oada.${currentConnection}.bookmarks.seasons.2020.fields.${selectedFieldId}.operations.${operationId}`) //TODO year, organization\n\n      //Change on server\n      let requests = [\n        {  //Remove field to operation\n          type: 'application/vnd.oada.operation.1+json', //TODO oada.put should handle this\n          path: `/bookmarks/seasons/2020/operations/${operationId}/fields/${selectedFieldId}` //TODO year\n        },\n        { //Remove operation to field in season's field's operation list\n          type: 'application/vnd.oada.field.1+json',\n          path: `/bookmarks/seasons/2020/fields/${selectedFieldId}/operations/${operationId}` //TODO year\n        }\n      ];\n      actions.app.oada.delete({requests, connection_id: currentConnection});\n    } else {\n      //Optimistic Update\n      //Add field to operation\n      _.set(state, `app.oada.${currentConnection}.bookmarks.seasons.2020.operations.${operationId}.fields.${selectedFieldId}`, field) //TODO year, organization\n      //Create operations key on season's field list if doesn't exist\n      if (_.get(state, `app.oada.${currentConnection}.bookmarks.seasons.2020.fields.${selectedFieldId}.operations`) == null) _.set(state, `app.localData.abc123.seasons.2020.fields.${selectedFieldId}.operations`, {}) //TODO year, organization\n      //Add operation to field in season's field's operation list\n      _.set(state, `app.oada.${currentConnection}.bookmarks.seasons.2020.fields.${selectedFieldId}.operations.${operationId}`, {}) //TODO year, organization\n\n      //Change on server\n      const operation = _.get(state, `view.TopBar.OperationDropdown.selectedOperation`)\n      let requests = [\n        {  //Add field to operation\n          tree,\n          data: field,\n          type: 'application/vnd.oada.operation.1+json', //TODO oada.put should handle this\n          path: `/bookmarks/seasons/2020/operations/${operationId}/fields/${selectedFieldId}` //TODO year\n        },\n        { //Add operation to field in season's field's operation list\n          tree,\n          data: {_id: operation._id}, //OADA _id\n          type: 'application/vnd.oada.field.1+json',\n          path: `/bookmarks/seasons/2020/fields/${selectedFieldId}/operations/${operationId}` //TODO year\n        }\n      ];\n      actions.app.oada.put({requests, connection_id: currentConnection});\n    }\n  },\n  changeLocalFieldStatus({state}, status) {\n    const myState = state.view.FieldDetails;\n    const selectedFieldId = _.get(state, `view.Map.selectedField`);\n    const operationId = _.get(state, `view.TopBar.OperationDropdown.selectedOperationId`)\n    var field = _.clone(_.get(state, `app.localData.abc123.seasons.2020.operations.${operationId}.fields.${selectedFieldId}`)) || {}; //TODO year, organization\n    var newStatus = status;\n    if (field.status == status) newStatus = null; //Unchecking\n    field.status = newStatus;\n    if (field.status == null) {\n      //Remove field from operation\n      _.unset(state, `app.localData.abc123.seasons.2020.operations.${operationId}.fields.${selectedFieldId}`) //TODO year, organization\n      //Remove operation from season's field's operation list\n      _.unset(state, `app.localData.abc123.seasons.2020.fields.${selectedFieldId}.operations.${operationId}`) //TODO year, organization\n    } else {\n      //Add field to operation\n      _.set(state, `app.localData.abc123.seasons.2020.operations.${operationId}.fields.${selectedFieldId}`, field) //TODO year, organization\n      //Create operations key on season's field list if doesn't exist\n      if (_.get(state, `app.localData.abc123.seasons.2020.fields.${selectedFieldId}.operations`) == null) _.set(state, `app.localData.abc123.seasons.2020.fields.${selectedFieldId}.operations`, {}) //TODO year, organization\n      //Add operation to field in season's field's operation list\n      _.set(state, `app.localData.abc123.seasons.2020.fields.${selectedFieldId}.operations.${operationId}`, {}) //TODO year, organization\n    }\n  },\n  onStatusChange({state, actions}, {status}) {\n    const myActions = actions.view.FieldDetails;\n    if (state.app.OADAManager.connected) {\n      myActions.changeOADAFieldStatus(status)\n    } else {\n      myActions.changeLocalFieldStatus(status)\n    }\n  },\n  onAddNewOperationClick({actions}) {\n    actions.view.TopBar.OperationDropdown.onAdd();\n  }\n}\n","import _state from './state'\nimport _actions from './actions'\n\nexport const state = _state;\nexport const actions = _actions;\n","export default {\n  open: false,\n  selectedField: null\n}\n","export default {\n  \n}\n","import _ from 'lodash';\n\nexport default {\n  fieldStyles: {},\n  selectedField: null,\n  editingField: null,\n  center: [41.448068, -84.972648],\n  zoom: 13,\n  bounds: [\n    [\n      41.44053877385792,\n      -84.97886180877687\n    ],\n    [\n      41.46330393671208,\n      -84.96770381927492\n    ]\n  ],\n  fields: ({}, state) => {\n    const fieldStyles = _.get(state, `view.Map.fieldStyles`)\n    const editingField = _.get(state, `view.Map.editingField`)\n    const drawingBoundary = _.get(state, `view.Map.BoundaryDrawing.drawing`)\n    const operation = _.get(state, `view.TopBar.OperationDropdown.selectedOperation`)\n    const fieldsToRender = _.get(state, `app.seasonFields`);\n    return _.chain(fieldsToRender).mapValues((field, id) => {\n      if (field == null) return null;\n      if (field.boundary == null) return null;\n      if (editingField == id) return null; //Don't show this field.\n      var styledField = _.clone(field);\n      //Add any styles\n      if (fieldStyles[id] != null) styledField.style = fieldStyles[id];\n      //Fill based on status of current operation\n      if (operation) {\n        var color = \"white\"\n        if (operation.fields && operation.fields[id]) {\n          if (operation.fields[id].status == 'planned') color = 'red'\n          if (operation.fields[id].status == 'started') color = 'orange'\n          if (operation.fields[id].status == 'done') color = '#0acd00' //Green\n        }\n        styledField.style = _.merge({}, styledField.style, {fillColor: color, color})\n      }\n      return styledField;\n    }).omitBy((v, k) => {\n      if (v == null) return true;\n    }).value();\n  }\n}\n","import _ from 'lodash';\nimport Promise from 'bluebird';\nimport BBox from '@turf/bbox';\nimport GeoJSON from 'geojson';\n\nexport default {\n  async zoomTo({state}, {latitude, longitude, zoom}) {\n    const myState = _.get(state, 'view.Map');\n    myState.center = [latitude, longitude];\n    myState.zoom = zoom;\n    await Promise.delay(500);\n    myState.center = null;\n    myState.zoom = null;\n  },\n  styleField: {\n    highlight({state}, fieldId) {\n      if (fieldId) {\n        const myState = _.get(state, 'view.Map');\n        _.set(myState, `fieldStyles.${fieldId}`, {weight: 5})\n      }\n    },\n    unhighlight({state}, fieldId) {\n      if (fieldId) {\n        const myState = _.get(state, 'view.Map');\n        _.set(myState, `fieldStyles.${fieldId}`, {weight: 3})\n      }\n    }\n  },\n  async unselectField({state, actions}) {\n    const myActions = _.get(actions, 'view.Map');\n    const myState = _.get(state, 'view.Map');\n    if (myState.selectedField) {\n      actions.view.FieldDetails.close();\n      myActions.styleField.unhighlight(myState.selectedField);\n      await Promise.delay(200)\n      myState.selectedField = null;\n    }\n  },\n  onFieldClick({state, actions}, {id}) {\n    const myActions = _.get(actions, 'view.Map');\n    const myState = _.get(state, 'view.Map');\n    const drawing = _.get(myState, `BoundaryDrawing.drawing`);\n    if (!drawing) {\n      myActions.styleField.unhighlight(myState.selectedField);\n      myState.selectedField = id;\n      myActions.styleField.highlight(id);\n      actions.view.FieldDetails.open();\n    }\n  },\n  onMapClick({actions}, props) {\n    const myActions = _.get(actions, 'view.Map');\n    myActions.unselectField()\n    //Pass click to boundary drawing\n    myActions.BoundaryDrawing.onMapClick(props)\n  },\n  async zoomBounds({state}, props) {\n    const myState = _.get(state, 'view.Map');\n    const fields = _.compact(_.map(myState.fields, (f) => {\n      if (!f.boundary) return null; //Don't include fields without boundaries\n      return {geo: f.boundary}\n    }));\n    const featureCollection = GeoJSON.parse(fields, {GeoJSON: 'geo'})\n    const bounds = BBox(featureCollection)\n    if (isFinite(bounds[0]) && isFinite(bounds[1]) && isFinite(bounds[2]) && isFinite(bounds[3])) {\n      myState.bounds = [[bounds[1], bounds[0]], [bounds[3], bounds[2]]];\n    }\n  }\n}\n","import _state from './state'\nimport _actions from './actions'\n\nexport const state = _state;\nexport const actions = _actions;\n","export default {\n  boundary: {},\n  drawing: false\n}\n","import _ from 'lodash';\nimport {pipe, debounce, mutate} from 'overmind';\nimport uuid from 'uuid/v1';\n\nexport default {\n  addPointToBoundary({state}, props) {\n    const myState = state.view.Map.BoundaryDrawing;\n    _.set(myState, `boundary.${uuid()}`, [props.lat, props.lng]);\n  },\n  updateBoundaryPoint: pipe(debounce(10), mutate(({state}, props) => {\n    const myState = state.view.Map.BoundaryDrawing;\n    _.set(myState, `boundary.${props.id}`, [props.latlng.lat, props.latlng.lng]);\n  })),\n  onMapClick({state, actions}, {lat, lng}) {\n    const myState = state.view.Map.BoundaryDrawing;\n    const myActions = actions.view.Map.BoundaryDrawing;\n    if (myState.drawing) {\n      myActions.addPointToBoundary({lat, lng});\n    }\n  },\n  onMarkerMove({actions}, props) {\n    const myActions = actions.view.Map.BoundaryDrawing;\n    myActions.updateBoundaryPoint(props);\n  },\n  onStartDrawing({state}, props) {\n    const myState = state.view.Map.BoundaryDrawing;\n    myState.boundary = (props || {}).boundary || {};\n    myState.drawing = true;\n  },\n  onStopDrawing({state}, props) {\n    const myState = state.view.Map.BoundaryDrawing;\n    myState.drawing = false;\n    myState.boundary = {};\n  }\n}\n","import _state from './state'\nimport _actions from './actions'\nimport * as BoundaryDrawing from './BoundaryDrawing'\n\nexport const state = {\n  BoundaryDrawing: BoundaryDrawing.state,\n  ..._state\n};\nexport const actions = {\n  BoundaryDrawing: BoundaryDrawing.actions,\n  ..._actions\n}\n","import config from '../../../config'\nexport default {\n  OADADomain: {\n    open: false,\n    domain: config.oadaDomain\n  }\n}\n","import _ from 'lodash';\nimport uuid from 'uuid/v1'\nimport tree from \"../../app/OADAManager/tree\";\n\nexport default {\n  OADADomain: {\n    open({state}) {\n      const myState = state.view.Modals.OADADomain;\n      myState.open = true;\n    },\n    close({state}) {\n      const myState = state.view.Modals.OADADomain;\n      myState.open = false;\n    },\n    onConnectClick({actions}) {\n      const myActions = actions.view.Modals.OADADomain;\n      myActions.open();\n    },\n    onDomainChange({state}, {domain}) {\n      const myState = state.view.Modals.OADADomain;\n      myState.domain = domain;\n    },\n    async onConnect({actions, state}) {\n      const myState = state.view.Modals.OADADomain;\n      const myActions = actions.view.Modals.OADADomain;\n      const {domain} = myState;\n      myState.loading = true;\n      await actions.app.OADAManager.onDomainChanged({domain});\n      myState.loading = false;\n      myActions.close()\n    },\n    onCancel({actions}) {\n      const myActions = actions.view.Modals.OADADomain;\n      myActions.close();\n    }\n  }\n}\n","import _ from 'lodash';\nimport uuid from 'uuid/v1'\nimport tree from \"../../../app/OADAManager/tree\";\n\n\nfunction convertToGEOJSON(points) {\n  var boundary = {\n    type: \"Polygon\",\n    coordinates: [_.map(points, (p) => {return [p[1], p[0]]})] //Flip lat/lng and add array around\n  }\n  //Add first point again\n  if (boundary.coordinates && boundary.coordinates[0] && boundary.coordinates[0].length > 0) {\n    boundary.coordinates[0].push(boundary.coordinates[0][0]);\n  }\n  return boundary;\n}\nfunction getChanges({state, actions}, {fieldId, newBoundary, farmId, farm_id, seasonFarm_id}) {\n  const myState = state.view.Modals.SaveField;\n  //See if name or boundary has changed\n  let seasonField = actions.app.getSeasonField(fieldId);\n  let newName = myState.name;\n  var seasonFieldChanges = {};\n  var fieldChanges = {};\n  //Get changes the effect both\n  if (newName != seasonField.name) seasonFieldChanges.name = newName;\n  if (_.isEqual(newBoundary, seasonField.boundary) == false) seasonFieldChanges.boundary = newBoundary;\n\n  fieldChanges = _.cloneDeep(seasonFieldChanges)\n  //See if farm has changed\n  if (seasonFarm_id) {\n    //Connected to oada\n    if (!seasonField.farm || seasonField.farm._id != seasonFarm_id) {\n      seasonFieldChanges.farm = {_id: seasonFarm_id};\n      //TODO this isn't right, we shouldn't be adding a farm in the function that calls this if it isn't our current year\n      fieldChanges.farm = {_id: farm_id};\n    }\n  } else {\n    //Local\n    if (!seasonField.farm || seasonField.farm.id != farmId) {\n      seasonFieldChanges.farm = {id: farmId};\n      fieldChanges.farm = {id: farmId};\n    }\n  }\n  //TODO only change field if is current year\n  return {fieldChanges, seasonFieldChanges};\n}\nfunction saveChangesToLocalData({state}, editingFieldId, fieldChanges, seasonFieldChanges) {\n  if (_.isEmpty(fieldChanges) && _.isEmpty(seasonFieldChanges)) return;\n  const fieldPath = `app.localData.abc123.fields.fields.${editingFieldId}`; //TODO organization\n  _.set(state, fieldPath, _.merge({}, _.get(state, fieldPath), fieldChanges));\n  const seasonFieldPath = `app.localData.abc123.seasons.2020.fields.${editingFieldId}` //TODO year, organization\n  _.set(state, seasonFieldPath, _.merge({}, _.get(state, seasonFieldPath), seasonFieldChanges));\n}\nasync function saveChangesToOADA(context, editingFieldId, fieldChanges, seasonFieldChanges) {\n  const { state, actions } = context;\n  if (_.isEmpty(fieldChanges) && _.isEmpty(seasonFieldChanges)) return;\n  //Add to OADA\n  let requests = [];\n  if (_.isEmpty(fieldChanges) == false) {\n    requests.push({\n      tree,\n      data: fieldChanges,\n      path: `/bookmarks/fields/fields/${editingFieldId}`\n    })\n  }\n  if (_.isEmpty(seasonFieldChanges) == false) {\n    requests.push({\n      tree,\n      data: seasonFieldChanges,\n      path: `/bookmarks/seasons/2020/fields/${editingFieldId}` //TODO year\n    })\n  }\n  console.log('fieldChanges', fieldChanges);\n  console.log('seasonFieldChanges', seasonFieldChanges);\n  const connection_id = _.get(state, `app.OADAManager.currentConnection`)\n  await actions.app.oada.put({requests, connection_id})\n}\n\nfunction createField(context, {boundary, farmId, farm_id}) {\n  const { state } = context;\n  const myState = state.view.Modals.SaveField;\n  var field = {\n    name: myState.name,\n    boundary: boundary,\n    farm: (farm_id) ?\n      {\n        _id: farm_id //OADA farm resource id\n      }\n      :\n      {\n        id: farmId\n      }\n  }\n  return field\n}\nfunction addFieldToLocalData(context, {field}) {\n  const { state } = context;\n  const id = uuid();\n  _.set(state, `app.localData.abc123.fields.fields.${id}`, field); //TODO organization\n  _.set(state, `app.localData.abc123.seasons.2020.fields.${id}`, {...field, operations: {}, year: '2020'}); //TODO year, organization\n  return id;\n}\nasync function addFieldToOADA(context, {field, seasonField}) {\n  const { state, actions } = context;\n  const id = uuid();\n  //Add to OADA\n  let requests = [];\n  if (field) {\n    requests.push({\n      tree,\n      data: field,\n      path: `/bookmarks/fields/fields/${id}`\n    })\n  }\n  if (seasonField) {\n    requests.push({\n      tree,\n      data: {...seasonField, operations: {}, year: '2020'}, //TODO year\n      path: `/bookmarks/seasons/2020/fields/${id}` //TODO year\n    })\n  }\n  let connection_id = _.get(state, `app.OADAManager.currentConnection`)\n  await actions.app.oada.put({requests, connection_id})\n}\n\nexport default {\n  open({state, actions}) {\n    const myState = state.view.Modals.SaveField;\n    const editingField = _.get(state, `view.Map.editingField`);\n    if (editingField == null) {\n      myState.name = \"\";\n    } else {\n      let field = actions.app.getSeasonField(editingField);\n      //Populate the name in the modal popup\n      myState.name = field.name;\n      if (state.app.OADAManager.connected) {\n        //Get season farm id by oada id\n        const farmId = _.get(state, `app.oadaSeasonFarmsIdBy_id.${_.get(field, 'farm._id')}.id`)\n        myState.farmId = farmId;\n      } else {\n        myState.farmId = _.get(field, 'farm.id');\n      }\n    }\n    myState.open = true;\n  },\n  close({state}) {\n    const myState = state.view.Modals.SaveField;\n    myState.open = false;\n  },\n  async saveField(context) {\n    const {state} = context;\n    const myState = state.view.Modals.SaveField;\n    //Convert the field to geojson\n    const points = _.get(state, `view.Map.BoundaryDrawing.boundary`)\n    const boundary = convertToGEOJSON(points);\n\n    //Create farm or get existing farms id (cannot update an existing farm here)\n    let farmId = myState.farmId;\n    let farm_id = null;\n    let seasonFarm_id = null;\n    let farm = myState.farm;\n    if (farm) {\n      if (state.app.OADAManager.connected) {\n        //Get farm_id\n        farm_id = _.get(state, `app.oadaOrgData.fields.farms.${farmId}._id`)\n        //Get seasonFarm_id from farmId\n        seasonFarm_id = _.get(state, `app.seasonFarms.${farmId}._id`)\n      }\n    }\n    //Update or create field\n    let editingFieldId = _.get(state, `view.Map.editingField`);\n    if (editingFieldId) {\n      //We are editing a field find the changes, if any\n      const {fieldChanges, seasonFieldChanges} = getChanges(context, {fieldId: editingFieldId, newBoundary: boundary, farmId, farm_id, seasonFarm_id})\n      if (state.app.OADAManager.connected) {\n        saveChangesToOADA(context, editingFieldId, fieldChanges, seasonFieldChanges)\n      } else {\n        saveChangesToLocalData(context, editingFieldId, fieldChanges, seasonFieldChanges)\n      }\n    } else {\n      //TODO only add field if is current year, otherwise just seasonfield\n      if (state.app.OADAManager.connected) {\n        const field = await createField(context, {boundary, farm_id});\n        const seasonField = await createField(context, {boundary, farm_id: seasonFarm_id});\n        await addFieldToOADA(context, {field, seasonField})\n      } else {\n        const field = await createField(context, {boundary, farm, farmId: farmId})\n        await addFieldToLocalData(context, {field})\n      }\n    }\n  },\n  onSave({actions, state}) {\n    const myActions = actions.view.Modals.SaveField;\n    myActions.saveField();\n    actions.view.Map.BoundaryDrawing.onStopDrawing();\n    state.view.Map.editingField = null;\n    myActions.close();\n  },\n  onCancel({actions, state}) {\n    const myActions = actions.view.Modals.SaveField;\n    actions.view.Map.BoundaryDrawing.onStopDrawing();\n    state.view.Map.editingField = null;\n    myActions.close();\n  },\n  onNameChange({state}, {name}) {\n    const myState = state.view.Modals.SaveField;\n    myState.name = name;\n  },\n  onFarmSearchChange({state}, value) {\n    const myState = state.view.Modals.SaveField;\n    myState.farmSearch = value;\n  },\n  onFarmChange({state}, {id}) {\n    const myState = state.view.Modals.SaveField;\n    myState.farmId = id;\n  },\n  onFarmAdd({actions}) {\n    actions.view.Modals.NewFarm.open({callbackAction: 'view.Modals.SaveField.onFarmAddComplete'});\n  },\n  onFarmAddComplete({state}, {id}) {\n    const myState = state.view.Modals.SaveField;\n    //Update farmId\n    myState.farmId = id;\n  }\n}\n","import _state from './state'\nimport _actions from './actions'\n\nexport const state = _state;\nexport const actions = _actions;\n","import _ from 'lodash';\nexport default {\n  open: false,\n  name: '',\n  farmSearch: '',\n  farms: ({farmSearch: search}, state) => {\n    return _.compact(_.map(state.app.seasonFarms, (f, id) => {\n      if (!f || search != '' && f.name && f.name.toLowerCase().search(search.toLowerCase()) == -1) return null;\n      return {key: id, text: f.name, value: id};\n    }))\n  },\n  farmId: null,\n  farm: ({farmId, farms}, state) => {\n    if (farmId) {\n      return _.get(state, `app.seasonFarms.${farmId}`)\n    }\n  }\n}\n","import _ from 'lodash';\nimport uuid from 'uuid/v1'\nimport tree from \"../../../app/OADAManager/tree\";\n\nfunction createOperation(context, {name}) {\n  var operation = {\n    name,\n    fields: {}\n  }\n  return operation;\n}\n\nfunction addOperationToLocalData({state}, {operation}) {\n  const id = uuid();\n  _.set(state, `app.localData.abc123.seasons.2020.operations.${id}`, operation); //TODO year, organization\n  return id;\n}\nasync function addOperationToOADA({state, actions}, {operation}) {\n  //Add to OADA\n  const id = uuid();\n  let requests = [\n    {\n      tree,\n      data: operation,\n      path: `/bookmarks/seasons/2020/operations/${id}` //TODO year\n    }\n  ];\n  const connection_id = _.get(state, `app.OADAManager.currentConnection`)\n  const ret = await actions.app.oada.put({requests, connection_id})\n  const _id = _.get(ret, 'responses.0.headers.content-location').substr(1); //Remove leading `/` from /resources/<uuid>\n  return {id, _id}\n}\n\nexport default {\n  open({state}) {\n    const myState = state.view.Modals.NewOperation;\n    myState.name = '';\n    myState.open = true;\n  },\n  close({state}) {\n    const myState = state.view.Modals.NewOperation;\n    myState.open = false;\n  },\n  async saveOperation(context) {\n    const {state} = context;\n    const myState = state.view.Modals.NewOperation;\n    const operation = createOperation(context, {name: myState.name})\n    if (state.app.OADAManager.connected) {\n      const {id, _id} = await addOperationToOADA(context, {operation});\n      _.set(state, `view.TopBar.OperationDropdown.selected`, id)\n    } else {\n      const id = await addOperationToLocalData(context, {operation});\n      _.set(state, `view.TopBar.OperationDropdown.selected`, id)\n    }\n  },\n  onNameChange({state}, {name}) {\n    const myState = state.view.Modals.NewOperation;\n    myState.name = name;\n  },\n  onCancel({actions}) {\n    const myActions = actions.view.Modals.NewOperation;\n    myActions.close();\n  },\n  async onSave({actions}) {\n    const myActions = actions.view.Modals.NewOperation;\n    await myActions.saveOperation();\n    myActions.close();\n  }\n}\n","import _state from './state'\nimport _actions from './actions'\n\nexport const state = _state;\nexport const actions = _actions;\n","export default {\n  open: false,\n  name: ''\n}\n","import _ from 'lodash';\nimport uuid from 'uuid/v1'\nimport tree from \"../../../app/OADAManager/tree\";\n\nfunction createFarm(context, {name}) {\n  var farm = {\n    name\n  }\n  return farm;\n}\nfunction addFarmToLocalData(context, {farm}) {\n  const { state } = context;\n  const id = uuid();\n  _.set(state, `app.localData.abc123.farms.${id}`, farm); //TODO organization\n  _.set(state, `app.localData.abc123.seasons.2020.farms.${id}`, farm); //TODO year, organization\n  return id;\n}\nasync function addFarmToOADA(context, {farm}) {\n  const { state, actions } = context;\n  const id = uuid();\n  //TODO only add to season farms depending on what year is selected, need to figure out return values for that as well (since may only have one request)\n  //Add to OADA\n  let requests = [\n    {\n      tree,\n      data: farm,\n      path: `/bookmarks/fields/farms/${id}`\n    },\n    {\n      tree,\n      data: farm,\n      path: `/bookmarks/seasons/2020/farms/${id}` //TODO year\n    },\n  ];\n  let connection_id = _.get(state, `app.OADAManager.currentConnection`)\n  const ret = await actions.app.oada.put({requests, connection_id})\n  const farm_id = _.get(ret, 'responses.0.headers.content-location').substr(1); //Remove leading `/` from /resources/<uuid>\n  if (farm_id == null) throw 'OADA did not return an _id when creating a farm.'\n  const seasonFarm_id = _.get(ret, 'responses.1.headers.content-location').substr(1); //Remove leading `/` from /resources/<uuid>\n  if (seasonFarm_id == null) throw 'OADA did not return an _id when creating a season farm.'\n  return {farm_id, seasonFarm_id, id};\n}\nexport default {\n  open({state}, {callbackAction}) {\n    const myState = state.view.Modals.NewFarm;\n    myState.name = '';\n    myState.open = true;\n    myState.callbackAction = callbackAction || null;\n  },\n  close({state}) {\n    const myState = state.view.Modals.NewFarm;\n    myState.open = false;\n  },\n  async saveFarm(context) {\n    const {state, actions} = context;\n    const myState = state.view.Modals.NewFarm;\n    const farm = createFarm(context, {name: myState.name})\n    if (state.app.OADAManager.connected) {\n      const {farm_id, seasonFarm_id, id} = await addFarmToOADA(context, {farm});\n      if (myState.callbackAction) {\n        const action = _.get(actions, myState.callbackAction);\n        if (!action) throw `callbackAction: ${myState.callbackAction} does not exist.`\n        action({farm_id, seasonFarm_id, id});\n      }\n    } else {\n      const id = await addFarmToLocalData(context, {farm});\n      if (myState.callbackAction) {\n        const action = _.get(actions, myState.callbackAction);\n        if (!action) throw `callbackAction: ${myState.callbackAction} does not exist.`\n        action({id});\n      }\n    }\n  },\n  onNameChange({state}, {name}) {\n    const myState = state.view.Modals.NewFarm;\n    myState.name = name;\n  },\n  onCancel({actions}) {\n    const myActions = actions.view.Modals.NewFarm;\n    myActions.close();\n  },\n  async onSave({actions}) {\n    const myActions = actions.view.Modals.NewFarm;\n    await myActions.saveFarm();\n    myActions.close();\n  }\n}\n","import _state from './state'\nimport _actions from './actions'\n\nexport const state = _state;\nexport const actions = _actions;\n","export default {\n  open: false,\n  name: ''\n}\n","import _state from './state'\nimport _actions from './actions'\nimport * as SaveField from './SaveField'\nimport * as NewOperation from './NewOperation'\nimport * as NewFarm from './NewFarm'\n\nexport const state = {\n  SaveField: SaveField.state,\n  NewOperation: NewOperation.state,\n  NewFarm: NewFarm.state,\n  ..._state\n};\nexport const actions = {\n  SaveField: SaveField.actions,\n  NewOperation: NewOperation.actions,\n  NewFarm: NewFarm.actions,\n  ..._actions\n}\n","import _ from 'lodash'\nimport uuid from 'uuid/v1'\n\nexport default {\n  onMyLocationClick({actions}, coords) {\n    if (!coords) return;\n    const {latitude, longitude} = coords;\n    actions.view.Map.zoomTo({latitude, longitude, zoom: 15})\n  },\n  onLocationChange({state}, coords) {\n    if (!coords) return;\n    const {latitude, longitude} = coords;\n    console.log('onLocationChange', coords)\n    if (latitude == null || longitude == null) return;\n    state.view.Map.location = {latitude, longitude};\n  },\n  onAddField({actions}) {\n    actions.view.Map.BoundaryDrawing.onStartDrawing();\n  },\n  onSaveField({actions}) {\n    actions.view.Modals.SaveField.open();\n  },\n  onCancelField({state, actions}) {\n    state.view.Map.editingField = null; //Stop editing if we were\n    actions.view.Map.BoundaryDrawing.onStopDrawing();\n  },\n  onEditField({actions, state}) {\n    const currentField = state.view.FieldDetails.field;\n    //Hide the current boundary\n    state.view.Map.editingField = state.view.FieldDetails.fieldId;\n    //Convert to drawing boundary: {<rand-id>: [lat, lng], ...}\n    let boundary = {};\n    let coors = _.get(currentField, 'boundary.coordinates.0');\n    if (coors.length > 0) coors.pop();\n    _.forEach(coors || [], (coors) => { //TODO will not work with holes in fields etc\n      boundary[uuid()] = [coors[1], coors[0]];\n    });\n    //Start drawing\n    actions.view.Map.BoundaryDrawing.onStartDrawing({boundary});\n    //Close the details drawer\n    actions.view.Map.unselectField()\n  },\n  async onResetCache({actions}) {\n    await actions.app.oada.resetCache();\n    //Refresh the page\n    //location.reload();\n  },\n  async onLogout({actions}) {\n    await actions.view.Login.logout()\n  }\n}\n","import _state from './state'\nimport _actions from './actions'\n\nexport const state = _state;\nexport const actions = _actions;\n","import _ from 'lodash';\n\nexport default {\n  open: false,\n  selected: null,\n  search: '',\n  list: ({selected, operations}, state) => {\n    //Get operations, filtering by search\n    const search = _.get(state, `view.TopBar.OperationDropdown.search`)\n    return _.omitBy(_.mapValues(operations, ({name}, id) => {\n      if (id == null) return null; //Not an operation, a _key for oada\n      if (name == null) return null;\n      if (search != '' && name.search(search) == -1) return null;\n      return {\n        text: name,\n        value: id,\n        selected: (selected == id),\n        label: { color: 'green', empty: true, circular: true }\n      }\n    }), _.isEmpty)\n  },\n  operations: ({}, state) => {\n    let operations = null;\n    if (_.get(state, `app.OADAManager.connected`) == true) {\n      let currentConnection = _.get(state, `app.OADAManager.currentConnection`)\n      operations = _.omitBy(_.get(state, `app.oada.${currentConnection}.bookmarks.seasons.2020.operations`) || {}, (o, k) => {return _.startsWith(k, '_')}); //TODO year\n    } else {\n      operations = _.get(state, `app.localData.abc123.seasons.2020.operations`) //TODO year, organization\n    }\n    return operations\n  },\n  selectedOperationId: ({selected, operations}, state) => {\n    let selectedId = selected;\n    if (selectedId == null && _.keys(operations).length > 0) selectedId = _.keys(operations)[0];\n    return selectedId;\n  },\n  selectedOperation: ({selectedOperationId, operations}, state) => {\n    return operations[selectedOperationId];\n  }\n}\n","export default {\n  onAdd({state, actions}) {\n    const myState = state.view.TopBar.OperationDropdown;\n    myState.open = false;\n    return actions.view.Modals.NewOperation.open()\n  },\n  onChange({state}, {id}) {\n    const myState = state.view.TopBar.OperationDropdown;\n    myState.selected = id;\n    myState.open = false;\n  },\n  onOpenChange({state}, {open}) {\n    const myState = state.view.TopBar.OperationDropdown;\n    myState.open = open;\n  },\n  onSearch({state}, {search}) {\n    const myState = state.view.TopBar.OperationDropdown;\n    myState.search = search;\n  }\n}\n","import _state from './state'\nimport _actions from './actions'\nimport * as OperationDropdown from './OperationDropdown'\n\nexport const state = {\n  OperationDropdown: OperationDropdown.state,\n  ..._state\n};\nexport const actions = {\n  OperationDropdown: OperationDropdown.actions,\n  ..._actions\n}\n","export default {\n\n}\n","import _state from './state'\nimport _actions from './actions'\n\nimport * as Login from './Login'\nimport * as FieldDetails from './FieldDetails'\nimport * as FieldList from './FieldList'\nimport * as Map from './Map'\nimport * as Modals from './Modals'\nimport * as TopBar from './TopBar'\n\nexport const state = {\n  Login: Login.state,\n  FieldDetails: FieldDetails.state,\n  FieldList: FieldList.state,\n  Map: Map.state,\n  Modals: Modals.state,\n  TopBar: TopBar.state,\n  ..._state\n};\nexport const actions = {\n  Login: Login.actions,\n  FieldDetails: FieldDetails.actions,\n  FieldList: FieldList.actions,\n  Map: Map.actions,\n  Modals: Modals.actions,\n  TopBar: TopBar.actions,\n  ..._actions\n}\nexport const onInitialize = async ({actions}) => {\n  await actions.app.onInitialize();\n  await actions.view.Login.onInitialize();\n}\n","import _ from 'lodash';\n\nexport default {\n  \n}\n","import _ from 'lodash'\nexport default {\n\n}\n","export default {\n  \"42f60b10-784c-11ea-8dfd-a3e960f56105\": {\n    \"name\": \"1004 G-N\",\n    \"boundary\": {\n      \"type\": \"Polygon\",\n      \"coordinates\": [\n        [\n          [\n            -84.97584700584412,\n            41.4628134964027\n          ],\n          [\n            -84.97539639472963,\n            41.462765256171906\n          ],\n          [\n            -84.97495651245119,\n            41.46275721612994\n          ],\n          [\n            -84.97424840927125,\n            41.46250797433487\n          ],\n          [\n            -84.97405529022217,\n            41.46203360827181\n          ],\n          [\n            -84.97410893440247,\n            41.46044164256161\n          ],\n          [\n            -84.97139453887941,\n            41.46130195211675\n          ],\n          [\n            -84.96770381927492,\n            41.46327177680542\n          ],\n          [\n            -84.97010707855226,\n            41.46330393671208\n          ],\n          [\n            -84.9764907360077,\n            41.46306273702346\n          ],\n          [\n            -84.97634053230287,\n            41.45965368547904\n          ],\n          [\n            -84.97462391853334,\n            41.46024867436535\n          ],\n          [\n            -84.9746346473694,\n            41.461004463187685\n          ],\n          [\n            -84.97491359710695,\n            41.46126175098986\n          ],\n          [\n            -84.97492432594301,\n            41.46172004235903\n          ],\n          [\n            -84.97529983520509,\n            41.46208988917259\n          ],\n          [\n            -84.97581481933594,\n            41.46234717266838\n          ],\n          [\n            -84.9761688709259,\n            41.46278133625282\n          ]\n        ]\n      ]\n    },\n    \"farm\": {\n      \"id\": \"42f08cd0-784c-11ea-8dfd-a3e960f56105\"\n    }\n  },\n  \"7c0ce950-784c-11ea-bfa5-97fea4f9bfd9\": {\n    \"name\": \"1001 HO-N\",\n    \"boundary\": {\n      \"type\": \"Polygon\",\n      \"coordinates\": [\n        [\n          [\n            -84.97347593307495,\n            41.44864540647965\n          ],\n          [\n            -84.97626543045044,\n            41.44856498851091\n          ],\n          [\n            -84.97617959976196,\n            41.44784122230691\n          ],\n          [\n            -84.977445602417,\n            41.44782513852177\n          ],\n          [\n            -84.97759580612183,\n            41.44862932289387\n          ],\n          [\n            -84.97886180877687,\n            41.448532821295515\n          ],\n          [\n            -84.97866868972778,\n            41.44205080201176\n          ],\n          [\n            -84.97654438018799,\n            41.442887227983185\n          ],\n          [\n            -84.97549295425415,\n            41.44425443952937\n          ],\n          [\n            -84.97323989868165,\n            41.44608806625952\n          ],\n          [\n            -84.97272491455078,\n            41.44689227216232\n          ],\n          [\n            -84.97330427169801,\n            41.44726220353039\n          ]\n        ]\n      ]\n    },\n    \"farm\": {\n      \"id\": \"42f08cd0-784c-11ea-8dfd-a3e960f56105\",\n    }\n  },\n  \"8ab27420-784c-11ea-bfa5-97fea4f9bfd9\": {\n    \"name\": \"1002 HO-S\",\n    \"boundary\": {\n      \"type\": \"Polygon\",\n      \"coordinates\": [\n        [\n          [\n            -84.97152328491212,\n            41.44697269220437\n          ],\n          [\n            -84.97148036956789,\n            41.44166475561947\n          ],\n          [\n            -84.97152328491212,\n            41.44111785263252\n          ],\n          [\n            -84.97347593307495,\n            41.441085681725035\n          ],\n          [\n            -84.97373342514038,\n            41.44073180069027\n          ],\n          [\n            -84.97635126113893,\n            41.44053877385792\n          ],\n          [\n            -84.97645854949953,\n            41.44134304853828\n          ],\n          [\n            -84.97607231140138,\n            41.44161649965898\n          ],\n          [\n            -84.97611522674562,\n            41.44240467585386\n          ],\n          [\n            -84.97540712356569,\n            41.44398099952468\n          ]\n        ]\n      ]\n    },\n    \"farm\": {\n      \"id\": \"42f08cd0-784c-11ea-8dfd-a3e960f56105\"\n    }\n  }\n}\n","export default {\n  \"42f08cd0-784c-11ea-8dfd-a3e960f56105\": {\n    name: \"Bowman and Bowman\"\n  },\n  \"52f08cd0-784c-11ea-8dfd-a3e960f56105\": {\n    name: \"Martz Farms\"\n  }\n}\n","import testFields from './test/testFields';\nimport testFarms from './test/testFarms';\nimport _ from 'lodash';\nimport geojsonArea from '@mapbox/geojson-area';\n\nexport default {\n  acresStatus: ({}, state) => {\n    //Get id's of all fields in this operation\n    const operationFields = state.app.operationFields;\n    const seasonFields = state.app.seasonFields;\n    //Loop through each field, totaling acres.\n    let planned = 0;\n    let started = 0;\n    let done = 0;\n    _.forEach(operationFields, (fieldOperation, key) => {\n      if (fieldOperation == null) return;\n      //Get field\n      let field = seasonFields[key];\n      if (field == null) return;\n      //Compute area of field boundary\n      let area = geojsonArea.geometry(field.boundary) * 0.000247105 //Meters to acres;\n      if (fieldOperation.status == 'planned') {\n        planned += area;\n      } else if (fieldOperation.status == 'started') {\n        started += area;\n      } else if (fieldOperation.status == 'done') {\n        done += area;\n      }\n    });\n    let total = planned + started + done;\n    return {\n      planned: Math.round(planned),\n      plannedPercentage: Math.round((planned / (total || 1)) * 100),\n      started: Math.round(started),\n      startedPercentage: Math.round((started / (total || 1)) * 100),\n      done: Math.round(done),\n      donePercentage: Math.round((done / (total || 1)) * 100),\n    };\n  },\n  seasonFarms: ({}, state) => {\n    let farms;\n    if (_.get(state, `app.OADAManager.connected`) == true) {\n      let currentConnection = _.get(state, `app.OADAManager.currentConnection`)\n      farms = _.chain(state).get(`app.oada.${currentConnection}.bookmarks.seasons.2020.farms`).omitBy((v, k) => { //TODO year\n        if (_.startsWith(k, '_')) return true;\n        if (v == null) return true;\n      }).value();\n    } else {\n      farms = _.get(state, `app.localData.abc123.seasons.2020.farms`) //TODO year, organization\n    }\n    return farms || {};\n  },\n  seasonFields: ({}, state) => {\n    let fields;\n    if (_.get(state, `app.OADAManager.connected`) == true) {\n      let currentConnection = _.get(state, `app.OADAManager.currentConnection`)\n      fields = _.chain(state).get(`app.oada.${currentConnection}.bookmarks.seasons.2020.fields`).omitBy((v, k) => { //TODO year\n        if (_.startsWith(k, '_')) return true;\n        if (v == null) return true;\n      }).value();\n    } else {\n      fields = _.get(state, `app.localData.abc123.seasons.2020.fields`) //TODO year, organization\n    }\n    return fields || {};\n  },\n  operationFields: ({}, state) => {\n    let operationId = _.get(state, 'view.TopBar.OperationDropdown.selectedOperationId');\n    let operationFields = [];\n    if (operationId != null) {\n      if (_.get(state, `app.OADAManager.connected`) == true) {\n        let currentConnection = _.get(state, `app.OADAManager.currentConnection`)\n        operationFields = _.get(state, `app.oada.${currentConnection}.bookmarks.seasons.2020.operations.${operationId}.fields`) || []; //TODO year\n      } else {\n        operationFields = _.get(state, `app.localData.abc123.seasons.2020.operations.${operationId}.fields`) || []; //TODO year, organization\n      }\n    }\n    return operationFields; // {<field-id>: {status: 'planned'}, ...}\n  },\n  currentOADA: ({}, state) => {\n    if (state.app.OADAManager.connected) {\n      const currentConnection = state.app.OADAManager.currentConnection;\n      if (!currentConnection) return;\n      return state.app.oada[currentConnection];\n    }\n  },\n  oadaOrgData: ({currentOADA}) => {\n    if (currentOADA) {\n      return currentOADA.bookmarks;\n    }\n  },\n  oadaSeasonFarmsIdBy_id: ({oadaOrgData}, state) => {\n    return _.chain(oadaOrgData).get(`seasons.2020.farms`).mapValues((v, k) => {\n      if (!v) return null\n      return {_id: v._id, id: k};\n    }).omitBy(_.isNull).mapKeys((v, k) => {\n      return v._id; //Key of oada id\n    }).value();  //{_id: <oada-res-id>, id: <path-id>}\n  },\n  oadaSeasonFarms_idByFarm_id: ({oadaOrgData}, state) => {\n    return _.chain(oadaOrgData).get(`fields.farms`).mapValues((v, k) => {\n      if (!v) return null\n      //Lookup season farm id\n      const seasonFarm_id = _.get(oadaOrgData, `seasons.2020.farms.${k}._id`);\n      return {seasonFarm_id: seasonFarm_id, farm_id: v._id};\n    }).omitBy(_.isNull).mapKeys((v, k) => {\n      return v.farm_id; //Key of oada id\n    }).value();  //{_id: <oada-res-id>, id: <path-id>}\n  },\n  localOrgData: ({localData}) => {\n    return localData.abc123; //TODO organization\n  },\n  localData: {\n    organizations: {\n      'abc123': {\n        name: 'Default'\n      }\n    },\n    'abc123': {\n      fields: {\n        fields: {\n          /*'a': {\n            id: 'a',\n            name: 'Back 40',\n            boundary: '' //GEOJSON\n          }*/\n          ...testFields,\n        },\n        farms: {\n          ...testFarms,\n        }\n      },\n      seasons: {\n        /*'2020': {\n          fields: {\n            '<field-uuid>': {\n              season: 2018,\n              boundary: <geo-json>,\n              operations: {\n                '<operation-uuid>': {}\n              }\n            }\n          },\n          operations: {\n            '<operation-uuid>': {\n              id: '<operation-uuid>',\n              year: 2020,\n              name: 'Corn Planting',\n              fields: {\n                '<field-uuid>': {\n                  status: 'Planned',\n                }\n              }\n            }\n          }\n        }*/\n        '2020': {\n          fields: {\n            ...testFields,\n          },\n          farms: {\n            ...testFarms,\n          },\n          operations: {\n            /*'<operation-uuid>': {\n              id: '<operation-uuid>',\n              year: 2020,\n              name: 'Corn Planting',\n              fields: {\n                '<field-uuid>': {\n                  status: 'Planned',\n                }\n              }\n            }*/\n          }\n        }\n      }\n    }\n  }\n}\n","import _ from 'lodash'\nexport default {\n  getSeasonField({state}, id) {\n    let fields = [];\n    if (_.get(state, `app.OADAManager.connected`) == true) {\n      let currentConnection = _.get(state, `app.OADAManager.currentConnection`)\n      fields = _.get(state, `app.oada.${currentConnection}.bookmarks.seasons.2020.fields`) //TODO year\n    } else {\n      fields = _.get(state, `app.localData.abc123.seasons.2020.fields`) //TODO year, organization\n    }\n    return fields[id];\n  },\n  getSeasonFarm({state}, id) {\n    let farms = [];\n    if (_.get(state, `app.OADAManager.connected`) == true) {\n      let currentConnection = _.get(state, `app.OADAManager.currentConnection`)\n      farms = _.get(state, `app.oada.${currentConnection}.bookmarks.seasons.2020.farms`) //TODO year\n    } else {\n      farms = _.get(state, `app.localData.abc123.seasons.2020.farms`) //TODO year, organization\n    }\n    return farms[id];\n  },\n  onInitialize({state, actions}) {\n    actions.view.Map.zoomBounds();\n  }\n}\n","import _ from 'lodash';\nexport default {\n  connected: false,\n  currentConnection: null,\n  domain: null,\n  token: null,\n  user: ({currentConnection}, state) => {\n    if (!currentConnection) return null;\n    return _.get(state, 'app.oada.localhost.users.me');\n  }\n}\n","import tree from './tree';\nimport config from '../../../config'\nimport Promise from 'bluebird'\nimport _ from 'lodash'\nimport { browser as oadaIdClient } from '@oada/oada-id-client/index.js'\nconst getAccessToken = Promise.promisify(oadaIdClient.getAccessToken)\n\nexport default {\n  async getToken({state}, domain) {\n    /*\n      Get token from local storage or request one\n    */\n    const myState = state.app.OADAManager;\n    if (myState.token) return myState.token;\n    let res = await getAccessToken(domain.replace(/^https?:\\/\\//, ''), {\n      metadata: config.METADATA,\n      scope: config.SCOPE,\n      redirect: config.REDIRECT\n    })\n    return res.access_token;\n  },\n  async connect({actions, state, effects}, {domain, token}) {\n    const myState = state.app.OADAManager;\n    const myActions = actions.app.OADAManager;\n    if (token) myState.token = token;\n    token = await myActions.getToken(domain);\n    return actions.app.oada.connect({\n      token,\n      domain: domain,\n      options: config.OPTIONS,\n      cache: false\n    }).then((response) => {\n      if (!response.error) {\n        myState.currentConnection = response.connectionId;\n        myState.token = response.token;\n        myState.connected = true;\n        //Unselect local opeation\n        state.view.TopBar.OperationDropdown.selected = null;\n      }\n      return response;\n    })\n  },\n  async logout({actions, state}) {\n    const myState = state.app.OADAManager;\n    const {currentConnection: connection_id} = myState;\n    myState.token = null;\n    await actions.app.oada.disconnect({connection_id})\n  },\n  async getUserInfo({actions, state}) {\n    const myState = state.app.OADAManager;\n    const {currentConnection: connection_id} = myState;\n    let requests = [{\n      path: '/users/me',\n    }];\n    await actions.app.oada.get({requests, connection_id})\n  },\n  async fetchAndWatch({actions, state}) {\n    const myState = state.app.OADAManager;\n    const {currentConnection: connection_id} = myState;\n    //Fetch field and seasons\n    let watchRequests = [\n      {\n        path: '/bookmarks/fields',\n        tree,\n        watch: {\n          actions: [actions.app.OADAManager.onFieldChanged]\n        }\n      },\n      {\n        path: '/bookmarks/seasons',\n        tree,\n        watch: {\n          actions: []\n        },\n      }\n    ];\n    const ret = await actions.app.oada.get({requests: watchRequests, connection_id})\n    let rewatchRequests = [];\n    console.log('SOMETIMES ERRORS:', ret);\n    if (ret.responses[0].error) {\n      //On 404 create and rewatch\n      if (ret.responses[0].status != 404) throw ret.responses[0].error;\n      //Create fields and try to watch again\n      let requests = [{\n        tree,\n        data: {\n          fields: {},\n          farms: {}\n        },\n        path: '/bookmarks/fields'\n      }];\n      //Create\n      await actions.app.oada.put({requests, connection_id})\n      //Rewatch\n      rewatchRequests.push(watchRequests[0]);\n    }\n    if (ret.responses[1].error) {\n      //On 404 create and rewatch\n      if (ret.responses[1].status != 404) throw ret.responses[0].error;\n      //Create seasons and try to watch again\n      let requests = [{\n        tree,\n        data: {},\n        path: '/bookmarks/seasons'\n      }];\n      //Create\n      await actions.app.oada.put({requests, connection_id})\n      //Rewatch\n      rewatchRequests.push(watchRequests[1]);\n    }\n    if (rewatchRequests.length > 0) await actions.app.oada.get({requests: rewatchRequests, connection_id})\n  },\n  initSeasonFields({state, actions}) {\n    /*\n      Put changes from master field list into season fields\n    */\n    const myActions = actions.app.OADAManager;\n    //Get master field list fields\n    var fieldsChanged = [];\n    _.forEach(_.get(state, 'app.oadaOrgData.fields.fields'), (obj, key) => {\n      if (_.startsWith(key, '_')) return;\n      fieldsChanged.push({fieldId: key, name: obj.name, boundary: obj.boundary, farm: obj.farm});\n    })\n    return myActions.changeSeasonFields(fieldsChanged);\n  },\n  initSeasonFarms({state, actions}) {\n    /*\n      Put changes from master farm list into season farms\n    */\n    const myActions = actions.app.OADAManager;\n    //Get master field list fields\n    var changed = [];\n    _.forEach(_.get(state, 'app.oadaOrgData.fields.farms'), (obj, key) => {\n      if (_.startsWith(key, '_')) return;\n      changed.push({farmId: key, name: obj.name});\n    })\n    return myActions.changeSeasonFarms(changed);\n  },\n  async changeSeasonFields({state, actions}, fieldsChanged) {\n    /*\n      Apply any changes to season fields\n    */\n    const myState = state.app.OADAManager;\n    const {currentConnection: connection_id} = myState;\n    //See if they match season fields.\n    let requests = [];\n    let theSeasonFields = state.app.seasonFields;\n    _.forEach(fieldsChanged, (fieldChange) => {\n      if (fieldChange.fieldId == null) return;\n      let data = {};\n      let seasonField = theSeasonFields[fieldChange.fieldId]\n      if (fieldChange.name) {\n        if (seasonField == null || seasonField.name != fieldChange.name) {\n          data.name = fieldChange.name;\n        }\n      }\n      if (fieldChange.boundary) {\n        if (seasonField == null || _.isEqual(seasonField.boundary, fieldChange.boundary) == false) {\n          data.boundary = fieldChange.boundary;\n        }\n      }\n      if (fieldChange.farm) {\n        //Find new season farm id from farm id\n        const farmId = _.get(fieldChange, 'farm._id');\n        if (farmId) {\n          const seasonFarmId = _.get(state, `app.oadaSeasonFarms_idByFarm_id.${farmId}.seasonFarm_id`)\n          if (!seasonFarmId) {\n            console.log('No matching season farm found for farmId:', farmId, 'Cannot check if season fields farm has changed. Data:', fieldChange);\n          } else if (seasonField == null || seasonField.farm == null || seasonField.farm._id == null || (seasonFarmId != null && seasonField.farm._id != seasonFarmId)) {\n            data.farm = _.merge({}, data.farm, {_id: seasonFarmId});\n          }\n        }\n      }\n      if (_.isEmpty(data)) return;\n      requests.push(\n        { //Change season's field's name, boundary\n          tree,\n          data,\n          type: 'application/vnd.oada.field.1+json',\n          path: `/bookmarks/seasons/2020/fields/${fieldChange.fieldId}` //TODO year\n        }\n      )\n    })\n    if (requests.length == 0) return;\n    await actions.app.oada.put({requests, connection_id})\n  },\n  async changeSeasonFarms({state, actions}, changed) {\n    /*\n      Apply any changes to season farms\n    */\n    const myState = state.app.OADAManager;\n    const {currentConnection: connection_id} = myState;\n    //See if they match season fields.\n    let requests = [];\n    let seasonFarms = state.app.seasonFarms;\n    _.forEach(changed, (change) => {\n      if (change.farmId == null) return;\n      let data = {};\n      let seasonFarm = seasonFarms[change.farmId]\n      //Check if name changed\n      if (change.name) {\n        if (seasonFarm == null || seasonFarm.name != change.name) {\n          data.name = change.name;\n        }\n      }\n      if (_.isEmpty(data)) return;\n      requests.push(\n        { //Change season's farms's name\n          tree,\n          data,\n          type: 'application/vnd.oada.farm.1+json',\n          path: `/bookmarks/seasons/2020/farms/${change.farmId}` //TODO year\n        }\n      )\n    })\n    if (requests.length == 0) return;\n    await actions.app.oada.put({requests, connection_id})\n  },\n  async deleteSeasonFields({state, actions}, deleted) {\n    console.log('delete season fields', deleted);\n    const myState = state.app.OADAManager;\n    const {currentConnection: connection_id} = myState;\n    //See if they match season fields.\n    let requests = [];\n    let seasonFields = state.app.seasonFields;\n    _.forEach(deleted, (fieldId) => {\n      let seasonField = seasonFields[fieldId]\n      if (!seasonField) return;\n      requests.push(\n        { //Change season's farms's name\n          tree,\n          type: 'application/vnd.oada.field.1+json',\n          path: `/bookmarks/seasons/2020/fields/${fieldId}` //TODO year\n        }\n      )\n    })\n    if (requests.length == 0) return;\n    await actions.app.oada.delete({requests, connection_id})\n  },\n  async deleteSeasonFarms({state, actions}, deleted) {\n    console.log('delete season farms', deleted);\n    const myState = state.app.OADAManager;\n    const {currentConnection: connection_id} = myState;\n    //See if they match season fields.\n    let requests = [];\n    let seasonFarms = state.app.seasonFarms;\n    _.forEach(deleted, (farmId) => {\n      let seasonFarm = seasonFarms[farmId]\n      if (!seasonFarm) return;\n      requests.push(\n        { //Change season's farms's name\n          tree,\n          type: 'application/vnd.oada.farm.1+json',\n          path: `/bookmarks/seasons/2020/farms/${farmId}` //TODO year\n        }\n      )\n    })\n    if (requests.length == 0) return;\n    await actions.app.oada.delete({requests, connection_id})\n  },\n  async login({actions, state}, {domain, token}) {\n    const myState = state.app.OADAManager;\n    const myActions = actions.app.OADAManager;\n    myState.domain = domain;\n    const {error} = await myActions.connect({domain, token});\n    if (!error) {\n      await myActions.getUserInfo();\n      await myActions.fetchAndWatch();\n      await myActions.initSeasonFarms();\n      await myActions.initSeasonFields();\n      await actions.view.Map.zoomBounds();\n    }\n  },\n  async onFieldChanged({state, actions}, props) {\n    /*\n      If a farm/field in the master list changed, apply change to this years season fields\n    */\n    console.log('onFieldChanged', props);\n    const myActions = actions.app.OADAManager;\n    const changes = _.get(props, 'response.change') || [];\n    if (!_.isArray(changes)) {\n      console.warn('WARNING: response.change not an array')\n      return;\n    }\n    const watchPath = (props.path && props.path.length > 0) ? `${props.connection_id}.${props.path}` : props.connection_id;\n    let fieldsChanged = [];\n    let fieldsDeleted = [];\n    let farmsChanged = [];\n    let farmsDeleted = [];\n    _.forEach(changes, (change) => {\n      if (change.type == 'merge') {\n        //Get the currentState at the change path\n        const changePathArr = change.path.split('/')\n        const changePath = changePathArr.join('.')\n        const currentState = _.get(state, `${watchPath}${changePath}`);\n        if (_.get(changePathArr, 1) == 'fields') {\n          //A field was changed\n          const fieldId = _.get(changePathArr, 2)\n          if (fieldId == null && _.get(change, 'body') != null) {\n            console.log('WARNING: Received a bad field change from OADA', props);\n            return;\n          }\n          const {name, boundary} = _.get(change, 'body');\n          //Push all non-undefined values\n          fieldsChanged.push(_.pickBy({fieldId, name, boundary}, (a)=>!_.isUndefined(a)));\n        } else if (_.get(changePathArr, 1) == 'farms') {\n          //A farm was changed\n          const farmId = _.get(changePathArr, 2)\n          if (farmId == null && _.get(change, 'body') != null) {\n            console.log('WARNING: Received a bad farm change from OADA', props);\n            return;\n          }\n          const {name} = _.get(change, 'body');\n          //Push all non-undefined values\n          farmsChanged.push(_.pickBy({farmId, name}, (a)=>!_.isUndefined(a)));\n        }\n      } else if (change.type == 'delete') {\n        //Get the currentState at the change path\n        const changePath = change.path.split('/').join('.')\n        const currentState = _.get(state, `${watchPath}${changePath}`);\n        //If body has a null field in it, delete that season field\n        _.forEach(_.get(change, 'body.fields'), (value, fieldId) => {\n          if (value == null) fieldsDeleted.push(fieldId);\n        })\n        //If body has a null farm in it, delete that season farm\n        _.forEach(_.get(change, 'body.farms'), (value, farmId) => {\n          if (value == null) farmsDeleted.push(farmId);\n        })\n      } else {\n        console.warn('Unrecognized change type', change.type);\n      }\n    })\n    if (fieldsDeleted.length > 0) myActions.deleteSeasonFields(fieldsDeleted);\n    if (fieldsChanged.length > 0) myActions.changeSeasonFields(fieldsChanged);\n    if (farmsDeleted.length > 0) myActions.deleteSeasonFarms(farmsDeleted);\n    if (farmsChanged.length > 0) myActions.changeSeasonFarms(farmsChanged);\n  },\n  onSeasonsChanged({state, actions}, props) {\n\n  }\n}\n","import _state from './state'\nimport _actions from './actions'\n\nexport const state = _state;\nexport const actions = _actions;\n","import _state from './state'\nimport _actions from './actions'\n\nimport * as OADAManager from './OADAManager'\nimport oadaCacheOvermind from '@oada/oada-cache-overmind'\n\nconst oada =  oadaCacheOvermind('app.oada')\n\nexport const state = {\n  oada: oada.state,\n  OADAManager: OADAManager.state,\n  ..._state\n};\nexport const actions = {\n  oada: oada.actions,\n  OADAManager: OADAManager.actions,\n  ..._actions\n}\nexport const effects = {\n  oada: oada.effects\n}\n","import { createHook } from \"overmind-react\"\n\nimport { namespaced } from 'overmind/config'\n\nimport * as view from './view'\nimport * as app from './app'\n\nexport const config = namespaced({\n  view,\n  app,\n})\n\nexport default createHook()\n","import React from 'react';\n\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/core'\nimport _ from 'lodash'\nimport overmind from '../../overmind'\nimport { Input, Button, Form, Dropdown } from 'semantic-ui-react'\n\nfunction Login() {\n  const { state, actions } = overmind();\n  const myState = state.view.Login;\n  const myActions = actions.view.Login;\n\n  return (\n    <div css={css`\n      height: 100vh;\n      width: 100vw;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      background: url(imgs/login-background.jpg) no-repeat center center fixed;\n      background-size: cover;\n    `}>\n      <div css={css`\n        width: 400px;\n        display: flex;\n        flex-direction: column;\n        background: #fff;\n        padding: 15px;\n        padding-top: 7px;\n        border-radius: 5px;\n      `}>\n        <img css={{\n          height: 300\n        }} src={`imgs/logo2.svg`} alt={'logo'} />\n        <Form css={css`\n          display: flex;\n          flex-direction: column;\n        `} onSubmit={myActions.login}>\n          <Input placeholder='OADA Domain...' value={myState.domain} onChange={(evt, data) => myActions.domainChange(data)} />\n          <Button\n            style={{marginTop: 7}} primary\n            loading={myState.loading}\n            disabled={myState.loading}>\n            Connect to Your OADA Cloud\n          </Button>\n          <Button\n            style={{marginTop: 7}}\n            onClick={myActions.viewDemo}\n            disabled={myState.loading}>\n            View Demo\n          </Button>\n        </Form>\n      </div>\n      <a css={css`\n        position: absolute;\n        top: 10px;\n        right: 10px;\n        font-size: 1.2em;\n        color: #FFFFFF;\n        cursor: pointer;\n      `} onClick={myActions.logout}\n      >Logout</a>\n    </div>\n  );\n}\n\nexport default Login;\n","/*\n  Adds points/polygons to map when drawing a boundary\n*/\nimport React, { Component } from 'react';\nimport { Marker, Polygon, LayerGroup } from 'react-leaflet'\n\nimport overmind from '../../../overmind'\nimport _ from 'lodash';\n\nexport default function BoundaryDrawing() {\n  const {state, actions} = overmind();\n  const myState = state.view.Map.BoundaryDrawing;\n  const myActions = actions.view.Map.BoundaryDrawing;\n\n  const { boundary, drawing } = myState;\n  const { onMarkerMove } = myActions;\n\n  if (!drawing) return null;\n  return (\n    <LayerGroup>\n      <Polygon positions={_.map(boundary)} />\n      {_.map(boundary, (latlng, id) => <Marker position={latlng} key={id} draggable onMove={({latlng, oldLatLng}) => onMarkerMove({latlng, oldLatLng, id})}/>)}\n    </LayerGroup>\n  );\n}\n","/*\n  Adds points/polygons to map when drawing a boundary\n*/\nimport React from 'react';\nimport { Marker, Polygon, LayerGroup, GeoJSON } from 'react-leaflet'\n\nimport overmind from '../../../overmind'\n\nimport _ from 'lodash';\nimport uuid from 'uuid/v1'\n\nexport default function Fields() {\n  const {state, actions} = overmind();\n  const myState = state.view.Map;\n  const myActions = actions.view.Map;\n\n  const { fields } = myState;\n  const { onFieldClick } = myActions;\n\n  if (_.keys(fields).length == 0) return null;\n  return (\n    <LayerGroup>\n      {_.map(fields, (field, id) =>\n        <GeoJSON\n          bubblingMouseEvents={false}\n          style={field.style}\n          data={field.boundary}\n          key={uuid()} //Must be uuid to unmount/mount when field style or boundary changes\n          onClick={(evt) => {onFieldClick({id})}} />\n      )}\n    </LayerGroup>\n  );\n}\n","import React, {useEffect, useRef}  from 'react';\nimport { Map as LeafletMap, Marker, Popup, TileLayer, ZoomControl } from 'react-leaflet'\nimport './index.css'\n\nimport overmind from '../../overmind'\nimport _ from 'lodash'\nimport BoundaryDrawing from './BoundaryDrawing'\nimport Fields from './Fields'\n\nexport default function Map() {\n  const { actions, state } = overmind();\n  const myActions = actions.view.Map;\n  const myState = state.view.Map;\n\n  return (\n      <LeafletMap bounds={myState.bounds} center={myState.center} zoom={myState.zoom} onClick={(evt) => myActions.onMapClick({...evt.latlng})} zoomControl={false}>\n        <TileLayer\n          url=\"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}\"\n          attribution=\"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community\"\n        />\n        <TileLayer\n          url=\"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-labels/{z}/{x}/{y}{r}.png\"\n          minZoom={0}\n          maxZoom={20}\n          attribution=\"\"\n        />\n        <BoundaryDrawing />\n        <Fields />\n      </LeafletMap>\n  );\n}\n","import React from 'react';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Button from '@material-ui/core/Button';\nimport {TextInput, View} from 'react-native'\n\nimport overmind from '../../../overmind'\n\nexport default function DrawingToolbar() {\n  const { actions } = overmind();\n  const myActions = actions.view.TopBar;\n  return (\n    <Toolbar>\n      <View style={{flex: 1}} />\n      <Button color=\"inherit\" onClick={() => myActions.onCancelField()}>Cancel</Button>\n      <Button color=\"inherit\" onClick={() => myActions.onSaveField()}>Save</Button>\n    </Toolbar>\n  );\n}\n","import React from 'react'\nimport { Dropdown, Input } from 'semantic-ui-react'\nimport {View, Text} from 'react-native'\nimport _ from 'lodash'\n/*const tagOptions = [\n  {\n    text: 'Important',\n    value: 'Important',\n    label: { color: 'red', empty: true, circular: true },\n  }\n]*/\n\nimport overmind from '../../../../overmind'\n\nexport default function OperationsDropdown({style}) {\n  const { actions, state } = overmind();\n  const myActions = actions.view.TopBar.OperationDropdown;\n  const myState = state.view.TopBar.OperationDropdown;\n\n  const selectedOperation = myState.selectedOperation;\n  const operations = myState.list;\n  const open = myState.open;\n  const search = myState.search;\n  const onAdd = myActions.onAdd;\n  const onChange = myActions.onChange;\n  const onOpenChange = myActions.onOpenChange;\n  const onSearch = myActions.onSearch;\n\n  return (\n    <View style={style}>\n      <View style={{flexDirection: 'row'}}>\n        {\n           selectedOperation ?\n            <Dropdown\n              open={open}\n              onOpen={() => {onOpenChange({open: true})}}\n              onBlur={() => {onOpenChange({open: false})}}\n              text={selectedOperation.name}\n              icon='cog'\n              floating\n              labeled\n              button\n              className='icon'\n            >\n              <Dropdown.Menu style={{top: 42}}>\n                <Dropdown.Item style={{textAlign: 'center'}} text='Add New Operation' value='Add New Operation' onClick={(evt, data)=>{onAdd()}} />\n                <Input icon='search' iconPosition='left' className='search' style={{marginTop: 3}} value={search} onChange={(evt)=>{onSearch({search: evt.target.value})}} />\n                <Dropdown.Menu scrolling>\n                  {_.map(operations, option => (\n                    <Dropdown.Item key={option.value} {...option} onClick={(evt, data)=>{onChange({id: data.value})}} />\n                  ))}\n                </Dropdown.Menu>\n              </Dropdown.Menu>\n            </Dropdown>\n          :\n            <Dropdown\n              onClick={() => {onAdd()}}\n              open={false}\n              text={'Add New Operation'}\n              icon='cog'\n              floating\n              labeled\n              button\n              className='icon' />\n        }\n        <View style={{flex: 1}} />\n      </View>\n    </View>\n  )\n}\n","import React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport MoreIcon from '@material-ui/icons/MoreHoriz';\nimport {View} from 'react-native'\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport overmind from '../../../../overmind'\n\nexport default function MoreDropdown({style}) {\n  const { actions, state } = overmind();\n  const myActions = actions.view.TopBar;\n\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  function handleClick(event) {\n    setAnchorEl(event.currentTarget);\n  }\n  function handleClose() {\n    setAnchorEl(null);\n  }\n  return (\n    <View style={style}>\n      <IconButton edge=\"end\" color=\"inherit\" aria-label=\"Menu\" onClick={handleClick}>\n        <MoreIcon  />\n      </IconButton>\n      <Menu\n        style={{top: 50, right: 5}}\n        open={Boolean(anchorEl)}\n        keepMounted\n        anchorEl={anchorEl}\n        onClose={handleClose}>\n          <MenuItem onClick={()=>{handleClose(); myActions.onAddField()}}>Add Field</MenuItem>\n          {\n            !state.view.FieldDetails.open ? null :\n            <MenuItem onClick={()=>{handleClose(); myActions.onEditField()}}>Edit Field</MenuItem>\n          }\n          <MenuItem onClick={()=>{handleClose(); myActions.onLogout()}}>Logout</MenuItem>\n          {/*<MenuItem onClick={()=>{handleClose(); myActions.onResetCache()}}>Reset Cache</MenuItem>*/}\n      </Menu>\n    </View>\n  );\n}\n","import React from \"react\";\nimport { geolocated } from \"react-geolocated\";\nimport Button from './Button';\n\nexport default geolocated({\n    positionOptions: {\n        enableHighAccuracy: true,\n    },\n    userDecisionTimeout: 5000,\n})(Button);\n","import React, {useEffect} from 'react'\n\nimport IconButton from '@material-ui/core/IconButton';\nimport MyLocation from '@material-ui/icons/MyLocation';\nimport {View} from 'react-native'\n\nimport _ from 'lodash'\nimport overmind from '../../../../overmind'\n\nexport default function Button({coords, isGeolocationAvailable, isGeolocationEnabled}) {\n  const { actions } = overmind();\n  const myActions = actions.view.TopBar;\n\n  useEffect(() => {\n    myActions.onLocationChange(coords);\n  });\n\n  return (\n    <View>\n      <IconButton edge=\"end\" color=\"inherit\" aria-label=\"Menu\" onClick={()=>{myActions.onMyLocationClick(coords)}}>\n        <MyLocation  />\n      </IconButton>\n    </View>\n  )\n}\n","import React from 'react';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Button from '@material-ui/core/Button';\n\nimport IconButton from '@material-ui/core/IconButton';\nimport ListIcon from '@material-ui/icons/Menu';\n\nimport OperationDropdown from './OperationDropdown';\nimport MoreDropdown from './MoreDropdown';\nimport MyLocation from './MyLocation';\n\nexport default function NormalToolbar({toggleTitle}) {\n  return (\n    <Toolbar>\n      {/*<IconButton edge=\"start\" style={{marginRight: 7}} color=\"inherit\" aria-label=\"Menu\" onClick={()=>{console.log('TODO Menu Pressed')}}>\n        <ListIcon />\n      </IconButton>*/}\n      <OperationDropdown style={{flex: 1}} />\n      {/*<Button color=\"inherit\">2020</Button>*/}\n      <MyLocation />\n      <MoreDropdown />\n    </Toolbar>\n  );\n}\n","import React, {Component} from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport {View} from 'react-native'\n\nimport DrawingToolbar from './DrawingToolbar';\nimport NormalToolbar from './NormalToolbar';\n\nimport overmind from '../../overmind'\n\nexport default function TopBar() {\n  const {state} = overmind();\n  const drawing = state.view.Map.BoundaryDrawing.drawing;\n  return (\n    <View style={{zIndex: 1201}}>\n      <AppBar position=\"static\">\n        {\n          drawing ? <DrawingToolbar /> : <NormalToolbar />\n        }\n      </AppBar>\n    </View>\n  );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Drawer from '@material-ui/core/Drawer';\nimport Button from '@material-ui/core/Button';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport InboxIcon from '@material-ui/icons/MoveToInbox';\nimport MailIcon from '@material-ui/icons/Mail';\nimport { Text, View } from 'react-native';\n\nexport default function TemporaryDrawer() {\n  return (\n    <Drawer open={false} variant=\"persistent\">\n      <View style={{height: 64}} />\n      <div\n        style={{width: 250}}\n        role=\"presentation\">\n        <List>\n          {['Inbox', 'Starred', 'Send email'].map((text, index) => (\n            <ListItem button key={text}>\n              <ListItemIcon>{index % 2 === 0 ? <InboxIcon /> : <MailIcon />}</ListItemIcon>\n              <ListItemText primary={text} />\n            </ListItem>\n          ))}\n        </List>\n        <Divider />\n        <List>\n          {['All mail', 'Trash', 'Spam'].map((text, index) => (\n            <ListItem button key={text}>\n              <ListItemIcon>{index % 2 === 0 ? <InboxIcon /> : <MailIcon />}</ListItemIcon>\n              <ListItemText primary={text} />\n            </ListItem>\n          ))}\n        </List>\n      </div>\n    </Drawer>\n  );\n}\n","import React from 'react';\nimport Drawer from '@material-ui/core/Drawer';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport {View, Text} from 'react-native';\nimport IconButton from '@material-ui/core/IconButton';\nimport EditIcon from '@material-ui/icons/Edit';\nimport _ from 'lodash';\nimport { Button } from 'semantic-ui-react'\n\n\nimport overmind from '../../overmind'\n\nexport default function FieldDetails() {\n  const {state, actions} = overmind();\n  const myState = state.view.FieldDetails;\n  const myActions = actions.view.FieldDetails;\n\n  let { open, field, farm, showAddOperationButton } = myState;\n  const { onStatusChange, onEditFieldClick, onAddNewOperationClick } = myActions;\n\n  if (!Boolean(field)) {\n    open = false;\n    field = {};\n  }\n  return (\n    <Drawer anchor=\"bottom\" open={open} variant=\"persistent\">\n      <View style={{paddingBottom: 20}}>\n        <View style={{flexDirection: 'column', alignItems: 'center'}}>\n          <View style={{justifyContent: 'left', flexDirection: 'row', alignItems: 'center', marginTop: 10}}>\n              <Text style={{fontWeight: 'bold', fontSize: 20}}>\n                {field.name}\n              </Text>\n              <Text style={{marginLeft: 7, fontSize: 18}}>\n                {`- ${Math.round(field.acres)} ac`}\n              </Text>\n          </View>\n          {\n            farm == null ? null :\n            <Text style={{fontSize: 15, color: '#999', marginTop: 2, marginBottom: 7}}>\n              {farm.name}\n            </Text>\n          }\n        </View>\n        <View style={{justifyContent: 'center', flexDirection: 'row'}}>\n          {\n            showAddOperationButton ?\n              <Button style={{marginTop: 15}} onClick={() => myActions.onAddNewOperationClick()}>Add New Operation</Button>\n            :\n            <FormControl component=\"fieldset\">\n              <FormGroup aria-label=\"position\" name=\"position\" row>\n                <FormControlLabel\n                  value=\"bottom\"\n                  control={<Checkbox color=\"primary\" checked={(field.status == \"planned\") || false} onChange={()=>{onStatusChange({status: 'planned'})}} />}\n                  label=\"Planned\"\n                  labelPlacement=\"bottom\"\n                />\n                <FormControlLabel\n                  value=\"bottom\"\n                  control={<Checkbox color=\"primary\" checked={(field.status == \"started\") || false} onChange={()=>{onStatusChange({status: 'started'})}} />}\n                  label=\"Started\"\n                  labelPlacement=\"bottom\"\n                />\n                <FormControlLabel\n                  value=\"bottom\"\n                  control={<Checkbox color=\"primary\" checked={(field.status == \"done\") || false} onChange={()=>{onStatusChange({status: 'done'})}} />}\n                  label=\"Done\"\n                  labelPlacement=\"bottom\"\n                />\n              </FormGroup>\n            </FormControl>\n          }\n        </View>\n      </View>\n    </Drawer>\n  );\n}\n","import React from 'react';\nimport { Text, View } from 'react-native';\n\nexport default function AcresPlanned({acresStatus}) {\n  return (\n    <View style={{backgroundColor: '#c50003', paddingLeft: 7, paddingRight: 7, paddingTop: 5, paddingBottom: 5, borderRadius: 5}}>\n      <Text style={{color: 'white', textShadowColor: '#000', textShadowOffset: {width: 1, height: 1}, textShadowRadius: 2}}>\n        {`${acresStatus.planned} ac (${acresStatus.plannedPercentage}%)`}\n      </Text>\n    </View>\n  );\n}\n","import React from 'react';\nimport { Text, View } from 'react-native';\n\nexport default function AcresStarted({acresStatus}) {\n  return (\n    <View style={{backgroundColor: '#eeb705', paddingLeft: 7, paddingRight: 7, paddingTop: 5, paddingBottom: 5, borderRadius: 5, marginRight: 7, marginLeft: 7}}>\n      <Text style={{color: 'white', textShadowColor: '#000', textShadowOffset: {width: 1, height: 1}, textShadowRadius: 2}}>\n        {`${acresStatus.started} ac (${acresStatus.startedPercentage}%)`}\n      </Text>\n    </View>\n  );\n}\n","import React from 'react';\nimport { Text, View } from 'react-native';\n\nexport default function AcresDone({acresStatus}) {\n  return (\n    <View style={{backgroundColor: '#5bb25f', paddingLeft: 7, paddingRight: 7, paddingTop: 5, paddingBottom: 5, borderRadius: 5}}>\n      <Text style={{color: 'white', textShadowColor: '#000', textShadowOffset: {width: 1, height: 1}, textShadowRadius: 2}}>\n        {`${acresStatus.done} ac (${acresStatus.donePercentage}%)`}\n      </Text>\n    </View>\n  );\n}\n","import React, { Component } from 'react';\nimport { Text, View } from 'react-native';\n\nimport AcresPlanned from './AcresPlanned'\nimport AcresStarted from './AcresStarted'\nimport AcresDone from './AcresDone'\n\nimport overmind from '../../overmind'\n\nexport default function AcresStatus() {\n  const {state} = overmind();\n  const acresStatus = state.app.acresStatus;\n  const selectedOperationId = state.view.TopBar.OperationDropdown.selectedOperationId;\n  if (!selectedOperationId) return null;\n  return (\n    //z-index of leaflet map is 400\n    <View style={{position: \"absolute\", display: \"flex\", flexDirection: 'row', justifyContent: \"center\", alignItems: \"center\", top: 68, zIndex: 401, width: '100vw'}}>\n      <AcresPlanned acresStatus={acresStatus} />\n      <AcresStarted acresStatus={acresStatus} />\n      <AcresDone acresStatus={acresStatus} />\n    </View>\n  );\n}\n","import React from 'react';\nimport {View, Text} from 'react-native'\nimport { Form, Button, Modal, Input, Dropdown, Icon } from 'semantic-ui-react'\n\nimport overmind from '../../overmind'\n\nexport default function SaveField() {\n  const {state, actions} = overmind();\n  const myState = state.view.Modals.SaveField;\n  const myActions = actions.view.Modals.SaveField;\n\n  const open = myState.open;\n  const name = myState.name;\n  const onNameChange = myActions.onNameChange;\n  const onCancel = myActions.onCancel;\n  const onSave = myActions.onSave;\n  const [farmOpen, setFarmOpen] = React.useState(false);\n\n  const farm = myState.farm || {};\n  const farmOptions = myState.farms;\n\n  return (\n    <Modal open={myState.open} size='tiny'>\n      <Modal.Header>\n        {(state.view.Map.editingField) ? 'Edit Field' : 'New Field'}\n      </Modal.Header>\n      <Modal.Content>\n        <View style={{flexDirection: 'column', zIndex: 1}}>\n          <Text style={{marginBottom: 7}}>Field Name:</Text>\n          <Form onSubmit={() => onSave()}>\n            <Input autoFocus placeholder='Back 40' value={name} onChange={(evt) => {onNameChange({name: evt.target.value})}} />\n          </Form>\n          <Text style={{marginBottom: 7, marginTop: 15}}>Farm:</Text>\n          <Dropdown\n            trigger={\n              <View style={{paddingLeft: 13, paddingRight: 7, border: '1px solid rgba(34,36,38,.15)', borderRadius: '.28571429rem', height: 38, flexDirection: 'row', alignItems: 'center', justifyContent: 'space-between'}}>\n                <Text style={{color: (farm.name ? 'rgba(0,0,0,.87)' : 'rgba(0,0,0,.25)')}}>\n                  {farm.name || 'Select a farm'}\n                </Text>\n                <Icon name='caret down' style={{paddingBottom: 17}}/>\n              </View>\n            }\n            icon={null}\n            onOpen={() => {setFarmOpen(true)}}\n            onBlur={() => {setFarmOpen(false)}}\n            open={farmOpen}>\n            <Dropdown.Menu style={{overflow: 'hidden', maxHeight: '50vh'}}>\n              <Dropdown.Item style={{textAlign: 'center'}} text='Add New Farm' value='Add New Farm' onClick={(evt, data)=>{myActions.onFarmAdd(); setFarmOpen(false);}} />\n              <Input icon='search' iconPosition='left' className='search' value={myState.farmSearch} onChange={(evt)=>{myActions.onFarmSearchChange(evt.target.value)}} />\n              <Dropdown.Menu scrolling>\n                {farmOptions.map((option) => (\n                  <Dropdown.Item key={option.value} {...option} onClick={() => {myActions.onFarmChange({id: option.value}); setFarmOpen(false);}} />\n                ))}\n              </Dropdown.Menu>\n            </Dropdown.Menu>\n          </Dropdown>\n        </View>\n      </Modal.Content>\n      <Modal.Actions>\n        <Button negative onClick={() => onCancel()}>Cancel</Button>\n        <Button positive icon='checkmark' labelPosition='right' content='Save' onClick={() => onSave()} />\n      </Modal.Actions>\n    </Modal>\n  );\n}\n","import React from 'react';\nimport {View, Text} from 'react-native'\nimport { Button, Modal, Input } from 'semantic-ui-react'\n\nimport overmind from '../../overmind'\n\nexport default function OADADomain() {\n  const {state, actions} = overmind();\n  const myState = state.view.Modals.OADADomain;\n  const myActions = actions.view.Modals.OADADomain;\n\n  const { open, domain } = myState;\n  const { onDomainChange, onCancel, onConnect } = myActions;\n\n  return (\n    <Modal open={open} size='tiny'>\n      <Modal.Header>Connect to OADA Server</Modal.Header>\n      <Modal.Content>\n        <Text>Domain:</Text>\n        <View style={{flexDirection: 'row'}}>\n          <Input style={{flex: 1, marginTop: 7}} placeholder='https://oada.openatk.com' value={domain} onChange={(evt) => {onDomainChange({domain: evt.target.value})}} />\n        </View>\n      </Modal.Content>\n      <Modal.Actions>\n        <Button negative onClick={() => onCancel()}>Cancel</Button>\n        <Button positive icon='checkmark' labelPosition='right' content='Connect' onClick={() => onConnect({})} />\n      </Modal.Actions>\n    </Modal>\n  );\n}\n","import React from 'react';\nimport {View, Text} from 'react-native'\nimport { Button, Modal, Input, Form } from 'semantic-ui-react'\n\nimport overmind from '../../overmind'\n\nexport default function NewOperation() {\n  const {state, actions} = overmind();\n  const myState = state.view.Modals.NewOperation;\n  const myActions = actions.view.Modals.NewOperation;\n\n  const { open, name } = myState;\n  const { onNameChange, onCancel, onSave } = myActions;\n\n  return (\n    <Modal open={open} size='tiny'>\n      <Modal.Header>New Operation</Modal.Header>\n      <Modal.Content>\n        <Text>Name:</Text>\n        <View style={{flexDirection: 'row'}}>\n          <Form style={{flex: 1}} onSubmit={onSave}>\n            <Input autoFocus style={{width: '100%', marginTop: 7}} placeholder='Corn Planting' value={name} onChange={(evt) => {onNameChange({name: evt.target.value})}} />\n          </Form>\n        </View>\n      </Modal.Content>\n      <Modal.Actions>\n        <Button negative onClick={() => onCancel()}>Cancel</Button>\n        <Button positive icon='checkmark' labelPosition='right' content='Save' onClick={() => onSave()} />\n      </Modal.Actions>\n    </Modal>\n  );\n}\n","import React from 'react';\nimport {View, Text} from 'react-native'\nimport { Button, Modal, Input } from 'semantic-ui-react'\n\nimport overmind from '../../overmind'\n\nexport default function NewFarm() {\n  const {state, actions} = overmind();\n  const myState = state.view.Modals.NewFarm;\n  const myActions = actions.view.Modals.NewFarm;\n\n  const { open, name } = myState;\n  const { onNameChange, onCancel, onSave } = myActions;\n\n  return (\n    <Modal open={open} size='tiny'>\n      <Modal.Header>New Farm</Modal.Header>\n      <Modal.Content>\n        <Text>Name:</Text>\n        <View style={{flexDirection: 'row'}}>\n          <Input style={{flex: 1, marginTop: 7}} placeholder='Bowman Farms' value={name} onChange={(evt) => {onNameChange({name: evt.target.value})}} />\n        </View>\n      </Modal.Content>\n      <Modal.Actions>\n        <Button negative onClick={() => onCancel()}>Cancel</Button>\n        <Button positive icon='checkmark' labelPosition='right' content='Save' onClick={() => onSave()} />\n      </Modal.Actions>\n    </Modal>\n  );\n}\n","import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\n\nimport Login from './Login'\nimport Map from './Map'\nimport TopBar from './TopBar'\nimport FieldList from './FieldList'\nimport FieldDetails from './FieldDetails'\nimport AcresStatus from './AcresStatus'\n\nimport ModalSaveField from './Modals/SaveField';\nimport ModalOADADomain from './Modals/OADADomain';\nimport ModalNewOperation from './Modals/NewOperation';\nimport ModalNewFarm from './Modals/NewFarm';\n\nimport overmind from '../overmind'\n\nfunction App() {\n  const { state } = overmind();\n\n  if (!state.view.Login.loggedIn) {\n    return <Login />\n  }\n\n  return (\n    <div className=\"App\">\n\n      <TopBar />\n      <AcresStatus />\n      <Map />\n      <FieldList />\n      <FieldDetails />\n      <ModalSaveField />\n      <ModalOADADomain />\n      <ModalNewOperation />\n      <ModalNewFarm />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as serviceWorker from './serviceWorker';\n\nimport './index.css';\n\nimport App from './view/App'\n\nimport { createOvermind } from \"overmind\";\nimport { Provider } from \"overmind-react\";\nimport { config } from './overmind'\n\nconst app = createOvermind(config,\n{\n  devtools: true//'192.168.50.112:3031',\n});\n\nReactDOM.render(\n  <Provider value={app}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","/* Copyright 2014 Open Ag Data Alliance\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict'\nconsole.log('using linked oada-id-client 1')\nvar request = require('superagent')\n// TODO: URIjs is big, find smaller alternative\nvar URI = require('urijs')\nvar objectAssign = require('object-assign')\nvar jwt = require('jsonwebtoken')\nvar jwku = require('@oada/oada-certs').jwksutils\nvar jwk2pem = require('pem-jwk').jwk2pem\nvar crypto = require('crypto')\nvar clientAuth = require('jwt-bearer-client-auth')\nvar register = require('oauth-dyn-reg')\n\nvar core = {}\n\nvar options = {}\nvar stuff = {}\n\nfunction mergeOptions () {\n  var args = Array.prototype.concat.apply([{}], arguments)\n  var options\n\n  options = objectAssign.apply(null, args)\n\n  var argParams = args\n    .filter(function (arg) {\n      return arg && arg.hasOwnProperty('params')\n    })\n    .map(function (arg) {\n      return arg.params\n    })\n  if (argParams.length) {\n    options.params = objectAssign.apply(null, argParams)\n  }\n\n  options.scope = args\n    .map(function (arg) {\n      return (arg && arg.scope && arg.scope.split(' ')) || []\n    })\n    .reduce(function (scopes1, scopes2) {\n      return scopes1.concat(scopes2)\n    })\n    .filter(function (scope, ind, scopes) {\n      return scopes.indexOf(scope) === ind\n    })\n    .join(' ')\n\n  return options\n}\n\ncore.init = function (opts) {\n  options = mergeOptions(options, opts)\n}\n\nfunction storeState (stateObj, callback) {\n  // Make sure neither or both state storing functions are overridden\n  if (core.retrieveState !== retrieveState) {\n    return callback(new Error('Overrode retrieveState but not storeState!'))\n  }\n\n  // Cryptographically secure random bytes\n  var stateTok = crypto.randomBytes(16)\n\n  // Make it base64URL\n  stateTok = stateTok\n    .toString('base64')\n    .replace(/\\+/g, '-')\n    .replace(/\\//g, '_')\n    .replace(/=/g, '')\n\n  // Rembmer stuff\n  stuff[stateTok] = stateObj\n\n  return callback(null, stateTok)\n}\n\nfunction retrieveState (stateTok, callback) {\n  // Make sure neither or both state storing functions are overridden\n  console.log('retrieveState 1')\n  if (core.storeState !== storeState) {\n    console.log('retrieveState error')\n    return callback(new Error('Overrode storeState but not retrieveState!'))\n  }\n\n  // Retrie stored state\n  console.log('retrieveState stuff', stuff)\n  var stateObj = stuff[stateTok]\n  console.log('retrieveState stateObj', stateObj)\n\n  // Only use each state once\n  delete stuff[stateTok]\n\n  return callback(null, stateObj)\n}\n\n// These can be replaced with to change how state is stored\n// TODO: Should these be exposed somehow for browser and/or middleware?\ncore.storeState = storeState\ncore.retrieveState = retrieveState\n\nfunction authorize (domain, configuration, parameters, redirect, callback) {\n  var key\n  var params\n  var metadata\n\n  // Get stuff from options object\n  var options = mergeOptions({}, options, parameters)\n  key = options.privateKey\n  params = objectAssign(options.params, { scope: options.scope })\n  metadata = options.metadata\n\n  // Assume key is PEM ecnoded\n  if (key) {\n    key.kty = key.kty || 'PEM'\n  }\n\n  // Should I be passing the error to both?\n  var errCallback = combineCallbacks(redirect, callback)\n  console.log('before get')\n  var req = request.get('https://' + domain + '/.well-known/' + configuration)\n  console.log('after get 1')\n  if (req.buffer) {\n    console.log('after get 2')\n    req.buffer()\n  }\n  console.log('after get 3')\n  req.end(function configurationCallback (err, resp) {\n    console.log('after get 4')\n    var e = err || resp.error\n    if (e) {\n      console.log('error', e);\n      return errCallback(e)\n    }\n    console.log('after get 5')\n\n    try {\n      console.log('before parse')\n      var conf = JSON.parse(resp.text)\n      console.log('before register')\n      register(\n        metadata,\n        conf['registration_endpoint'],\n        function registrationCallback (err, resp) {\n          console.log('registrationCallback')\n          if (err) {\n            console.log('registrationCallback error', err)\n            return errCallback(err)\n          }\n\n          // Is this a good way to pick?\n          params['redirect_uri'] = options.redirect || resp['redirect_uris'][0]\n\n          // Stuff to remember for when redirect is received\n          var stateObj = {\n            key: key,\n            domain: domain,\n            conf: conf,\n            callback: callback,\n            options: resp,\n            query: params\n          }\n          console.log('before storeState')\n          core.storeState(stateObj, function (err, stateTok) {\n            console.log('storeState callback')\n            // Construct authorization redirect\n            var uri = new URI(conf['authorization_endpoint'])\n            uri\n              .addQuery({ state: stateTok })\n              .addQuery(params)\n              .addQuery({ client_id: resp['client_id'] })\n            // Do not send client_secret here\n            uri.removeQuery('client_secret')\n\n            // Redirect the user to constructed uri\n            console.log('before redirect')\n            console.log('redirect', redirect)\n            return redirect(err, uri && uri.toString())\n          })\n        }\n      )\n    } catch (err) {\n      console.log('here here')\n      console.log('err2', err)\n      return errCallback(err)\n    }\n  })\n}\n\ncore.getIDToken = function getIDToken (domain, opts, redirect, cb) {\n  var configuration = 'openid-configuration'\n  var response = process.browser ? 'id_token' : 'code'\n  // Make sure we have openid scope\n  var params = mergeOptions(\n    {\n      scope: 'openid',\n      params: { response_type: response }\n    },\n    opts\n  )\n\n  // Add nonce\n  params.params.nonce = crypto\n    .randomBytes(12)\n    .toString('base64')\n    .replace(/\\+/g, '-')\n    .replace(/\\//g, '_')\n    .replace(/=/g, '')\n\n  authorize(domain, configuration, params, redirect, function (err, tok) {\n    // return only id_token\n    return cb && cb(err, tok && tok.id_token)\n  })\n}\n\ncore.getAccessToken = function getAccessToken (domain, opts, redirect, cb) {\n  var configuration = 'oada-configuration'\n  console.log('getAccessToken 1')\n  var response = process.browser ? 'token' : 'code'\n  console.log('getAccessToken 2')\n  var params = mergeOptions(\n    {\n      scope: '',\n      params: { response_type: response }\n    },\n    opts\n  )\n\n  authorize(domain, configuration, params, redirect, cb)\n  console.log('getAccessToken 3')\n\n}\n\nfunction combineCallbacks () {\n  var callbacks = arguments\n\n  return function callback (err, result) {\n    for (var i = 0; i < callbacks.length; i++) {\n      if (typeof callbacks[i] === 'function') {\n        callbacks[i](err, result)\n      }\n    }\n  }\n}\n\n// TODO: Check issuer\nfunction verifyIDToken (state, params, callback) {\n  console.log('verifyIDToken 1')\n  if (!params || !params['id_token']) {\n    console.log('verifyIDToken 2')\n    return callback(null, params)\n  }\n\n  // This makes it work in IE\n  var parameters = objectAssign({}, params)\n  console.log('verifyIDToken 3')\n  return jwku.jwkForSignature(\n    parameters['id_token'],\n    state.conf['jwks_uri'],\n    function (err, jwk) {\n      console.log('verifyIDToken 4')\n      if (err) {\n        console.log('verifyIDToken 5')\n        console.log('verifyIDToken 5', err)\n        return callback(err)\n      }\n      console.log('verifyIDToken 6')\n      var key = jwk2pem(jwk)\n      console.log('verifyIDToken 7')\n\n      var opts = {\n        audience: state.options['client_id'],\n        issuer: state.conf.issuer\n      }\n      console.log('verifyIDToken 8')\n      jwt.verify(parameters['id_token'], key, opts, function (err, token) {\n        console.log('verifyIDToken 9')\n        if (!err) {\n          console.log('verifyIDToken 10')\n          // Check nonce\n          if (state.query.nonce === token.nonce) {\n            parameters['id_token'] = token\n          } else {\n            err = new Error('Nonces did not match')\n          }\n        }\n        console.log('verifyIDToken 10')\n        return callback(err, parameters)\n      })\n    }\n  )\n}\n\nfunction exchangeCode (state, parameters, callback) {\n  console.log('exchangeCode 1')\n  if (!parameters['code']) {\n    console.log('exchangeCode 1a')\n    return verifyIDToken(state, parameters, callback)\n  }\n  console.log('exchangeCode 1b')\n  var assertion = clientAuth.generate(\n    state.key,\n    state.options['client_id'],\n    state.options['client_id'],\n    state.conf['token_endpoint'],\n    60,\n    { payload: { jti: parameters.code } }\n  )\n  console.log('exchangeCode 2')\n\n  var params = {\n    grant_type: 'authorization_code',\n    redirect_uri: state.query['redirect_uri'],\n    client_assertion: assertion,\n    client_assertion_type:\n      'urn:ietf:params:oauth:client-assertion-type:jwt-bearer',\n    client_id: state.options['client_id'],\n    code: parameters.code\n  }\n  console.log('before post')\n  request\n    .post(state.conf['token_endpoint'])\n    .type('form')\n    .send(params)\n    .end(function (err, resp) {\n      console.log('after post')\n      var e = err || resp.error\n      if (e) {\n        return callback(e)\n      }\n\n      var token\n      try {\n        token = JSON.parse(resp.text)\n      } catch (err) {\n        return callback(err)\n      }\n      console.log('after post before verifyIDToken')\n      verifyIDToken(state, token, callback)\n    })\n}\n\n// TODO: Should I be able to register callbacks in two places?\ncore.handleRedirect = function handleRedirect (params, callback) {\n  console.log('core handleRedirect')\n  var stateTok = params.state\n  var parameters = objectAssign({}, params)\n  delete parameters.state\n  console.log('core handleRedirect 1')\n  console.log('core handleRedirect stateTok', stateTok)\n  core.retrieveState(stateTok, function (err, stateObj) {\n    console.log('err', err);\n    console.log('stateObj', stateObj);\n    console.log('core handleRedirect 2')\n    var cb = combineCallbacks(stateObj && stateObj.callback, callback)\n    console.log('core handleRedirect 3')\n    if (stateObj) {\n      console.log('core handleRedirect exchangeCode')\n      exchangeCode(stateObj, parameters, cb)\n    } else {\n      console.log('core handleRedirect cb')\n      console.log('core handleRedirect cb2', callback)\n      console.log('core handleRedirect cb3', parameters)\n      if (stateObj) console.log('core handleRedirect cb4', stateObj.callback)\n      cb('Spurrious redirect received', parameters)\n    }\n  })\n}\n\nmodule.exports = core\n","/* Copyright 2014 Open Ag Data Alliance\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nmodule.exports = require('./src/core')\n\nmodule.exports.browser = require('./src/browser')\n\n// You can only include this in node because the \"open\" library that it uses\n// fails to compile in the browser\nif (typeof process !== 'undefined' && typeof window === 'undefined') {\n  module.exports.node = require('./src/node-browser')\n}\n\nmodule.exports.middleware = require('./src/middleware')\n","module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","/* Copyright 2014 Open Ag Data Alliance\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict'\n\n// TODO: URIjs is:ta big, find smaller alternative\nvar URI = require('urijs')\nvar objectAssign = require('object-assign')\nvar core = require('./core.js')\n\nvar browser = {}\n\nbrowser.init = core.init\n\nfunction popUpRedirect (authFun, opts) {\n  return function (domain, options, callback) {\n    var params = objectAssign({ display: 'popup' }, opts, options)\n\n    // TODO: Do this differently\n    window._oadaIdClientPopUpFunction = core.handleRedirect\n    console.log('before authFun')\n    authFun(\n      domain,\n      params,\n      function redirect (err, uri) {\n        console.log('redirect 1')\n        if (err) {\n          console.log('redirect err', err)\n          console.log('Failed to do learn auth endpoint for domain ', domain);\n          // Finish the flow\n          core.handleRedirect({ error: 'Failed to learn auth endpoint' });\n          return null;\n        } // TODO: Do something with err?\n        var win = window.open(\n          uri,\n          '_blank',\n          'width=500,height=400,status,resizable,scrollbars=yes'\n        )\n        console.log('redirect 2')\n      },\n      callback\n    )\n  }\n}\n\nbrowser.getIDToken = popUpRedirect(core.getIDToken, {})\n\nbrowser.getAccessToken = popUpRedirect(core.getAccessToken, {})\n\nbrowser.handleRedirect = function () {\n  console.log('handleRedirect')\n  var uri = new URI(window.location)\n  console.log('window.location', window.location)\n  console.log('uri.fragment()', uri.fragment())\n  var params = uri.query(uri.fragment()).query(true)\n  console.log('params', params);\n  window.opener._oadaIdClientPopUpFunction(params)\n  //window.close()\n}\n\nmodule.exports = browser\n","'use strict'\nconst open = require('open')\nconst isWsl = require('is-wsl')\nconst http = require('http')\nconst fs = require('fs')\nconst url = require('url')\nconst path = require('path')\nconst Promise = require('bluebird')\n\nfunction hostLogin (domain, options) {\n  return new Promise(function (resolve) {\n    var server = http\n      .createServer(function (req, res) {\n        if (/favicon/.test(req.url)) {\n          res.statusCode = 404\n          res.statusMessage = 'Not found'\n          res.end()\n          return\n        }\n\n        if (/^\\/somefile/.test(req.url)) {\n          var urlObj = url.parse(req.url, true)\n          server.close()\n          return resolve({ access_token: urlObj.query.access_token })\n        }\n        var f = req.url.split('?')[0]\n        var file = path.join(__dirname, '/public/' + f)\n        res.writeHead(200, {\n          'Content-Length': fs.statSync(file).size\n        })\n        var readStream = fs.createReadStream(file)\n        readStream.pipe(res)\n      })\n      .listen(8000, function () {\n        open(\n          'http://localhost:8000/index.html?domain=' +\n            JSON.stringify(domain) +\n            '&options=' +\n            JSON.stringify(options),\n          {\n            url: true,\n            // Hack to make open work in WSL\n            app: isWsl && 'wslview'\n          }\n        )\n      })\n  })\n}\n\nmodule.exports = hostLogin\n","/* Copyright 2014 Open Ag Data Alliance\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict'\n\nvar objectAssign = require('object-assign')\nvar core = require('./core')\n\nvar middleware = {}\n\n// TODO: I am not sure having a callback is very middleware...\nmiddleware.getIDToken = function (domain, options) {\n  var params = objectAssign({}, options)\n\n  return function (req, res, next) {\n    var dom = req.param('domain') || domain\n    params.scope = req.param('scope') || params.scope\n\n    core.getIDToken(dom, params, function (err, uri) {\n      if (err) {\n        return next(err)\n      }\n\n      return res.redirect(302, uri)\n    })\n  }\n}\n\nmiddleware.getAccessToken = function (domain, options) {\n  var params = objectAssign({}, options)\n  console.log('middleware getAccessToken');\n  return function (req, res, next) {\n    var dom = req.param('domain') || domain\n    params.scope = req.param('scope') || params.scope\n    console.log('middleware getAccessToken dom', dom);\n    console.log('middleware getAccessToken params', params);\n    core.getAccessToken(dom, params, function (err, uri) {\n      if (err) {\n        return next(err)\n      }\n\n      return res.redirect(302, uri)\n    })\n  }\n}\n\nmiddleware.handleRedirect = function () {\n  console.log('middleware handleRedirect')\n  return function (req, res, next) {\n    console.log('middleware handleRedirect req.query', req.query);\n    core.handleRedirect(req.query, function (err, token) {\n      if (err) {\n        return next(err)\n      }\n\n      req.token = token\n      next()\n    })\n  }\n}\n\nmodule.exports = middleware\n"],"sourceRoot":""}